/*! For license information please see activity-sidebar.cb61ce43265a323e53bd.bundle.js.LICENSE */
(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{4270:function(module,__webpack_exports__,__webpack_require__){"use strict";var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_styles_variables__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_accessible_svg__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(12),IconTrash=function IconTrash(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$color=_ref.color,color=void 0===_ref$color?_styles_variables__WEBPACK_IMPORTED_MODULE_1__.bdlGray80:_ref$color,_ref$height=_ref.height,height=void 0===_ref$height?16:_ref$height,title=_ref.title,_ref$width=_ref.width,width=void 0===_ref$width?16:_ref$width;return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_accessible_svg__WEBPACK_IMPORTED_MODULE_2__.a,{className:"icon-trash ".concat(className),height:height,title:title,viewBox:"0 0 16 16",width:width},react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{className:"fill-color",fill:color,fillRule:"evenodd",d:"M14 2l-1.8 11c-.1.6-.7 1-1.2 1H5c-.6 0-1.1-.5-1.2-1L2 2h12zm-1.2 1H3.2l1.6 9.9s.1.1.2.1h6c.06 0 .12-.036.158-.065l.042-.035L12.8 3zm-2.3 1c.3 0 .5.2.5.5s-.2.5-.5.5h-5c-.3 0-.5-.2-.5-.5s.2-.5.5-.5z"}))};__webpack_exports__.a=IconTrash;try{IconTrash.displayName="IconTrash",IconTrash.__docgenInfo={description:"",displayName:"IconTrash",props:{color:{defaultValue:null,description:"A string describing the color for the icon",name:"color",required:!1,type:{name:"string"}},fillColor:{defaultValue:null,description:"A string describing the fill color for the icon",name:"fillColor",required:!1,type:{name:"string"}},opacity:{defaultValue:null,description:"A number specifying the opacity of the icon",name:"opacity",required:!1,type:{name:"number"}},strokeColor:{defaultValue:null,description:"A string describing the color of the icon's stroke",name:"strokeColor",required:!1,type:{name:"string"}},strokeWidth:{defaultValue:null,description:"A number specifying the width of the icon's stroke",name:"strokeWidth",required:!1,type:{name:"number"}},className:{defaultValue:{value:""},description:"Class name for the icon",name:"className",required:!1,type:{name:"string"}},height:{defaultValue:{value:16},description:"A number specifying the height of the icon",name:"height",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"A string describing the icon if it's not purely decorative for accessibility",name:"title",required:!1,type:{name:"string | ReactElement<string, string | ((props: any) => ReactElement<any, string | ... | (new (props: any) => Component<any, any, any>)>) | (new (props: any) => Component<any, any, any>)>"}},width:{defaultValue:{value:16},description:"A number specifying the width of the icon",name:"width",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/general/IconTrash.tsx#IconTrash"]={docgenInfo:IconTrash.__docgenInfo,name:"IconTrash",path:"src/icons/general/IconTrash.tsx#IconTrash"})}catch(__react_docgen_typescript_loader_error){}},4272:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(7),__webpack_require__(28),__webpack_require__(27),__webpack_require__(40),__webpack_require__(41),__webpack_require__(21),__webpack_require__(33);var _constants__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(2);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],0<=excluded.indexOf(key)||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}__webpack_exports__.a={getVersionAction:function(_ref){var restored_at=_ref.restored_at,trashed_at=_ref.trashed_at,version_promoted=_ref.version_promoted,action=_constants__WEBPACK_IMPORTED_MODULE_7__.Gf;return trashed_at&&(action=_constants__WEBPACK_IMPORTED_MODULE_7__.Af),restored_at&&(action=_constants__WEBPACK_IMPORTED_MODULE_7__.Cf),version_promoted&&(action=_constants__WEBPACK_IMPORTED_MODULE_7__.Bf),action},getVersionUser:function(_ref2){var modified_by=_ref2.modified_by,restored_by=_ref2.restored_by,trashed_by=_ref2.trashed_by,uploader_display_name=_ref2.uploader_display_name,_ref3=restored_by||trashed_by||modified_by||_constants__WEBPACK_IMPORTED_MODULE_7__.te,name=_ref3.name,id=_ref3.id;return function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}({},_objectWithoutProperties(_ref3,["name","id"]),{id:id,name:id===_constants__WEBPACK_IMPORTED_MODULE_7__.te.id&&uploader_display_name?uploader_display_name:name})}}},4274:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(7),__webpack_require__(21);var react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),react_intl__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(115),_components_error_mask_ErrorMask__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(465),_components_inline_error_InlineError__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1424),_SidebarSection__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(1427);function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],0<=excluded.indexOf(key)||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}__webpack_exports__.a=function(WrappedComponent){return function(_ref){var maskError=_ref.maskError,inlineError=_ref.inlineError,rest=(_ref.errorCode,_objectWithoutProperties(_ref,["maskError","inlineError","errorCode"]));return maskError?react__WEBPACK_IMPORTED_MODULE_2__.createElement(_SidebarSection__WEBPACK_IMPORTED_MODULE_6__.a,null,react__WEBPACK_IMPORTED_MODULE_2__.createElement(_components_error_mask_ErrorMask__WEBPACK_IMPORTED_MODULE_4__.a,{errorHeader:react__WEBPACK_IMPORTED_MODULE_2__.createElement(react_intl__WEBPACK_IMPORTED_MODULE_3__.a,maskError.errorHeader),errorSubHeader:maskError.errorSubHeader?react__WEBPACK_IMPORTED_MODULE_2__.createElement(react_intl__WEBPACK_IMPORTED_MODULE_3__.a,maskError.errorSubHeader):void 0})):inlineError?react__WEBPACK_IMPORTED_MODULE_2__.createElement(react__WEBPACK_IMPORTED_MODULE_2__.Fragment,null,react__WEBPACK_IMPORTED_MODULE_2__.createElement(_components_inline_error_InlineError__WEBPACK_IMPORTED_MODULE_5__.a,{title:react__WEBPACK_IMPORTED_MODULE_2__.createElement(react_intl__WEBPACK_IMPORTED_MODULE_3__.a,inlineError.title)},react__WEBPACK_IMPORTED_MODULE_2__.createElement(react_intl__WEBPACK_IMPORTED_MODULE_3__.a,inlineError.content)),react__WEBPACK_IMPORTED_MODULE_2__.createElement(WrappedComponent,rest)):react__WEBPACK_IMPORTED_MODULE_2__.createElement(WrappedComponent,rest)}}},4275:function(module,__webpack_exports__,__webpack_require__){"use strict";var _ReadableTime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1425);__webpack_require__.d(__webpack_exports__,"a",(function(){return _ReadableTime__WEBPACK_IMPORTED_MODULE_0__.a}))},4276:function(module,__webpack_exports__,__webpack_require__){"use strict";var _Flyout__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1428);__webpack_require__.d(__webpack_exports__,"a",(function(){return _Flyout__WEBPACK_IMPORTED_MODULE_0__.a}));var _Overlay__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1429);__webpack_require__.d(__webpack_exports__,"b",(function(){return _Overlay__WEBPACK_IMPORTED_MODULE_1__.a}))},4277:function(module,__webpack_exports__,__webpack_require__){"use strict";var _InlineError__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1424);__webpack_require__.d(__webpack_exports__,"a",(function(){return _InlineError__WEBPACK_IMPORTED_MODULE_0__.a}))},4278:function(module,exports,__webpack_require__){},4312:function(module,exports,__webpack_require__){},4313:function(module,exports,__webpack_require__){},4314:function(module,exports,__webpack_require__){},4315:function(module,exports,__webpack_require__){},4316:function(module,exports,__webpack_require__){},4317:function(module,exports,__webpack_require__){},4318:function(module,exports,__webpack_require__){},4319:function(module,exports,__webpack_require__){},4320:function(module,exports,__webpack_require__){},4321:function(module,exports,__webpack_require__){},4322:function(module,exports,__webpack_require__){},4323:function(module,exports,__webpack_require__){var capitalize=__webpack_require__(4324),camelCase=__webpack_require__(1430)((function(result,word,index){return word=word.toLowerCase(),result+(index?capitalize(word):word)}));module.exports=camelCase},4324:function(module,exports,__webpack_require__){var toString=__webpack_require__(508),upperFirst=__webpack_require__(2222);module.exports=function capitalize(string){return upperFirst(toString(string).toLowerCase())}},4325:function(module,exports,__webpack_require__){},4326:function(module,exports,__webpack_require__){},4327:function(module,exports,__webpack_require__){},4328:function(module,exports,__webpack_require__){},4329:function(module,exports,__webpack_require__){},4330:function(module,exports,__webpack_require__){},4331:function(module,exports,__webpack_require__){},4332:function(module,exports,__webpack_require__){},4333:function(module,exports,__webpack_require__){},4343:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(7),__webpack_require__(13),__webpack_require__(17),__webpack_require__(23),__webpack_require__(14),__webpack_require__(29),__webpack_require__(22),__webpack_require__(10),__webpack_require__(46),__webpack_require__(16),__webpack_require__(224),__webpack_require__(15),__webpack_require__(71);var react=__webpack_require__(0),debounce=__webpack_require__(272),debounce_default=__webpack_require__.n(debounce),flow=__webpack_require__(283),flow_default=__webpack_require__.n(flow),get=__webpack_require__(20),get_default=__webpack_require__.n(get),noop=__webpack_require__(9),noop_default=__webpack_require__.n(noop),components_message=__webpack_require__(115),classnames=(__webpack_require__(281),__webpack_require__(19),__webpack_require__(6)),classnames_default=__webpack_require__.n(classnames);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function ActivityItem(_ref,ref){var children=_ref.children,className=_ref.className,isFocused=_ref.isFocused,rest=_objectWithoutProperties(_ref,["children","className","isFocused"]);return react.createElement("li",_extends({className:classnames_default()("bcs-ActivityItem",className,{"bcs-is-focused":isFocused}),ref:ref},rest),children)}var activity_feed_ActivityItem=react.forwardRef(ActivityItem);try{ActivityItem.displayName="ActivityItem",ActivityItem.__docgenInfo={description:"",displayName:"ActivityItem",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},isFocused:{defaultValue:null,description:"",name:"isFocused",required:!1,type:{name:"boolean"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"Ref<HTMLLIElement>"}},key:{defaultValue:null,description:"",name:"key",required:!1,type:{name:"ReactText"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/activity-feed/ActivityItem.tsx#ActivityItem"]={docgenInfo:ActivityItem.__docgenInfo,name:"ActivityItem",path:"src/elements/content-sidebar/activity-feed/activity-feed/ActivityItem.tsx#ActivityItem"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(88),__webpack_require__(27);var react_tether=__webpack_require__(237),react_tether_default=__webpack_require__.n(react_tether),injectIntl=__webpack_require__(91),components_button=(__webpack_require__(21),__webpack_require__(36)),messages=__webpack_require__(8),primary_button=__webpack_require__(192),constants=__webpack_require__(2),flyout=__webpack_require__(4276),interactionTargets=__webpack_require__(419);__webpack_require__(4312);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function DeleteConfirmation_extends(){return(DeleteConfirmation_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function DeleteConfirmation_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function DeleteConfirmation_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],0<=excluded.indexOf(key)||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var DeleteConfirmation_DeleteConfirmation=function(_React$Component){function DeleteConfirmation(){var _getPrototypeOf2,_this;_classCallCheck(this,DeleteConfirmation);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _defineProperty(_assertThisInitialized(_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DeleteConfirmation)).call.apply(_getPrototypeOf2,[this].concat(args)))),"onKeyDown",(function(event){var nativeEvent=event.nativeEvent,_this$props=_this.props,isOpen=_this$props.isOpen,onDeleteCancel=_this$props.onDeleteCancel;switch(nativeEvent.stopImmediatePropagation(),event.key){case constants.Md.escape:event.stopPropagation(),event.preventDefault(),isOpen&&onDeleteCancel()}})),_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(DeleteConfirmation,_React$Component),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(DeleteConfirmation,[{key:"render",value:function render(){var _this$props2=this.props,message=(_this$props2.isOpen,_this$props2.message),onDeleteCancel=_this$props2.onDeleteCancel,onDeleteConfirm=_this$props2.onDeleteConfirm,rest=DeleteConfirmation_objectWithoutProperties(_this$props2,["isOpen","message","onDeleteCancel","onDeleteConfirm"]);return react.createElement(flyout.b,DeleteConfirmation_extends({className:"be-modal bcs-DeleteConfirmation",onKeyDown:this.onKeyDown,role:"dialog",shouldDefaultFocus:!0,shouldOutlineFocus:!1},rest),react.createElement("div",{className:"bcs-DeleteConfirmation-promptMessage"},react.createElement(components_message.a,message)),react.createElement("div",null,react.createElement(components_button.b,{className:"bcs-DeleteConfirmation-cancel",onClick:onDeleteCancel,type:"button","data-resin-target":interactionTargets.a.INLINE_DELETE_CANCEL},react.createElement(components_message.a,messages.a.cancel)),react.createElement(primary_button.a,{className:"bcs-DeleteConfirmation-delete",onClick:onDeleteConfirm,type:"button","data-resin-target":interactionTargets.a.INLINE_DELETE_CONFIRM},react.createElement(components_message.a,messages.a.delete))))}}]),DeleteConfirmation}(react.Component);DeleteConfirmation_DeleteConfirmation.displayName="DeleteConfirmation";var common_delete_confirmation_DeleteConfirmation=DeleteConfirmation_DeleteConfirmation,tooltip=__webpack_require__(26),ReadableTime=__webpack_require__(1425),dist=__webpack_require__(240),activity_timestamp_messages=Object(dist.defineMessages)({fullDateTime:{id:"be.activityFeed.fullDateTime",defaultMessage:"{time, date, full} at {time, time, short}"}});__webpack_require__(4313);function ActivityTimestamp_extends(){return(ActivityTimestamp_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}var ActivityTimestamp_ActivityTimestamp=function(_ref){var date=_ref.date;return react.createElement(tooltip.c,{text:react.createElement(components_message.a,ActivityTimestamp_extends({},activity_timestamp_messages.fullDateTime,{values:{time:date}}))},react.createElement("small",{className:"bcs-ActivityTimestamp"},react.createElement(ReadableTime.a,{relativeThreshold:0,alwaysShowTime:!0,timestamp:date})))};ActivityTimestamp_ActivityTimestamp.displayName="ActivityTimestamp";var activity_timestamp_ActivityTimestamp=ActivityTimestamp_ActivityTimestamp,IconTrash=__webpack_require__(4270),Media=__webpack_require__(52),app_activity_messages=Object(dist.defineMessages)({appActivityDeleteMenuItem:{id:"be.appActivity.deleteMenuItem",defaultMessage:"Delete"},appActivityDeletePrompt:{id:"be.appActivity.deletePrompt",defaultMessage:"Are you sure you want to permanently delete this app activity?"},appActivityAltIcon:{id:"be.appActivity.altIcon",defaultMessage:"{appActivityName} Icon"}}),variables=__webpack_require__(1),components_link=__webpack_require__(402),menu=__webpack_require__(56);__webpack_require__(4314);function AppActivity_typeof(obj){return(AppActivity_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function AppActivity_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function AppActivity_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function AppActivity_possibleConstructorReturn(self,call){return!call||"object"!==AppActivity_typeof(call)&&"function"!=typeof call?AppActivity_assertThisInitialized(self):call}function AppActivity_getPrototypeOf(o){return(AppActivity_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function AppActivity_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function AppActivity_setPrototypeOf(o,p){return(AppActivity_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function AppActivity_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function mapActivityNodes(node){var _node$dataset=node.dataset,dataset=void 0===_node$dataset?{}:_node$dataset,_node$href=node.href,href=void 0===_node$href?"#":_node$href,tagName=node.tagName,textContent=node.textContent;switch(tagName){case"A":return react.createElement(components_link.a,{href:href,"data-resin-target":dataset.resinTarget,"data-resin-action":dataset.resinAction,key:"app_actvity_link_".concat(href),rel:"roreferrer noopener",className:"bcs-AppActivity-link",target:"_blank"},textContent);default:return textContent}}var AppActivity_ref=react.createElement(IconTrash.a,{color:variables.bdlGray80}),AppActivity_AppActivity=function(_React$PureComponent){function AppActivity(){var _getPrototypeOf2,_this;AppActivity_classCallCheck(this,AppActivity);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return AppActivity_defineProperty(AppActivity_assertThisInitialized(_this=AppActivity_possibleConstructorReturn(this,(_getPrototypeOf2=AppActivity_getPrototypeOf(AppActivity)).call.apply(_getPrototypeOf2,[this].concat(args)))),"parser",new DOMParser),AppActivity_defineProperty(AppActivity_assertThisInitialized(_this),"state",{isConfirmingDelete:!1}),AppActivity_defineProperty(AppActivity_assertThisInitialized(_this),"handleDeleteCancel",(function(){_this.setState({isConfirmingDelete:!1})})),AppActivity_defineProperty(AppActivity_assertThisInitialized(_this),"handleDeleteClick",(function(){_this.setState({isConfirmingDelete:!0})})),AppActivity_defineProperty(AppActivity_assertThisInitialized(_this),"handleDeleteConfirm",(function(){var _this$props=_this.props,id=_this$props.id;(0,_this$props.onDelete)({id:id,permissions:_this$props.permissions})})),AppActivity_defineProperty(AppActivity_assertThisInitialized(_this),"parseActivity",(function(){var renderedText=_this.props.rendered_text,doc=_this.parser.parseFromString(renderedText,"text/html");if(!doc)return[];var childNodes=get_default()(doc,"body.childNodes",[]);return Array.from(childNodes)})),_this}return function AppActivity_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&AppActivity_setPrototypeOf(subClass,superClass)}(AppActivity,_React$PureComponent),function AppActivity_createClass(Constructor,protoProps,staticProps){return protoProps&&AppActivity_defineProperties(Constructor.prototype,protoProps),staticProps&&AppActivity_defineProperties(Constructor,staticProps),Constructor}(AppActivity,[{key:"render",value:function render(){var _this$props2=this.props,templateId=_this$props2.activity_template.id,_this$props2$app=_this$props2.app,name=_this$props2$app.name,icon_url=_this$props2$app.icon_url,createdAt=_this$props2.created_at,createdBy=_this$props2.created_by,currentUser=_this$props2.currentUser,error=_this$props2.error,intl=_this$props2.intl,isPending=_this$props2.isPending,permissions=_this$props2.permissions,canDelete=get_default()(permissions,"can_delete",!1)||currentUser&&currentUser.id===createdBy.id,createdAtTimestamp=new Date(createdAt).getTime(),isConfirmingDelete=this.state.isConfirmingDelete;return react.createElement(Media.a,{className:classnames_default()("bcs-AppActivity",{"bcs-is-pending":isPending||error}),"data-resin-target":"loaded","data-resin-feature":"appActivityCard".concat(templateId)},react.createElement(Media.a.Figure,null,react.createElement("img",{className:"bcs-AppActivity-icon",alt:intl.formatMessage(app_activity_messages.appActivityAltIcon,{appActivityName:name}),src:icon_url})),react.createElement(Media.a.Body,{className:"bcs-AppActivity-body"},canDelete&&!isPending&&react.createElement(react_tether_default.a,{attachment:"top right",className:"bcs-AppActivity-confirm",constraints:[{to:"scrollParent",attachment:"together"}],targetAttachment:"bottom right"},react.createElement(Media.a.Menu,{isDisabled:isConfirmingDelete},react.createElement(menu.b,{onClick:this.handleDeleteClick},AppActivity_ref,react.createElement(components_message.a,app_activity_messages.appActivityDeleteMenuItem))),isConfirmingDelete&&react.createElement(common_delete_confirmation_DeleteConfirmation,{isOpen:isConfirmingDelete,message:app_activity_messages.appActivityDeletePrompt,onDeleteCancel:this.handleDeleteCancel,onDeleteConfirm:this.handleDeleteConfirm})),react.createElement("figcaption",{className:"bcs-AppActivity-headline"},name),react.createElement("div",null,react.createElement(activity_timestamp_ActivityTimestamp,{date:createdAtTimestamp})),this.parseActivity().map(mapActivityNodes)))}}]),AppActivity}(react.PureComponent);AppActivity_AppActivity.displayName="AppActivity",AppActivity_defineProperty(AppActivity_AppActivity,"defaultProps",{onDelete:noop_default.a,permissions:{}});var activity_feed_app_activity_AppActivity=Object(injectIntl.c)(AppActivity_AppActivity),inline_error=(__webpack_require__(28),__webpack_require__(40),__webpack_require__(41),__webpack_require__(33),__webpack_require__(4277)),plain_button=__webpack_require__(44);__webpack_require__(4315);function ActivityError_extends(){return(ActivityError_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function ActivityError_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function ActivityError_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],0<=excluded.indexOf(key)||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var ActivityError_ActivityError=function(_ref){var action=_ref.action,message=_ref.message,title=_ref.title,className=_ref.className,rest=ActivityError_objectWithoutProperties(_ref,["action","message","title","className"]);return react.createElement(inline_error.a,{className:classnames_default()("bcs-ActivityError",className),title:react.createElement(components_message.a,ActivityError_extends({},title,rest))},react.createElement("div",null,react.createElement(components_message.a,message)),action?react.createElement(plain_button.a,{className:"bcs-ActivityError-action lnk",onClick:action.onAction,type:"button"},action.text):null)};ActivityError_ActivityError.displayName="ActivityError";var activity_error_ActivityError=ActivityError_ActivityError,loading_indicator=__webpack_require__(357);__webpack_require__(324),__webpack_require__(39),__webpack_require__(323),__webpack_require__(374),__webpack_require__(4316);function UserLink_typeof(obj){return(UserLink_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function UserLink_extends(){return(UserLink_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function UserLink_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function UserLink_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],0<=excluded.indexOf(key)||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function UserLink_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function UserLink_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function UserLink_possibleConstructorReturn(self,call){return!call||"object"!==UserLink_typeof(call)&&"function"!=typeof call?UserLink_assertThisInitialized(self):call}function UserLink_getPrototypeOf(o){return(UserLink_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function UserLink_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function UserLink_setPrototypeOf(o,p){return(UserLink_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function UserLink_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var UserLink_UserLink=function(_React$PureComponent){function UserLink(){var _getPrototypeOf2,_this;UserLink_classCallCheck(this,UserLink);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return UserLink_defineProperty(UserLink_assertThisInitialized(_this=UserLink_possibleConstructorReturn(this,(_getPrototypeOf2=UserLink_getPrototypeOf(UserLink)).call.apply(_getPrototypeOf2,[this].concat(args)))),"state",{}),UserLink_defineProperty(UserLink_assertThisInitialized(_this),"getProfileUrlHandler",(function(profileUrl){_this.setState({profileUrl:profileUrl})})),_this}return function UserLink_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&UserLink_setPrototypeOf(subClass,superClass)}(UserLink,_React$PureComponent),function UserLink_createClass(Constructor,protoProps,staticProps){return protoProps&&UserLink_defineProperties(Constructor.prototype,protoProps),staticProps&&UserLink_defineProperties(Constructor,staticProps),Constructor}(UserLink,[{key:"getUserProfileUrl",value:function(){var _this$props=this.props,id=_this$props.id,getUserProfileUrl=_this$props.getUserProfileUrl;return getUserProfileUrl?getUserProfileUrl(id).then(this.getProfileUrlHandler):Promise.resolve()}},{key:"componentDidMount",value:function componentDidMount(){this.getUserProfileUrl()}},{key:"render",value:function render(){var _this$props2=this.props,name=_this$props2.name,className=(_this$props2.getUserProfileUrl,_this$props2.className),rest=UserLink_objectWithoutProperties(_this$props2,["name","getUserProfileUrl","className"]),profileUrl=this.state.profileUrl;return profileUrl?react.createElement(components_link.a,UserLink_extends({className:classnames_default()("bcs-UserLink",className)},rest,{href:profileUrl}),name):react.createElement("span",rest,name)}}]),UserLink}(react.PureComponent);UserLink_UserLink.displayName="UserLink";var common_user_link_UserLink=UserLink_UserLink;function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if(!(Symbol.iterator in Object(arr)||"[object Arguments]"===Object.prototype.toString.call(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var splitRegex=/((?:[@＠﹫]\[[0-9]+:[^\]]+])|(?:\b(?:(?:ht|f)tps?:\/\/)[\w\._\-]+(?::\d+)?(?:\/[\w\-_\.~\+\/#\?&%=:\[\]@!$'\(\)\*;,]*)?))/gim,utils_formatTaggedMessage=function(tagged_message,itemID,shouldReturnString,getUserProfileUrl){var contentItems=tagged_message.split(splitRegex).map((function(text,contentIndex){var contentKey="".concat(contentIndex,"-").concat(itemID),mentionMatch=text.match(/([@＠﹫])\[([0-9]+):([^\]]+)]/i);if(mentionMatch){var _mentionMatch=_slicedToArray(mentionMatch,4),trigger=_mentionMatch[1],id=_mentionMatch[2],name=_mentionMatch[3];return shouldReturnString?"".concat(trigger).concat(name):react.createElement(common_user_link_UserLink,{key:contentKey,className:"bcs-comment-mention","data-resin-target":interactionTargets.a.MENTION,getUserProfileUrl:getUserProfileUrl,id:id,name:"".concat(trigger).concat(name)})}if(!shouldReturnString){var urlMatch=text.match(/((?:(?:ht|f)tps?:\/\/)[\w\._\-]+(?::\d+)?(?:\/[\w\-_\.~\+\/#\?&%=:\[\]@!$'\(\)\*;,]*)?)/i);if(urlMatch){var url=_slicedToArray(urlMatch,2)[1];return react.createElement(components_link.a,{key:contentKey,href:url},url)}}return text}));return shouldReturnString?contentItems.join(""):contentItems},activity_message_messages=Object(dist.defineMessages)({activityMessageShowOriginal:{id:"be.contentSidebar.activityFeed.commmon.showOriginalMessage",defaultMessage:"Show Original"},activityMessageTranslate:{id:"be.contentSidebar.activityFeed.common.translateMessage",defaultMessage:"Translate"}}),ShowOriginalButton=function(_ref){var handleShowOriginal=_ref.handleShowOriginal;return react.createElement(plain_button.a,{className:"bcs-ActivityMessage-translate",onClick:handleShowOriginal},react.createElement(components_message.a,activity_message_messages.activityMessageShowOriginal))};ShowOriginalButton.displayName="ShowOriginalButton";var activity_message_ShowOriginalButton=ShowOriginalButton,TranslateButton=function(_ref){var handleTranslate=_ref.handleTranslate;return react.createElement(plain_button.a,{className:"bcs-ActivityMessage-translate",onClick:handleTranslate},react.createElement(components_message.a,activity_message_messages.activityMessageTranslate))};TranslateButton.displayName="TranslateButton";var activity_message_TranslateButton=TranslateButton;__webpack_require__(4317);function ActivityMessage_typeof(obj){return(ActivityMessage_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function ActivityMessage_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function ActivityMessage_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function ActivityMessage_possibleConstructorReturn(self,call){return!call||"object"!==ActivityMessage_typeof(call)&&"function"!=typeof call?ActivityMessage_assertThisInitialized(self):call}function ActivityMessage_getPrototypeOf(o){return(ActivityMessage_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function ActivityMessage_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function ActivityMessage_setPrototypeOf(o,p){return(ActivityMessage_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function ActivityMessage_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ActivityMessage_ref=react.createElement("div",{className:"bcs-ActivityMessageLoading"},react.createElement(loading_indicator.b,{size:"small"})),ActivityMessage_ActivityMessage=function(_React$Component){function ActivityMessage(){var _getPrototypeOf2,_this;ActivityMessage_classCallCheck(this,ActivityMessage);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return ActivityMessage_defineProperty(ActivityMessage_assertThisInitialized(_this=ActivityMessage_possibleConstructorReturn(this,(_getPrototypeOf2=ActivityMessage_getPrototypeOf(ActivityMessage)).call.apply(_getPrototypeOf2,[this].concat(args)))),"state",{isLoading:!1,isTranslation:!1}),ActivityMessage_defineProperty(ActivityMessage_assertThisInitialized(_this),"handleTranslate",(function(event){var _this$props=_this.props,id=_this$props.id,tagged_message=_this$props.tagged_message,_this$props$onTransla=_this$props.onTranslate,onTranslate=void 0===_this$props$onTransla?noop_default.a:_this$props$onTransla;_this$props.translatedTaggedMessage||(_this.setState({isLoading:!0}),onTranslate({id:id,tagged_message:tagged_message})),_this.setState({isTranslation:!0}),event.preventDefault()})),ActivityMessage_defineProperty(ActivityMessage_assertThisInitialized(_this),"handleShowOriginal",(function(event){_this.setState({isTranslation:!1}),event.preventDefault()})),_this}return function ActivityMessage_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&ActivityMessage_setPrototypeOf(subClass,superClass)}(ActivityMessage,_React$Component),function ActivityMessage_createClass(Constructor,protoProps,staticProps){return protoProps&&ActivityMessage_defineProperties(Constructor.prototype,protoProps),staticProps&&ActivityMessage_defineProperties(Constructor,staticProps),Constructor}(ActivityMessage,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var _this$props2=this.props,translatedTaggedMessage=_this$props2.translatedTaggedMessage,translationFailed=_this$props2.translationFailed,prevTaggedMessage=prevProps.translatedTaggedMessage,prevTranslationFailed=prevProps.translationFailed;prevTaggedMessage!==translatedTaggedMessage&&prevTranslationFailed!==translationFailed&&(translatedTaggedMessage||translationFailed)&&this.setState({isLoading:!1})}},{key:"getButton",value:function getButton(isTranslation){return isTranslation?react.createElement(activity_message_ShowOriginalButton,{handleShowOriginal:this.handleShowOriginal}):react.createElement(activity_message_TranslateButton,{handleTranslate:this.handleTranslate})}},{key:"render",value:function render(){var _this$props3=this.props,id=_this$props3.id,tagged_message=_this$props3.tagged_message,translatedTaggedMessage=_this$props3.translatedTaggedMessage,translationEnabled=_this$props3.translationEnabled,getUserProfileUrl=_this$props3.getUserProfileUrl,_this$state=this.state,isLoading=_this$state.isLoading,isTranslation=_this$state.isTranslation,commentToDisplay=translationEnabled&&isTranslation&&translatedTaggedMessage?translatedTaggedMessage:tagged_message;return isLoading?ActivityMessage_ref:react.createElement("div",{className:"bcs-ActivityMessage"},utils_formatTaggedMessage(commentToDisplay,id,!1,getUserProfileUrl),translationEnabled?this.getButton(isTranslation):null)}}]),ActivityMessage}(react.Component);ActivityMessage_ActivityMessage.displayName="ActivityMessage",ActivityMessage_defineProperty(ActivityMessage_ActivityMessage,"defaultProps",{translationEnabled:!1});var common_activity_message_ActivityMessage=ActivityMessage_ActivityMessage;function AnnotationActivityLink_extends(){return(AnnotationActivityLink_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function AnnotationActivityLink_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function AnnotationActivityLink_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var AnnotationActivityLink_AnnotationActivityLink=function AnnotationActivityLink(_ref){var id=_ref.id,_ref$isDisabled=_ref.isDisabled,isDisabled=void 0!==_ref$isDisabled&&_ref$isDisabled,message=_ref.message,_ref$onClick=_ref.onClick,onClick=void 0===_ref$onClick?noop_default.a:_ref$onClick,rest=AnnotationActivityLink_objectWithoutProperties(_ref,["id","isDisabled","message","onClick"]);return react.createElement(plain_button.a,AnnotationActivityLink_extends({className:"bcs-AnnotationActivity-link",isDisabled:isDisabled,onClick:function handleClick(event){event.preventDefault(),event.stopPropagation(),event.currentTarget.focus(),onClick(id)},onMouseDown:function handleMouseDown(event){isDisabled||event.nativeEvent.stopImmediatePropagation()},type:components_button.a.BUTTON},rest),react.createElement(components_message.a,message))},annotations_AnnotationActivityLink=AnnotationActivityLink_AnnotationActivityLink;try{AnnotationActivityLink_AnnotationActivityLink.displayName="AnnotationActivityLink",AnnotationActivityLink_AnnotationActivityLink.__docgenInfo={description:"",displayName:"AnnotationActivityLink",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},isDisabled:{defaultValue:{value:!1},description:"",name:"isDisabled",required:!1,type:{name:"boolean"}},message:{defaultValue:null,description:"",name:"message",required:!0,type:{name:"MessageDescriptor"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(id: string) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/annotations/AnnotationActivityLink.tsx#AnnotationActivityLink"]={docgenInfo:AnnotationActivityLink_AnnotationActivityLink.__docgenInfo,name:"AnnotationActivityLink",path:"src/elements/content-sidebar/activity-feed/annotations/AnnotationActivityLink.tsx#AnnotationActivityLink"})}catch(__react_docgen_typescript_loader_error){}var annotations_messages=Object(dist.defineMessages)({annotationActivityDeleteMenuItem:{id:"be.contentSidebar.activityFeed.annotationActivity.annotationActivityDeleteMenuItem",defaultMessage:"Delete"},annotationActivityDeletePrompt:{id:"be.contentSidebar.activityFeed.annotationActivity.annotationActivityDeletePrompt",defaultMessage:"Are you sure you want to permanently delete this comment?"},annotationActivityPostedFullDateTime:{id:"be.contentSidebar.activityFeed.annotationActivity.annotationActivityPostedFullDateTime",defaultMessage:"{time, date, full} at {time, time, short}"},annotationActivityPageItem:{id:"be.contentSidebar.activityFeed.annotationActivityPageItem",defaultMessage:"Page {number}"},annotationActivityVersionLink:{id:"be.contentSidebar.activityFeed.annotationActivityVersionLink",defaultMessage:"Version {number}"},annotationActivityVersionUnavailable:{id:"be.contentSidebar.activityFeed.annotationActivityVersionUnavailable",defaultMessage:"Version Unavailable"}});function AnnotationActivityMenu_slicedToArray(arr,i){return function AnnotationActivityMenu_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function AnnotationActivityMenu_iterableToArrayLimit(arr,i){if(!(Symbol.iterator in Object(arr)||"[object Arguments]"===Object.prototype.toString.call(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function AnnotationActivityMenu_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var AnnotationActivityMenu_ref2=react.createElement(IconTrash.a,{color:variables.bdlGray}),AnnotationActivityMenu=function(_ref){var canDelete=_ref.canDelete,id=_ref.id,onDeleteConfirm=_ref.onDeleteConfirm,_React$useState2=AnnotationActivityMenu_slicedToArray(react.useState(!1),2),isConfirmingDelete=_React$useState2[0],setIsConfirmingDelete=_React$useState2[1];return react.createElement(react_tether_default.a,{attachment:"top right",className:"bcs-AnnotationActivity-deleteConfirmationModal",constraints:[{to:"scrollParent",attachment:"together"}],targetAttachment:"bottom right"},canDelete&&react.createElement(Media.a.Menu,{isDisabled:isConfirmingDelete,"data-testid":"annotation-activity-actions-menu",menuProps:{"data-resin-component":"preview","data-resin-feature":"annotations"}},react.createElement(menu.b,{"data-resin-itemid":id,"data-resin-target":interactionTargets.a.ANNOTATION_OPTIONS_DELETE,"data-testid":"delete-annotation-activity",onClick:function handleDeleteClick(){setIsConfirmingDelete(!0)}},AnnotationActivityMenu_ref2,react.createElement(components_message.a,annotations_messages.annotationActivityDeleteMenuItem))),isConfirmingDelete&&react.createElement(common_delete_confirmation_DeleteConfirmation,{"data-resin-component":interactionTargets.a.ANNOTATION_OPTIONS,isOpen:isConfirmingDelete,message:annotations_messages.annotationActivityDeletePrompt,onDeleteCancel:function handleDeleteCancel(){setIsConfirmingDelete(!1)},onDeleteConfirm:function handleDeleteConfirm(){setIsConfirmingDelete(!1),onDeleteConfirm()}}))};AnnotationActivityMenu.displayName="AnnotationActivityMenu";var annotations_AnnotationActivityMenu=AnnotationActivityMenu,avatar=__webpack_require__(466);function Avatar_typeof(obj){return(Avatar_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function Avatar_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Avatar_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function Avatar_possibleConstructorReturn(self,call){return!call||"object"!==Avatar_typeof(call)&&"function"!=typeof call?Avatar_assertThisInitialized(self):call}function Avatar_getPrototypeOf(o){return(Avatar_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function Avatar_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Avatar_setPrototypeOf(o,p){return(Avatar_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function Avatar_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var Avatar_Avatar=function(_React$PureComponent){function Avatar(){var _getPrototypeOf2,_this;Avatar_classCallCheck(this,Avatar);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return Avatar_defineProperty(Avatar_assertThisInitialized(_this=Avatar_possibleConstructorReturn(this,(_getPrototypeOf2=Avatar_getPrototypeOf(Avatar)).call.apply(_getPrototypeOf2,[this].concat(args)))),"state",{avatarUrl:null}),Avatar_defineProperty(Avatar_assertThisInitialized(_this),"isMounted",!1),Avatar_defineProperty(Avatar_assertThisInitialized(_this),"getAvatarUrlHandler",(function(avatarUrl){_this.isMounted&&_this.setState({avatarUrl:avatarUrl})})),_this}return function Avatar_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&Avatar_setPrototypeOf(subClass,superClass)}(Avatar,_React$PureComponent),function Avatar_createClass(Constructor,protoProps,staticProps){return protoProps&&Avatar_defineProperties(Constructor.prototype,protoProps),staticProps&&Avatar_defineProperties(Constructor,staticProps),Constructor}(Avatar,[{key:"getAvatarUrl",value:function(){var _this$props=this.props,_this$props$user=_this$props.user,user=void 0===_this$props$user?{}:_this$props$user,getAvatarUrl=_this$props.getAvatarUrl,_user$avatar_url=user.avatar_url,avatar_url=void 0===_user$avatar_url?null:_user$avatar_url,id=user.id;return(id&&getAvatarUrl?getAvatarUrl("".concat(id)):Promise.resolve(avatar_url)).then(this.getAvatarUrlHandler)}},{key:"componentDidMount",value:function componentDidMount(){this.isMounted=!0,this.getAvatarUrl()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.isMounted=!1}},{key:"render",value:function render(){var _this$props2=this.props,user=_this$props2.user,className=_this$props2.className,avatarUrl=this.state.avatarUrl,id=user.id,name=user.name;return react.createElement(avatar.a,{avatarUrl:avatarUrl,className:className,id:id,name:name})}}]),Avatar}(react.PureComponent);Avatar_Avatar.displayName="Avatar";var activity_feed_Avatar=Avatar_Avatar;__webpack_require__(4318);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function AnnotationActivity_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var AnnotationActivity_AnnotationActivity=function(_ref){var item=_ref.item,getAvatarUrl=_ref.getAvatarUrl,getUserProfileUrl=_ref.getUserProfileUrl,isCurrentVersion=_ref.isCurrentVersion,_ref$onDelete=_ref.onDelete,onDelete=void 0===_ref$onDelete?noop_default.a:_ref$onDelete,_ref$onSelect=_ref.onSelect,onSelect=void 0===_ref$onSelect?noop_default.a:_ref$onSelect,created_at=item.created_at,created_by=item.created_by,description=item.description,error=item.error,file_version=item.file_version,id=item.id,isPending=item.isPending,_item$permissions=item.permissions,permissions=void 0===_item$permissions?{}:_item$permissions,target=item.target,createdAtTimestamp=new Date(created_at).getTime(),createdByUser=created_by||constants.te,canDelete=permissions.can_delete,isFileVersionUnavailable=null===file_version,message=description&&description.message||"",linkMessage=isCurrentVersion?annotations_messages.annotationActivityPageItem:annotations_messages.annotationActivityVersionLink,linkValue=isCurrentVersion?target.location.value:get_default()(file_version,"version_number"),activityLinkMessage=isFileVersionUnavailable?annotations_messages.annotationActivityVersionUnavailable:function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?ownKeys(Object(source),!0).forEach((function(key){AnnotationActivity_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}({},linkMessage,{values:{number:linkValue}});return react.createElement("div",{className:"bcs-AnnotationActivity","data-resin-feature":"annotations"},react.createElement(Media.a,{className:classnames_default()("bcs-AnnotationActivity-media",{"bcs-is-pending":isPending||error})},react.createElement(Media.a.Figure,null,react.createElement(activity_feed_Avatar,{getAvatarUrl:getAvatarUrl,user:createdByUser})),react.createElement(Media.a.Body,null,canDelete&&!isPending&&react.createElement(annotations_AnnotationActivityMenu,{canDelete:canDelete,id:id,onDeleteConfirm:function handleDeleteConfirm(){onDelete({id:id,permissions:permissions})}}),react.createElement("div",{className:"bcs-AnnotationActivity-headline"},react.createElement(common_user_link_UserLink,{"data-resin-target":interactionTargets.a.PROFILE,getUserProfileUrl:getUserProfileUrl,id:createdByUser.id,name:createdByUser.name})),react.createElement("div",null,react.createElement(activity_timestamp_ActivityTimestamp,{date:createdAtTimestamp})),react.createElement(common_activity_message_ActivityMessage,{id:id,tagged_message:message,getUserProfileUrl:getUserProfileUrl}),react.createElement(annotations_AnnotationActivityLink,{"data-resin-iscurrent":isCurrentVersion,"data-resin-itemid":id,"data-resin-target":"annotationLink",id:id,isDisabled:isFileVersionUnavailable,message:activityLinkMessage,onClick:function handleOnSelect(){onSelect(item)}}))),error?react.createElement(activity_error_ActivityError,error):null)};AnnotationActivity_AnnotationActivity.displayName="AnnotationActivity";var annotations_AnnotationActivity=AnnotationActivity_AnnotationActivity,IconPencil=__webpack_require__(1436),Button=__webpack_require__(25),PrimaryButton=__webpack_require__(73),comment_form_messages=Object(dist.defineMessages)({commentCancel:{id:"be.contentSidebar.activityFeed.commentForm.commentCancel",defaultMessage:"Cancel"},commentLabel:{id:"be.contentSidebar.activityFeed.commentForm.commentLabel",defaultMessage:"Comment"},commentPost:{id:"be.contentSidebar.activityFeed.commentForm.commentPost",defaultMessage:"Post"},commentWrite:{id:"be.contentSidebar.activityFeed.commentForm.commentWrite",defaultMessage:"Write a comment"},approvalAddAssignee:{id:"be.contentSidebar.activityFeed.commentForm.approvalAddAssignee",defaultMessage:"Add an assignee"},approvalAddTask:{id:"be.contentSidebar.activityFeed.commentForm.approvalAddTask",defaultMessage:"Add Task"},approvalAddTaskTooltip:{id:"be.contentSidebar.activityFeed.commentForm.approvalAddTaskTooltip",defaultMessage:"Assigning a task to someone will send them a notification with the message in the comment box and allow them to approve or deny."},approvalAssignees:{id:"be.contentSidebar.activityFeed.commentForm.approvalAssignees",defaultMessage:"Assignees"},approvalDueDate:{id:"be.contentSidebar.activityFeed.commentForm.approvalDueDate",defaultMessage:"Due Date"},approvalSelectDate:{id:"be.contentSidebar.activityFeed.commentForm.approvalSelectDate",defaultMessage:"Select a date"},atMentionTip:{id:"be.contentSidebar.activityFeed.commentForm.atMentionTip",defaultMessage:"@mention users to notify them."}}),CommentInputControls=function(_ref){var onCancel=_ref.onCancel;return react.createElement("div",{className:"bcs-CommentFormControls"},react.createElement(Button.b,{"data-resin-target":interactionTargets.a.APPROVAL_FORM_CANCEL,onClick:onCancel,type:"button"},react.createElement(components_message.a,comment_form_messages.commentCancel)),react.createElement(PrimaryButton.a,{"data-resin-target":interactionTargets.a.APPROVAL_FORM_POST},react.createElement(components_message.a,comment_form_messages.commentPost)))};CommentInputControls.displayName="CommentInputControls";var CommentFormControls=CommentInputControls,draft_js_mention_selector=__webpack_require__(2159),Form=__webpack_require__(1064);__webpack_require__(4319);function CommentForm_typeof(obj){return(CommentForm_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function CommentForm_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function CommentForm_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function CommentForm_possibleConstructorReturn(self,call){return!call||"object"!==CommentForm_typeof(call)&&"function"!=typeof call?CommentForm_assertThisInitialized(self):call}function CommentForm_getPrototypeOf(o){return(CommentForm_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function CommentForm_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function CommentForm_setPrototypeOf(o,p){return(CommentForm_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function CommentForm_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var CommentForm_CommentForm=function(_React$Component){function CommentForm(){var _getPrototypeOf2,_this;CommentForm_classCallCheck(this,CommentForm);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return CommentForm_defineProperty(CommentForm_assertThisInitialized(_this=CommentForm_possibleConstructorReturn(this,(_getPrototypeOf2=CommentForm_getPrototypeOf(CommentForm)).call.apply(_getPrototypeOf2,[this].concat(args)))),"state",{commentEditorState:Object(draft_js_mention_selector.b)(_this.props.tagged_message)}),CommentForm_defineProperty(CommentForm_assertThisInitialized(_this),"onFormValidSubmitHandler",(function(){var _this$props=_this.props,_this$props$createCom=_this$props.createComment,createComment=void 0===_this$props$createCom?noop_default.a:_this$props$createCom,_this$props$updateCom=_this$props.updateComment,updateComment=void 0===_this$props$updateCom?noop_default.a:_this$props$updateCom,onSubmit=_this$props.onSubmit,entityId=_this$props.entityId,_this$getFormattedCom=_this.getFormattedCommentText(),text=_this$getFormattedCom.text,hasMention=_this$getFormattedCom.hasMention;text&&(entityId?updateComment({id:entityId,text:text,hasMention:hasMention}):createComment({text:text,hasMention:hasMention}),onSubmit&&onSubmit(),_this.setState({commentEditorState:Object(draft_js_mention_selector.b)()}))})),CommentForm_defineProperty(CommentForm_assertThisInitialized(_this),"onMentionSelectorChangeHandler",(function(nextEditorState){return _this.setState({commentEditorState:nextEditorState})})),CommentForm_defineProperty(CommentForm_assertThisInitialized(_this),"getFormattedCommentText",(function(){var commentEditorState=_this.state.commentEditorState;return Object(draft_js_mention_selector.d)(commentEditorState)})),_this}return function CommentForm_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&CommentForm_setPrototypeOf(subClass,superClass)}(CommentForm,_React$Component),function CommentForm_createClass(Constructor,protoProps,staticProps){return protoProps&&CommentForm_defineProperties(Constructor.prototype,protoProps),staticProps&&CommentForm_defineProperties(Constructor,staticProps),Constructor}(CommentForm,[{key:"componentDidUpdate",value:function componentDidUpdate(_ref){var prevIsOpen=_ref.isOpen,isOpen=this.props.isOpen;isOpen===prevIsOpen||isOpen||this.setState({commentEditorState:Object(draft_js_mention_selector.b)()})}},{key:"render",value:function render(){var _this$props2=this.props,className=_this$props2.className,getMentionWithQuery=_this$props2.getMentionWithQuery,formatMessage=_this$props2.intl.formatMessage,isDisabled=_this$props2.isDisabled,isOpen=_this$props2.isOpen,_this$props2$mentionS=_this$props2.mentionSelectorContacts,mentionSelectorContacts=void 0===_this$props2$mentionS?[]:_this$props2$mentionS,onCancel=_this$props2.onCancel,onFocus=_this$props2.onFocus,user=_this$props2.user,isEditing=_this$props2.isEditing,tagged_message=_this$props2.tagged_message,getAvatarUrl=_this$props2.getAvatarUrl,_this$props2$showTip=_this$props2.showTip,showTip=void 0===_this$props2$showTip||_this$props2$showTip,commentEditorState=this.state.commentEditorState,inputContainerClassNames=classnames_default()("bcs-CommentForm",className,{"bcs-is-open":isOpen});return react.createElement(Media.a,{className:inputContainerClassNames},!isEditing&&react.createElement(Media.a.Figure,{className:"bcs-CommentForm-avatar"},react.createElement(activity_feed_Avatar,{getAvatarUrl:getAvatarUrl,user:user})),react.createElement(Media.a.Body,{className:"bcs-CommentForm-body","data-testid":"bcs-CommentForm-body"},react.createElement(Form.a,{onValidSubmit:this.onFormValidSubmitHandler},react.createElement(draft_js_mention_selector.c,{className:"bcs-CommentForm-input",contacts:isOpen?mentionSelectorContacts:[],editorState:commentEditorState,hideLabel:!0,isDisabled:isDisabled,isRequired:isOpen,name:"commentText",label:formatMessage(comment_form_messages.commentLabel),onChange:this.onMentionSelectorChangeHandler,onFocus:onFocus,onMention:getMentionWithQuery,placeholder:tagged_message?void 0:formatMessage(comment_form_messages.commentWrite),validateOnBlur:!1}),showTip&&react.createElement("aside",{className:"bcs-CommentForm-tip"},react.createElement(components_message.a,comment_form_messages.atMentionTip)),isOpen&&react.createElement(CommentFormControls,{onCancel:onCancel}))))}}]),CommentForm}(react.Component);CommentForm_CommentForm.displayName="CommentForm",CommentForm_defineProperty(CommentForm_CommentForm,"defaultProps",{isOpen:!1});var activity_feed_comment_form_CommentForm=Object(injectIntl.c)(CommentForm_CommentForm),comment_messages=Object(dist.defineMessages)({commentDeleteMenuItem:{id:"be.contentSidebar.activityFeed.comment.commentDeleteMenuItem",defaultMessage:"Delete"},commentDeletePrompt:{id:"be.contentSidebar.activityFeed.comment.commentDeletePrompt",defaultMessage:"Are you sure you want to permanently delete this comment?"},commentEditMenuItem:{id:"be.contentSidebar.activityFeed.comment.commentEditMenuItem",defaultMessage:"Modify"},commentPostedFullDateTime:{id:"be.contentSidebar.activityFeed.comment.commentPostedFullDateTime",defaultMessage:"{time, date, full} at {time, time, short}"}});__webpack_require__(4320);function Comment_typeof(obj){return(Comment_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function Comment_extends(){return(Comment_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function Comment_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Comment_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function Comment_possibleConstructorReturn(self,call){return!call||"object"!==Comment_typeof(call)&&"function"!=typeof call?Comment_assertThisInitialized(self):call}function Comment_getPrototypeOf(o){return(Comment_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function Comment_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Comment_setPrototypeOf(o,p){return(Comment_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function Comment_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var Comment_ref2=react.createElement(IconPencil.a,{color:variables.bdlGray80}),Comment_ref3=react.createElement(IconTrash.a,{color:variables.bdlGray80}),Comment_Comment=function(_React$Component){function Comment(){var _getPrototypeOf2,_this;Comment_classCallCheck(this,Comment);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return Comment_defineProperty(Comment_assertThisInitialized(_this=Comment_possibleConstructorReturn(this,(_getPrototypeOf2=Comment_getPrototypeOf(Comment)).call.apply(_getPrototypeOf2,[this].concat(args)))),"state",{isConfirmingDelete:!1,isEditing:!1,isInputOpen:!1}),Comment_defineProperty(Comment_assertThisInitialized(_this),"handleDeleteConfirm",(function(){var _this$props=_this.props,id=_this$props.id;(0,_this$props.onDelete)({id:id,permissions:_this$props.permissions})})),Comment_defineProperty(Comment_assertThisInitialized(_this),"handleDeleteCancel",(function(){_this.setState({isConfirmingDelete:!1})})),Comment_defineProperty(Comment_assertThisInitialized(_this),"handleDeleteClick",(function(){_this.setState({isConfirmingDelete:!0})})),Comment_defineProperty(Comment_assertThisInitialized(_this),"handleEditClick",(function(){_this.setState({isEditing:!0,isInputOpen:!0})})),Comment_defineProperty(Comment_assertThisInitialized(_this),"commentFormFocusHandler",(function(){return _this.setState({isInputOpen:!0})})),Comment_defineProperty(Comment_assertThisInitialized(_this),"commentFormCancelHandler",(function(){return _this.setState({isInputOpen:!1,isEditing:!1})})),Comment_defineProperty(Comment_assertThisInitialized(_this),"commentFormSubmitHandler",(function(){return _this.setState({isInputOpen:!1,isEditing:!1})})),Comment_defineProperty(Comment_assertThisInitialized(_this),"handleUpdate",(function(_ref){var id=_ref.id,text=_ref.text,hasMention=_ref.hasMention,_this$props2=_this.props;(0,_this$props2.onEdit)(id,text,hasMention,_this$props2.permissions),_this.commentFormSubmitHandler()})),_this}return function Comment_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&Comment_setPrototypeOf(subClass,superClass)}(Comment,_React$Component),function Comment_createClass(Constructor,protoProps,staticProps){return protoProps&&Comment_defineProperties(Constructor.prototype,protoProps),staticProps&&Comment_defineProperties(Constructor,staticProps),Constructor}(Comment,[{key:"render",value:function render(){var _this$props3=this.props,created_by=_this$props3.created_by,created_at=_this$props3.created_at,_this$props3$permissi=_this$props3.permissions,permissions=void 0===_this$props3$permissi?{}:_this$props3$permissi,id=_this$props3.id,isPending=_this$props3.isPending,error=_this$props3.error,_this$props3$tagged_m=_this$props3.tagged_message,tagged_message=void 0===_this$props3$tagged_m?"":_this$props3$tagged_m,translatedTaggedMessage=_this$props3.translatedTaggedMessage,translations=_this$props3.translations,currentUser=_this$props3.currentUser,isDisabled=_this$props3.isDisabled,getAvatarUrl=_this$props3.getAvatarUrl,getUserProfileUrl=_this$props3.getUserProfileUrl,getMentionWithQuery=_this$props3.getMentionWithQuery,mentionSelectorContacts=_this$props3.mentionSelectorContacts,onEdit=_this$props3.onEdit,_this$state=this.state,isConfirmingDelete=_this$state.isConfirmingDelete,isEditing=_this$state.isEditing,isInputOpen=_this$state.isInputOpen,createdAtTimestamp=new Date(created_at).getTime(),createdByUser=created_by||constants.te,canEdit=onEdit!==noop_default.a&&permissions.can_edit,canDelete=permissions.can_delete;return react.createElement("div",{className:"bcs-Comment"},react.createElement(Media.a,{className:classnames_default()("bcs-Comment-media",{"bcs-is-pending":isPending||error})},react.createElement(Media.a.Figure,null,react.createElement(activity_feed_Avatar,{getAvatarUrl:getAvatarUrl,user:createdByUser})),react.createElement(Media.a.Body,null,(canDelete||canEdit)&&!isPending&&react.createElement(react_tether_default.a,{attachment:"top right",className:"bcs-Comment-deleteConfirmationModal",constraints:[{to:"scrollParent",attachment:"together"}],targetAttachment:"bottom right"},react.createElement(Media.a.Menu,{isDisabled:isConfirmingDelete,"data-testid":"comment-actions-menu",menuProps:{"data-resin-component":interactionTargets.a.COMMENT_OPTIONS}},canEdit&&react.createElement(menu.b,{"data-resin-target":interactionTargets.a.COMMENT_OPTIONS_EDIT,"data-testid":"edit-comment",onClick:this.handleEditClick},Comment_ref2,react.createElement(components_message.a,comment_messages.commentEditMenuItem)),canDelete&&react.createElement(menu.b,{"data-resin-target":interactionTargets.a.COMMENT_OPTIONS_DELETE,"data-testid":"delete-comment",onClick:this.handleDeleteClick},Comment_ref3,react.createElement(components_message.a,comment_messages.commentDeleteMenuItem))),isConfirmingDelete&&react.createElement(common_delete_confirmation_DeleteConfirmation,{"data-resin-component":interactionTargets.a.COMMENT_OPTIONS,isOpen:isConfirmingDelete,message:comment_messages.commentDeletePrompt,onDeleteCancel:this.handleDeleteCancel,onDeleteConfirm:this.handleDeleteConfirm})),react.createElement("div",{className:"bcs-Comment-headline"},react.createElement(common_user_link_UserLink,{"data-resin-target":interactionTargets.a.PROFILE,id:createdByUser.id,name:createdByUser.name,getUserProfileUrl:getUserProfileUrl})),react.createElement("div",null,react.createElement(activity_timestamp_ActivityTimestamp,{date:createdAtTimestamp})),isEditing?react.createElement(activity_feed_comment_form_CommentForm,{isDisabled:isDisabled,className:classnames_default()("bcs-Comment-editor",{"bcs-is-disabled":isDisabled}),updateComment:this.handleUpdate,isOpen:isInputOpen,user:currentUser,onCancel:this.commentFormCancelHandler,onFocus:this.commentFormFocusHandler,isEditing:isEditing,entityId:id,tagged_message:tagged_message,getAvatarUrl:getAvatarUrl,mentionSelectorContacts:mentionSelectorContacts,getMentionWithQuery:getMentionWithQuery}):react.createElement(common_activity_message_ActivityMessage,Comment_extends({id:id,tagged_message:tagged_message,translatedTaggedMessage:translatedTaggedMessage},translations,{translationFailed:!!error||null,getUserProfileUrl:getUserProfileUrl})))),error?react.createElement(activity_error_ActivityError,error):null)}}]),Comment}(react.Component);Comment_Comment.displayName="Comment",Comment_defineProperty(Comment_Comment,"defaultProps",{onDelete:noop_default.a,onEdit:noop_default.a});var activity_feed_comment_Comment=Comment_Comment,feature_checking=__webpack_require__(305),api_context=__webpack_require__(800),accessible_svg=__webpack_require__(12),IconTaskApproval_IconTaskApproval=function IconTaskApproval(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$height=_ref.height,height=void 0===_ref$height?24:_ref$height,title=_ref.title,_ref$width=_ref.width,width=void 0===_ref$width?24:_ref$width;return react.createElement(accessible_svg.a,{className:"bdl-IconTaskApproval ".concat(className),height:height,title:title,viewBox:"0 0 32 32",width:width},react.createElement("g",{fill:"none",fillRule:"nonzero"},react.createElement("circle",{className:"background-color",fill:variables.bdlBoxBlue,cx:"16",cy:"16",r:"16"}),react.createElement("g",{transform:"translate(8 5.333)",className:"foreground-color",fill:variables.white},react.createElement("path",{d:"M11.267 6.51c-1.133 2.242-1.669 4.276-1.614 6.102.006.213-.177.388-.405.388H6.752c-.228 0-.41-.175-.405-.388.055-1.826-.481-3.86-1.614-6.102C2.953 2.986 4.557 0 8 0s5.047 2.986 3.267 6.51z"}),react.createElement("rect",{y:"14.337",width:"16",height:"3.353",rx:"1.676"}),react.createElement("rect",{x:"1.143",y:"18.808",width:"13.714",height:"1.192",rx:".596"}))))},two_toned_IconTaskApproval=IconTaskApproval_IconTaskApproval;try{IconTaskApproval_IconTaskApproval.displayName="IconTaskApproval",IconTaskApproval_IconTaskApproval.__docgenInfo={description:"",displayName:"IconTaskApproval",props:{className:{defaultValue:{value:""},description:"Class name for the icon",name:"className",required:!1,type:{name:"string"}},height:{defaultValue:{value:24},description:"A number specifying the height of the icon",name:"height",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"A string describing the icon if it's not purely decorative for accessibility",name:"title",required:!1,type:{name:"string | ReactElement<string, string | ((props: any) => ReactElement<any, string | ... | (new (props: any) => Component<any, any, any>)>) | (new (props: any) => Component<any, any, any>)>"}},width:{defaultValue:{value:24},description:"A number specifying the width of the icon",name:"width",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/two-toned/IconTaskApproval.tsx#IconTaskApproval"]={docgenInfo:IconTaskApproval_IconTaskApproval.__docgenInfo,name:"IconTaskApproval",path:"src/icons/two-toned/IconTaskApproval.tsx#IconTaskApproval"})}catch(__react_docgen_typescript_loader_error){}var IconTaskGeneral_IconTaskGeneral=function IconTaskGeneral(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$height=_ref.height,height=void 0===_ref$height?24:_ref$height,title=_ref.title,_ref$width=_ref.width,width=void 0===_ref$width?24:_ref$width;return react.createElement(accessible_svg.a,{className:"bdl-IconTaskGeneral ".concat(className),height:height,title:title,viewBox:"0 0 32 32",width:width},react.createElement("g",{fillRule:"nonzero",fill:"none"},react.createElement("circle",{className:"background-color",fill:variables.bdlBoxBlue,cx:"16.162",cy:"16.162",r:"16"}),react.createElement("path",{d:"M11.717 8.162v.889c0 1.472.995 2.666 2.222 2.666h4.445c1.227 0 2.222-1.194 2.222-2.666v-.89h1.281c.766 0 1.386.62 1.386 1.386v13.23c0 .764-.62 1.385-1.386 1.385H10.436c-.765 0-1.385-.62-1.385-1.386V9.546c0-.764.62-1.384 1.385-1.384h1.281zm6.463 6.503l-2.741 2.924-1.354-1.203a.889.889 0 1 0-1.18 1.329l2 1.778c.36.32.909.295 1.238-.057l3.334-3.555a.889.889 0 1 0-1.297-1.216zm-4.981-6.503h5.926v.889c0 .49-.332.888-.741.888h-4.445c-.409 0-.74-.398-.74-.888v-.89z",className:"foreground-color",fill:variables.white})))},two_toned_IconTaskGeneral=IconTaskGeneral_IconTaskGeneral;try{IconTaskGeneral_IconTaskGeneral.displayName="IconTaskGeneral",IconTaskGeneral_IconTaskGeneral.__docgenInfo={description:"",displayName:"IconTaskGeneral",props:{className:{defaultValue:{value:""},description:"Class name for the icon",name:"className",required:!1,type:{name:"string"}},height:{defaultValue:{value:24},description:"A number specifying the height of the icon",name:"height",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"A string describing the icon if it's not purely decorative for accessibility",name:"title",required:!1,type:{name:"string | ReactElement<string, string | ((props: any) => ReactElement<any, string | ... | (new (props: any) => Component<any, any, any>)>) | (new (props: any) => Component<any, any, any>)>"}},width:{defaultValue:{value:24},description:"A number specifying the width of the icon",name:"width",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/two-toned/IconTaskGeneral.tsx#IconTaskGeneral"]={docgenInfo:IconTaskGeneral_IconTaskGeneral.__docgenInfo,name:"IconTaskGeneral",path:"src/icons/two-toned/IconTaskGeneral.tsx#IconTaskGeneral"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(1437);var task_new_messages=Object(dist.defineMessages)({taskCollaboratorLoadErrorMessage:{id:"be.contentSidebar.activityFeed.taskNew.taskCollaboratorLoadErrorMessage",defaultMessage:"An error has occurred while loading collaborators for this task. Please try again."},taskShowMoreAssignees:{id:"be.contentSidebar.activityFeed.taskNew.taskShowMoreAssignees",defaultMessage:"Show {additionalAssigneeCount} More"},taskShowMoreAssigneesOverflow:{id:"be.contentSidebar.activityFeed.taskNew.taskShowMoreAssigneesOverflow",defaultMessage:"{additionalAssigneeCount, plural, one {Show #+ More} other {Show #+ More}}"},taskShowLessAssignees:{id:"be.contentSidebar.activityFeed.taskNew.taskShowLessAssignees",defaultMessage:"Show Less"},taskDueDateLabel:{id:"be.contentSidebar.activityFeed.taskNew.taskDueDateLabel",defaultMessage:"Due: {date}"},tasksFeedApproveAction:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedApproveAction",defaultMessage:"Approve"},tasksFeedCompleteAction:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedCompleteAction",defaultMessage:"Mark as Complete"},tasksFeedRejectAction:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedRejectAction",defaultMessage:"Reject"},tasksFeedViewDetailsAction:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedViewDetailsAction",defaultMessage:"View Task Details"},tasksFeedCompletedLabel:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedCompletedLabel",defaultMessage:"Completed"},taskFeedCompletedUppercaseLabel:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedCompletedUppercaseLabel",defaultMessage:"COMPLETED"},tasksFeedApprovedLabel:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedApprovedLabel",defaultMessage:"Approved"},taskFeedApprovedUppercaseLabel:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedApprovedUppercaseLabel",defaultMessage:"APPROVED"},tasksFeedRejectedLabel:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedRejectedLabel",defaultMessage:"Rejected"},taskFeedRejectedUppercaseLabel:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedRejectedUppercaseLabel",defaultMessage:"REJECTED"},tasksFeedInProgressLabel:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedInProgressLabel",defaultMessage:"In Progress"},taskFeedInProgressUppercaseLabel:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedInProgressUppercaseLabel",defaultMessage:"IN PROGRESS"},tasksFeedHeadlineApprovalCurrentUser:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedHeadlineApprovalCurrentUser",defaultMessage:"{user} assigned you an Approval Task"},tasksFeedHeadlineApproval:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedHeadlineApproval",defaultMessage:"{user} assigned an Approval Task"},tasksFeedHeadlineGeneralCurrentUser:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedHeadlineGeneralCurrentUser",defaultMessage:"{user} assigned you a Task"},tasksFeedHeadlineGeneral:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedHeadlineGeneral",defaultMessage:"{user} assigned a Task"},tasksFeedMoreAssigneesLabel:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedMoreAssigneesLabel",defaultMessage:"See all assignees"},tasksFeedAssigneeListTitle:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedAssigneeListTitle",defaultMessage:"Assignees"},tasksFeedStatusRejected:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedStatusRejected",defaultMessage:"Rejected {dateTime}"},tasksFeedStatusApproved:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedStatusApproved",defaultMessage:"Approved {dateTime}"},tasksFeedStatusCompleted:{id:"be.contentSidebar.activityFeed.taskNew.tasksFeedStatusCompleted",defaultMessage:"Completed {dateTime}"},taskFeedStatusDue:{id:"be.contentSidebar.activityFeed.taskNew.taskFeedStatusDue",defaultMessage:"DUE {dateTime}"},taskAssignmentCompleted:{id:"be.contentSidebar.activityFeed.taskNew.taskAssignmentCompleted",defaultMessage:"Completed"},taskDeleteMenuItem:{id:"be.contentSidebar.activityFeed.task.taskDeleteMenuItem",defaultMessage:"Delete task"},taskEditMenuItem:{id:"be.contentSidebar.activityFeed.task.taskEditMenuItem",defaultMessage:"Modify task"},taskDeletePrompt:{id:"be.contentSidebar.activityFeed.task.taskDeletePrompt",defaultMessage:"Are you sure you want to permanently delete this task?"},taskAnyAffordanceTooltip:{id:"be.contentSidebar.activityFeed.task.taskAnyAffordanceTooltip",defaultMessage:"Only one assignee is required to complete this task"},taskMultipleFilesAffordanceTooltip:{id:"be.contentSidebar.activityFeed.task.taskMultipleFilesAffordanceTooltip",defaultMessage:"There are multiple files associated with this task"}}),TaskActions_TaskActions=(__webpack_require__(4321),function(_ref){var isMultiFile=_ref.isMultiFile,onTaskApproval=_ref.onTaskApproval,onTaskReject=_ref.onTaskReject,onTaskComplete=_ref.onTaskComplete,onTaskView=_ref.onTaskView,taskType=_ref.taskType,action=null;return isMultiFile?action=onTaskView&&react.createElement(primary_button.a,{className:"bcs-TaskActions-button","data-testid":"view-task",onClick:onTaskView,"data-resin-target":interactionTargets.a.TASK_VIEW_DETAILS},react.createElement(components_message.a,task_new_messages.tasksFeedViewDetailsAction)):taskType===constants.mf?action=react.createElement(react.Fragment,null,react.createElement(components_button.b,{className:"bcs-TaskActions-button","data-testid":"reject-task",onClick:onTaskReject,"data-resin-target":interactionTargets.a.TASK_REJECT},react.createElement(components_message.a,task_new_messages.tasksFeedRejectAction)),react.createElement(primary_button.a,{className:"bcs-TaskActions-button","data-testid":"approve-task",onClick:onTaskApproval,"data-resin-target":interactionTargets.a.TASK_APPROVE},react.createElement(components_message.a,task_new_messages.tasksFeedApproveAction))):taskType===constants.nf&&(action=react.createElement(primary_button.a,{className:"bcs-TaskActions-button","data-testid":"complete-task",onClick:onTaskComplete,"data-resin-target":interactionTargets.a.TASK_COMPLETE},react.createElement(components_message.a,task_new_messages.tasksFeedCompleteAction))),react.createElement("div",{className:"bcs-TaskActions"},action)});TaskActions_TaskActions.displayName="TaskActions";var task_new_TaskActions=TaskActions_TaskActions,label_pill=__webpack_require__(733),Avatar16=__webpack_require__(1406),TaskCompletionRuleIcon_ref2=(__webpack_require__(4322),react.createElement(label_pill.a.Pill,null,react.createElement(label_pill.a.Icon,{Component:Avatar16.a}),react.createElement(label_pill.a.Text,{className:"bcs-TaskCompletionRuleIcon-oneSize"},"1"))),task_new_TaskCompletionRuleIcon=function(_ref){return _ref.completionRule===constants.df&&react.createElement("span",{className:"bcs-TaskCompletionRuleIcon"},react.createElement(tooltip.c,{position:"top-center",text:react.createElement(components_message.a,task_new_messages.taskAnyAffordanceTooltip)},TaskCompletionRuleIcon_ref2))},time=__webpack_require__(4275);function TaskDueDate_extends(){return(TaskDueDate_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}var TaskDueDate=function(_ref){var dueDate=_ref.dueDate,status=_ref.status,isOverdue=!!dueDate&&(status===constants.kf&&new Date(dueDate)<Date.now()),fullDueDate=new Date(dueDate),pillProps=isOverdue?{"data-testid":"task-overdue-date",type:"error"}:{type:"default"};return react.createElement("div",{"data-testid":"task-due-date"},react.createElement(label_pill.a.Pill,pillProps,react.createElement(label_pill.a.Text,null,react.createElement(components_message.a,TaskDueDate_extends({},task_new_messages.taskFeedStatusDue,{values:{dateTime:react.createElement(time.a,{alwaysShowTime:!0,uppercase:!0,timestamp:fullDueDate.getTime()})}})))))};TaskDueDate.displayName="TaskDueDate";var _statusMessageKeyMap,_typeKeyMap,task_new_TaskDueDate=TaskDueDate;function TaskStatus_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var statusMessageKeyMap=(TaskStatus_defineProperty(_statusMessageKeyMap={},constants.hf,task_new_messages.taskFeedApprovedUppercaseLabel),TaskStatus_defineProperty(_statusMessageKeyMap,constants.if,task_new_messages.taskFeedCompletedUppercaseLabel),TaskStatus_defineProperty(_statusMessageKeyMap,constants.lf,task_new_messages.taskFeedRejectedUppercaseLabel),TaskStatus_defineProperty(_statusMessageKeyMap,constants.kf,task_new_messages.taskFeedInProgressUppercaseLabel),TaskStatus_defineProperty(_statusMessageKeyMap,constants.jf,task_new_messages.taskFeedInProgressUppercaseLabel),_statusMessageKeyMap),typeKeyMap=(TaskStatus_defineProperty(_typeKeyMap={},constants.hf,"success"),TaskStatus_defineProperty(_typeKeyMap,constants.if,"success"),TaskStatus_defineProperty(_typeKeyMap,constants.lf,"error"),TaskStatus_defineProperty(_typeKeyMap,constants.kf,"default"),TaskStatus_defineProperty(_typeKeyMap,constants.jf,"default"),_typeKeyMap),TaskStatus=react.memo((function(_ref){var status=_ref.status;return react.createElement(label_pill.a.Pill,{type:typeKeyMap[status]},react.createElement(label_pill.a.Text,null,react.createElement(components_message.a,statusMessageKeyMap[status])))})),camelCase=(__webpack_require__(104),__webpack_require__(4323)),camelCase_default=__webpack_require__.n(camelCase),IconVerified=__webpack_require__(2074),IconRejected_IconRejected=function IconRejected(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$color=_ref.color,color=void 0===_ref$color?"#ED3757":_ref$color,_ref$height=_ref.height,height=void 0===_ref$height?18:_ref$height,title=_ref.title,_ref$width=_ref.width,width=void 0===_ref$width?18:_ref$width;return react.createElement(accessible_svg.a,{className:"icon-rejected ".concat(className),height:height,title:title,viewBox:"0 0 18 18",width:width},react.createElement("g",{fill:"none",fillRule:"evenodd"},react.createElement("circle",{cx:9,cy:9,fill:color,r:9}),react.createElement("path",{d:"M9 7.586l2.828-2.829 1.415 1.415L10.414 9l2.829 2.828-1.415 1.415L9 10.414l-2.828 2.829-1.415-1.415L7.586 9 4.757 6.172l1.415-1.415z",fill:"#FFF",fillRule:"nonzero"})))},general_IconRejected=IconRejected_IconRejected;try{IconRejected_IconRejected.displayName="IconRejected",IconRejected_IconRejected.__docgenInfo={description:"",displayName:"IconRejected",props:{color:{defaultValue:{value:"#ED3757"},description:"A string describing the color for the icon",name:"color",required:!1,type:{name:"string"}},fillColor:{defaultValue:null,description:"A string describing the fill color for the icon",name:"fillColor",required:!1,type:{name:"string"}},opacity:{defaultValue:null,description:"A number specifying the opacity of the icon",name:"opacity",required:!1,type:{name:"number"}},strokeColor:{defaultValue:null,description:"A string describing the color of the icon's stroke",name:"strokeColor",required:!1,type:{name:"string"}},strokeWidth:{defaultValue:null,description:"A number specifying the width of the icon's stroke",name:"strokeWidth",required:!1,type:{name:"number"}},className:{defaultValue:{value:""},description:"Class name for the icon",name:"className",required:!1,type:{name:"string"}},height:{defaultValue:{value:18},description:"A number specifying the height of the icon",name:"height",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"A string describing the icon if it's not purely decorative for accessibility",name:"title",required:!1,type:{name:"string | ReactElement<string, string | ((props: any) => ReactElement<any, string | ... | (new (props: any) => Component<any, any, any>)>) | (new (props: any) => Component<any, any, any>)>"}},width:{defaultValue:{value:18},description:"A number specifying the width of the icon",name:"width",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/general/IconRejected.tsx#IconRejected"]={docgenInfo:IconRejected_IconRejected.__docgenInfo,name:"IconRejected",path:"src/icons/general/IconRejected.tsx#IconRejected"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__(4325);function AvatarGroupAvatar_extends(){return(AvatarGroupAvatar_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function AvatarGroupAvatar_objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function AvatarGroupAvatar_objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],0<=excluded.indexOf(key)||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var _statusMessages,StatusIcon=function(_ref){var status=_ref.status,rest=AvatarGroupAvatar_objectWithoutProperties(_ref,["status"]);switch(status){case constants.hf:case constants.if:return react.createElement(IconVerified.a,rest);case constants.lf:return react.createElement(general_IconRejected,rest);case constants.kf:default:return null}},task_new_AvatarGroupAvatar=react.memo((function(_ref2){var user=_ref2.user,status=_ref2.status,getAvatarUrl=_ref2.getAvatarUrl,className=_ref2.className,rest=AvatarGroupAvatar_objectWithoutProperties(_ref2,["user","status","getAvatarUrl","className"]);return react.createElement("div",AvatarGroupAvatar_extends({className:classnames_default()("bcs-AvatarGroupAvatar",className),"data-testid":"avatar-group-avatar-container"},rest),react.createElement(activity_feed_Avatar,{className:"bcs-AvatarGroupAvatar-avatar",user:user,getAvatarUrl:getAvatarUrl}),react.createElement(StatusIcon,{status:status,className:"bcs-AvatarGroupAvatar-statusIcon ".concat(camelCase_default()(status)),height:12,width:12,title:react.createElement(components_message.a,task_new_messages.taskAssignmentCompleted)}))})),prop_types=(__webpack_require__(4326),__webpack_require__(4)),prop_types_default=__webpack_require__.n(prop_types);function AssigneeDetails_extends(){return(AssigneeDetails_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function AssigneeDetails_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var statusMessages=(AssigneeDetails_defineProperty(_statusMessages={},constants.hf,task_new_messages.tasksFeedStatusApproved),AssigneeDetails_defineProperty(_statusMessages,constants.lf,task_new_messages.tasksFeedStatusRejected),AssigneeDetails_defineProperty(_statusMessages,constants.if,task_new_messages.tasksFeedStatusCompleted),AssigneeDetails_defineProperty(_statusMessages,constants.kf,null),_statusMessages),Datestamp=function(_ref){var date=_ref.date;return react.createElement(ReadableTime.a,{timestamp:new Date(date).getTime(),alwaysShowTime:!0,relativeThreshold:0})};Datestamp.displayName="Datestamp",Datestamp.propTypes={date:prop_types_default.a.oneOfType([function(){return("function"==typeof ISODate?prop_types_default.a.instanceOf(ISODate):prop_types_default.a.any).apply(this,arguments)},function(){return("function"==typeof Date?prop_types_default.a.instanceOf(Date):prop_types_default.a.any).apply(this,arguments)}]).isRequired};var task_new_AssigneeDetails=react.memo((function(_ref2){var user=_ref2.user,status=_ref2.status,completedAt=_ref2.completedAt,className=_ref2.className,statusMessage=statusMessages[status]||null;return react.createElement("div",{className:classnames_default()(className,"bcs-AssigneeDetails")},react.createElement("div",{className:"bcs-AssigneeDetails-name"},user.name?user.name:react.createElement(components_message.a,messages.a.priorCollaborator)),statusMessage&&completedAt&&react.createElement("div",{className:"bcs-AssigneeDetails-status"},react.createElement(components_message.a,AssigneeDetails_extends({},statusMessage,{values:{dateTime:react.createElement(Datestamp,{date:completedAt})}}))))}));__webpack_require__(4327);function AssigneeList_extends(){return(AssigneeList_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function AssigneeList_AssigneeList(props){var _props$initialAssigne=props.initialAssigneeCount,initialAssigneeCount=void 0===_props$initialAssigne?3:_props$initialAssigne,_props$users=props.users,users=void 0===_props$users?{}:_props$users,getAvatarUrl=props.getAvatarUrl,isOpen=props.isOpen,onCollapse=props.onCollapse,onExpand=props.onExpand,_users$entries=users.entries,entries=void 0===_users$entries?[]:_users$entries,next_marker=users.next_marker,entryCount=entries.length,numVisibleAssignees=isOpen?entryCount:initialAssigneeCount,visibleUsers=entries.slice(0,numVisibleAssignees).map((function(_ref){var id=_ref.id,target=_ref.target,status=_ref.status,completedAt=_ref.completed_at;return react.createElement("li",{key:id,className:"bcs-AssigneeList-listItem","data-testid":"assignee-list-item"},react.createElement(task_new_AvatarGroupAvatar,{status:status,className:"bcs-AssigneeList-listItemAvatar",user:target,getAvatarUrl:getAvatarUrl}),react.createElement(task_new_AssigneeDetails,{user:target,status:status,completedAt:completedAt}))})),hiddenAssigneeCount=Math.max(0,entryCount-initialAssigneeCount),maxAdditionalAssignees=20-initialAssigneeCount,hasMoreAssigneesThanPageSize=hiddenAssigneeCount>maxAdditionalAssignees||next_marker,additionalAssigneeMessage=hasMoreAssigneesThanPageSize?task_new_messages.taskShowMoreAssigneesOverflow:task_new_messages.taskShowMoreAssignees;return react.createElement("div",{className:"bcs-AssigneeList"},react.createElement("ul",{className:"bcs-AssigneeList-list","data-testid":"task-assignee-list"},visibleUsers),!isOpen&&0<hiddenAssigneeCount&&react.createElement("div",{className:"bcs-AssigneeList-toggleBtn"},react.createElement(plain_button.a,{"data-resin-target":"showmorebtn","data-testid":"show-more-assignees",onClick:onExpand,className:"lnk"},react.createElement(components_message.a,AssigneeList_extends({},additionalAssigneeMessage,{values:{additionalAssigneeCount:hasMoreAssigneesThanPageSize?maxAdditionalAssignees:hiddenAssigneeCount}})))),isOpen&&react.createElement("div",{className:"bcs-AssigneeList-toggleBtn"},react.createElement(plain_button.a,{"data-resin-target":"showlessbtn","data-testid":"show-less-assignees",onClick:onCollapse,className:"lnk"},react.createElement(components_message.a,task_new_messages.taskShowLessAssignees))))}AssigneeList_AssigneeList.displayName="AssigneeList";var task_new_AssigneeList=AssigneeList_AssigneeList,Modal=__webpack_require__(571),common_messages=(__webpack_require__(372),__webpack_require__(1065),__webpack_require__(49)),task_form_messages=Object(dist.defineMessages)({taskCreateErrorTitle:{id:"be.contentSidebar.activityFeed.taskForm.taskCreateErrorTitle",defaultMessage:"Error"},taskEditWarningTitle:{id:"be.contentSidebar.activityFeed.taskForm.taskEditWarningTitle",defaultMessage:"Task Updated with Errors"},taskGroupExceedsLimitWarningTitle:{id:"be.contentSidebar.activityFeed.taskForm.taskGroupExceedsWarningTitle",defaultMessage:"Exceeded max assignees per group"},taskUpdateErrorMessage:{id:"be.contentSidebar.activityFeed.taskForm.taskUpdateErrorMessage",defaultMessage:"An error occurred while modifying this task. Please try again."},taskApprovalAssigneeRemovalWarningMessage:{id:"be.contentSidebar.activityFeed.taskForm.taskApprovalAssigneeRemovalWarningMessage",defaultMessage:"Unable to remove assignee(s) because the task is now approved."},taskGeneralAssigneeRemovalWarningMessage:{id:"be.contentSidebar.activityFeed.taskForm.taskGeneralAssigneeRemovalWarningMessage",defaultMessage:"Unable to remove assignee(s) because the task is now completed."},tasksAddTaskFormSelectAssigneesLabel:{id:"be.contentSidebar.activityFeed.taskForm.tasksAddTaskFormSelectAssigneesLabel",defaultMessage:"Select Assignees"},tasksAddTaskFormMessageLabel:{id:"be.contentSidebar.activityFeed.taskForm.tasksAddTaskFormMessageLabel",defaultMessage:"Message"},tasksAddTaskFormDueDateLabel:{id:"be.contentSidebar.activityFeed.taskForm.tasksAddTaskFormDueDateLabel",defaultMessage:"Due Date"},tasksAddTaskFormSubmitLabel:{id:"be.contentSidebar.activityFeed.taskForm.tasksAddTaskFormSubmitLabel",defaultMessage:"Create"},tasksEditTaskFormSubmitLabel:{id:"be.contentSidebar.activityFeed.taskForm.tasksEditTaskFormSubmitLabel",defaultMessage:"Update"},tasksAddTaskFormCancelLabel:{id:"be.contentSidebar.activityFeed.taskForm.tasksAddTaskFormCancelLabel",defaultMessage:"Cancel"},taskAnyCheckboxLabel:{id:"be.contentSidebar.activityFeed.taskForm.taskAnyCheckboxLabel",defaultMessage:"Only one assignee is required to complete this task"},taskAnyInfoTooltip:{id:"be.contentSidebar.activityFeed.taskForm.taskAnyInfoTooltip",defaultMessage:"By default, all assignees are required to take action before a task is complete. Selecting this option will require only one assignee to complete this task."},taskAnyInfoGroupTooltip:{id:"be.contentSidebar.activityFeed.taskForm.taskAnyInfoGroupTooltip",defaultMessage:"Selecting this option will require only one assignee to complete this task. This will include assignees across all groups."},taskCreateGroupLabel:{id:"be.contentSidebar.activityFeed.taskForm.taskCreateGroupLabel",defaultMessage:"Group"}}),ContactDatalistItem=__webpack_require__(1433),text_area=__webpack_require__(568),DatePicker=__webpack_require__(275),components_checkbox=__webpack_require__(406),PillSelectorDropdown=__webpack_require__(308),api_messages=__webpack_require__(278),InlineNotice=__webpack_require__(1435);function TaskError_extends(){return(TaskError_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}var task_form_TaskError=function(_ref){var editMode=_ref.editMode,error=_ref.error,taskType=_ref.taskType,isEditMode=editMode===constants.ff,isForbiddenErrorOnEdit=403===get_default()(error,"status")&&isEditMode,taskGroupExceedsError=get_default()(error,"code")===constants.Lb,errorTitle=isForbiddenErrorOnEdit?task_form_messages.taskEditWarningTitle:task_form_messages.taskCreateErrorTitle,errorMessage=isEditMode?task_form_messages.taskUpdateErrorMessage:api_messages.a.taskCreateErrorMessage;if(!error)return null;if(isForbiddenErrorOnEdit)switch(taskType){case"GENERAL":errorMessage=task_form_messages.taskGeneralAssigneeRemovalWarningMessage;break;case"APPROVAL":errorMessage=task_form_messages.taskApprovalAssigneeRemovalWarningMessage;break;default:return null}return taskGroupExceedsError?react.createElement(InlineNotice.a,{type:"warning",title:react.createElement(components_message.a,task_form_messages.taskGroupExceedsLimitWarningTitle)},react.createElement(components_message.a,TaskError_extends({},api_messages.a.taskGroupExceedsLimitWarningMessage,{values:{max:constants.gf}}))):react.createElement(InlineNotice.a,{type:"error",title:react.createElement(components_message.a,errorTitle)},react.createElement(components_message.a,errorMessage))};__webpack_require__(4328);function TaskForm_typeof(obj){return(TaskForm_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function TaskForm_extends(){return(TaskForm_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function TaskForm_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function TaskForm_objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?TaskForm_ownKeys(Object(source),!0).forEach((function(key){TaskForm_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):TaskForm_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function TaskForm_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function TaskForm_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function TaskForm_possibleConstructorReturn(self,call){return!call||"object"!==TaskForm_typeof(call)&&"function"!=typeof call?TaskForm_assertThisInitialized(self):call}function TaskForm_getPrototypeOf(o){return(TaskForm_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function TaskForm_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function TaskForm_setPrototypeOf(o,p){return(TaskForm_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function TaskForm_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function convertAssigneesToSelectorItems(approvers){return approvers.map((function(_ref){var target=_ref.target;return{id:target.id,name:target.name,item:target,value:target.id,text:target.name}}))}var TaskForm_TaskForm=function(_React$Component){function TaskForm(){var _getPrototypeOf2,_this;TaskForm_classCallCheck(this,TaskForm);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return TaskForm_defineProperty(TaskForm_assertThisInitialized(_this=TaskForm_possibleConstructorReturn(this,(_getPrototypeOf2=TaskForm_getPrototypeOf(TaskForm)).call.apply(_getPrototypeOf2,[this].concat(args)))),"state",_this.getInitialFormState()),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"validateForm",(function(only){_this.setState((function(state){var intl=_this.props.intl,approvers=state.approvers,message=state.message,approverTextInput=state.approverTextInput,assigneeFieldMissingError={code:"required",message:intl.formatMessage(common_messages.a.requiredFieldError)},assigneeFieldInvalidError={code:"invalid",message:intl.formatMessage(common_messages.a.invalidUserError)},messageFieldError={code:"required",message:intl.formatMessage(common_messages.a.requiredFieldError)},formValidityState={taskAssignees:(approverTextInput.length?assigneeFieldInvalidError:null)||(approvers.length?null:assigneeFieldMissingError),taskName:message?null:messageFieldError,taskDueDate:null};return{isValid:Object.values(formValidityState).every((function(val){return null==val})),formValidityState:only?TaskForm_objectSpread({},state.formValidityState,TaskForm_defineProperty({},only,formValidityState[only])):formValidityState}}))})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"getErrorByFieldname",(function(fieldName){var formValidityState=_this.state.formValidityState;return formValidityState[fieldName]?formValidityState[fieldName].message:null})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"clearForm",(function(){return _this.setState(_this.getInitialFormState())})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"handleInvalidSubmit",(function(){_this.validateForm()})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"handleSubmitSuccess",(function(){var onSubmitSuccess=_this.props.onSubmitSuccess;onSubmitSuccess&&onSubmitSuccess(),_this.clearForm(),_this.setState({isLoading:!1})})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"handleSubmitError",(function(e){(0,_this.props.onSubmitError)(e),_this.setState({isLoading:!1})})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"addResinInfo",(function(){var _this$props=_this.props,id=_this$props.id,taskType=_this$props.taskType,editMode=_this$props.editMode,dueDate=_this.state.dueDate,addedAssignees=_this.getAddedAssignees(),removedAssignees=_this.getRemovedAssignees();return{"data-resin-taskid":id,"data-resin-tasktype":taskType,"data-resin-isediting":editMode===constants.ff,"data-resin-numassigneesadded":addedAssignees.filter((function(assignee){return"user"===assignee.target.type})).length,"data-resin-numgroupssadded":addedAssignees.filter((function(assignee){return"group"===assignee.target.type})).length,"data-resin-numassigneesremoved":removedAssignees.length,"data-resin-assigneesadded":addedAssignees.map((function(assignee){return assignee.target.id})),"data-resin-assigneesremoved":removedAssignees.map((function(assignee){return assignee.target.id})),"data-resin-duedate":dueDate&&dueDate.getTime()}})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"getAddedAssignees",(function(){var approvers=_this.props.approvers,currentApprovers=_this.state.approvers,approverIds=approvers.map((function(approver){return approver.id}));return currentApprovers.filter((function(currentApprover){return-1===approverIds.indexOf(currentApprover.id)}))})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"getRemovedAssignees",(function(){var approvers=_this.props.approvers,currentApproverIds=_this.state.approvers.map((function(currentApprover){return currentApprover.id}));return approvers.filter((function(approver){return-1===currentApproverIds.indexOf(approver.id)}))})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"handleValidSubmit",(function(){var _this$props2=_this.props,id=_this$props2.id,createTask=_this$props2.createTask,editTask=_this$props2.editTask,editMode=_this$props2.editMode,taskType=_this$props2.taskType,_this$state=_this.state,message=_this$state.message,currentApprovers=_this$state.approvers,dueDate=_this$state.dueDate,completionRule=_this$state.completionRule,isValid=_this$state.isValid,dueDateString=dueDate&&dueDate.toISOString();isValid&&(_this.setState({isLoading:!0}),editMode===constants.ff&&editTask?editTask({id:id,completion_rule:completionRule,description:message,due_at:dueDateString,addedAssignees:convertAssigneesToSelectorItems(_this.getAddedAssignees()),removedAssignees:_this.getRemovedAssignees()},_this.handleSubmitSuccess,_this.handleSubmitError):createTask(message,convertAssigneesToSelectorItems(currentApprovers),taskType,dueDateString,completionRule,_this.handleSubmitSuccess,_this.handleSubmitError))})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"handleDueDateChange",(function(date){var dateValue=null;date&&(dateValue=new Date(date)).setHours(23,59,59,999),_this.setState({dueDate:dateValue}),_this.validateForm("taskDueDate")})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"handleCompletionRuleChange",(function(event){_this.setState({completionRule:event.target.checked?constants.df:constants.cf})})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"handleApproverSelectorInput",(function(value){var _this$props$getApprov=_this.props.getApproverWithQuery,getApproverWithQuery=void 0===_this$props$getApprov?noop_default.a:_this$props$getApprov;_this.setState({approverTextInput:value}),getApproverWithQuery(value)})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"handleApproverSelectorSelect",(function(pills){_this.setState({approvers:_this.state.approvers.concat(pills.map((function(pill){return{id:"",target:pill.item,role:"ASSIGNEE",type:"task_collaborator",status:"NOT_STARTED",permissions:{can_delete:!1,can_update:!1}}}))),approverTextInput:""}),_this.validateForm("taskAssignees")})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"handleApproverSelectorRemove",(function(option,index){var approvers=_toConsumableArray(_this.state.approvers);approvers.splice(index,1),_this.setState({approvers:approvers}),_this.validateForm("taskAssignees")})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"handleChangeMessage",(function(e){e.persist(),_this.setState({message:e.currentTarget.value}),_this.validateForm("taskName")})),TaskForm_defineProperty(TaskForm_assertThisInitialized(_this),"handleCancelClick",(function(){_this.props.onCancel()})),_this}return function TaskForm_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&TaskForm_setPrototypeOf(subClass,superClass)}(TaskForm,_React$Component),function TaskForm_createClass(Constructor,protoProps,staticProps){return protoProps&&TaskForm_defineProperties(Constructor.prototype,protoProps),staticProps&&TaskForm_defineProperties(Constructor,staticProps),Constructor}(TaskForm,[{key:"getInitialFormState",value:function getInitialFormState(){var _this$props3=this.props,dueDate=_this$props3.dueDate,id=_this$props3.id,message=_this$props3.message,approvers=_this$props3.approvers;return{id:id,completionRule:_this$props3.completionRule||constants.cf,approvers:approvers,approverTextInput:"",dueDate:dueDate?new Date(dueDate):null,formValidityState:{},message:message,isLoading:!1,isValid:null}}},{key:"render",value:function render(){var _ref5,_this2=this,_this$props4=this.props,approverSelectorContacts=_this$props4.approverSelectorContacts,className=_this$props4.className,error=_this$props4.error,isDisabled=_this$props4.isDisabled,intl=_this$props4.intl,editMode=_this$props4.editMode,taskType=_this$props4.taskType,_this$state2=this.state,dueDate=_this$state2.dueDate,approvers=_this$state2.approvers,message=_this$state2.message,formValidityState=_this$state2.formValidityState,isLoading=_this$state2.isLoading,completionRule=_this$state2.completionRule,inputContainerClassNames=classnames_default()("bcs-task-input-container","bcs-task-input-is-open",className),isCreateEditMode=editMode===constants.ef,selectedApprovers=convertAssigneesToSelectorItems(approvers),approverOptions=approverSelectorContacts.filter((function(_ref2){var id=_ref2.id;return!selectedApprovers.find((function(_ref3){return _ref3.value===id}))})),pillSelectorOverlayClasses=classnames_default()({scrollable:4<approverOptions.length}),submitButtonMessage=isCreateEditMode?task_form_messages.tasksAddTaskFormSubmitLabel:task_form_messages.tasksEditTaskFormSubmitLabel,shouldShowCompletionRule=0<approvers.length,isCompletionRuleCheckboxDisabled=0>=approvers.filter((function(approver){return"group"===approver.target.type})).length&&1>=approvers.filter((function(approver){return"user"===approver.target.type})).length,isCompletionRuleCheckboxChecked=completionRule===constants.df,isForbiddenErrorOnEdit=isLoading||403===get_default()(error,"status")&&!isCreateEditMode;return react.createElement("div",{className:inputContainerClassNames,"data-resin-component":"taskform"},react.createElement("div",{className:"bcs-task-input-form-container"},react.createElement(task_form_TaskError,{editMode:editMode,error:error,taskType:taskType}),react.createElement(Form.a,{formValidityState:formValidityState,onInvalidSubmit:this.handleInvalidSubmit,onValidSubmit:this.handleValidSubmit},react.createElement(PillSelectorDropdown.a,{className:pillSelectorOverlayClasses,error:this.getErrorByFieldname("taskAssignees"),disabled:isForbiddenErrorOnEdit,inputProps:{"data-testid":"task-form-assignee-input"},isRequired:!0,label:react.createElement(components_message.a,task_form_messages.tasksAddTaskFormSelectAssigneesLabel),name:"taskAssignees",onBlur:function onBlur(){return _this2.validateForm("taskAssignees")},onInput:this.handleApproverSelectorInput,onRemove:this.handleApproverSelectorRemove,onSelect:this.handleApproverSelectorSelect,placeholder:intl.formatMessage(comment_form_messages.approvalAddAssignee),selectedOptions:selectedApprovers,selectorOptions:approverOptions,shouldSetActiveItemOnOpen:!0,shouldClearUnmatchedInput:!0,validateForError:function validateForError(){return _this2.validateForm("taskAssignees")}},approverOptions.map((function(_ref4){var id=_ref4.id,name=_ref4.name,_ref4$item=_ref4.item,item=void 0===_ref4$item?{}:_ref4$item;return react.createElement(ContactDatalistItem.a,{key:id,"data-testid":"task-assignee-option",name:name,subtitle:"group"===item.type?react.createElement(components_message.a,task_form_messages.taskCreateGroupLabel):item.email})}))),shouldShowCompletionRule&&react.createElement(react.Fragment,null,react.createElement(feature_checking.FeatureFlag,{feature:"activityFeed.tasks.assignToGroup"},react.createElement(components_checkbox.a,{"data-testid":"task-form-completion-rule-checkbox-group",isChecked:isCompletionRuleCheckboxChecked,isDisabled:isCompletionRuleCheckboxDisabled||isForbiddenErrorOnEdit,label:react.createElement(components_message.a,task_form_messages.taskAnyCheckboxLabel),tooltip:intl.formatMessage(task_form_messages.taskAnyInfoGroupTooltip),name:"completionRule",onChange:this.handleCompletionRuleChange})),react.createElement(feature_checking.FeatureFlag,{not:!0,feature:"activityFeed.tasks.assignToGroup"},react.createElement(components_checkbox.a,{"data-testid":"task-form-completion-rule-checkbox",isChecked:isCompletionRuleCheckboxChecked,isDisabled:isCompletionRuleCheckboxDisabled||isForbiddenErrorOnEdit,label:react.createElement(components_message.a,task_form_messages.taskAnyCheckboxLabel),tooltip:intl.formatMessage(task_form_messages.taskAnyInfoTooltip),name:"completionRule",onChange:this.handleCompletionRuleChange}))),react.createElement(text_area.a,{className:"bcs-task-name-input","data-testid":"task-form-name-input",disabled:isDisabled||isForbiddenErrorOnEdit,error:this.getErrorByFieldname("taskName"),isRequired:!0,label:react.createElement(components_message.a,task_form_messages.tasksAddTaskFormMessageLabel),name:"taskName",onBlur:function onBlur(){return _this2.validateForm("taskName")},onChange:this.handleChangeMessage,placeholder:intl.formatMessage(comment_form_messages.commentWrite),value:message}),react.createElement(DatePicker.a,{className:"bcs-task-add-due-date-input",error:this.getErrorByFieldname("taskDueDate"),inputProps:(_ref5={},TaskForm_defineProperty(_ref5,interactionTargets.c,interactionTargets.a.TASK_DATE_PICKER),TaskForm_defineProperty(_ref5,"data-testid","task-form-date-input"),_ref5),isDisabled:isForbiddenErrorOnEdit,isRequired:!1,label:react.createElement(components_message.a,task_form_messages.tasksAddTaskFormDueDateLabel),minDate:new Date,name:"taskDueDate",onChange:this.handleDueDateChange,placeholder:intl.formatMessage(comment_form_messages.approvalSelectDate),value:dueDate||void 0}),react.createElement("div",{className:"bcs-task-input-controls"},react.createElement(Button.b,TaskForm_extends({className:"bcs-task-input-cancel-btn","data-resin-target":interactionTargets.a.APPROVAL_FORM_CANCEL,"data-testid":"task-form-cancel-button",onClick:this.handleCancelClick,isDisabled:isLoading,type:"button"},this.addResinInfo()),react.createElement(components_message.a,task_form_messages.tasksAddTaskFormCancelLabel)),react.createElement(PrimaryButton.a,TaskForm_extends({className:"bcs-task-input-submit-btn","data-resin-target":interactionTargets.a.APPROVAL_FORM_POST,"data-testid":"task-form-submit-button",isDisabled:isForbiddenErrorOnEdit,isLoading:isLoading},this.addResinInfo()),react.createElement(components_message.a,submitButtonMessage))))))}}]),TaskForm}(react.Component);TaskForm_TaskForm.displayName="TaskForm",TaskForm_defineProperty(TaskForm_TaskForm,"defaultProps",{approvers:[],approverSelectorContacts:[],editMode:constants.ef,id:"",message:""});var activity_feed_task_form_TaskForm=Object(injectIntl.c)(TaskForm_TaskForm),content_sidebar_messages=Object(dist.defineMessages)({tasksAddTask:{id:"be.contentSidebar.addTask",defaultMessage:"Add Task"},taskAddTaskGeneral:{id:"be.contentSidebar.addTask.general",defaultMessage:"General Task"},taskAddTaskGeneralDescription:{id:"be.contentSidebar.addTask.general.description",defaultMessage:"Assignees will be responsible for marking tasks as complete"},taskAddTaskApproval:{id:"be.contentSidebar.addTask.approval",defaultMessage:"Approval Task"},taskAddTaskApprovalDescription:{id:"be.contentSidebar.addTask.approval.description",defaultMessage:"Assignees will be responsible for approving or rejecting tasks"},tasksCreateGeneralTaskFormTitle:{id:"be.contentSidebar.addTask.general.title",defaultMessage:"Create General Task"},tasksCreateApprovalTaskFormTitle:{id:"be.contentSidebar.addTask.approval.title",defaultMessage:"Create Approval Task"},tasksEditApprovalTaskFormTitle:{id:"be.contentSidebar.editTask.approval.title",defaultMessage:"Modify Approval Task"},tasksEditGeneralTaskFormTitle:{id:"be.contentSidebar.editTask.general.title",defaultMessage:"Modify General Task"}});function TaskModal_extends(){return(TaskModal_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function getMessageForModalTitle(taskType,mode){switch(taskType){case constants.nf:return mode===constants.ef?content_sidebar_messages.tasksCreateGeneralTaskFormTitle:content_sidebar_messages.tasksEditGeneralTaskFormTitle;case constants.mf:default:return mode===constants.ef?content_sidebar_messages.tasksCreateApprovalTaskFormTitle:content_sidebar_messages.tasksEditApprovalTaskFormTitle}}var TaskModal=function(props){var _props$editMode=props.editMode,editMode=void 0===_props$editMode?constants.ef:_props$editMode,error=props.error,onSubmitError=props.onSubmitError,onSubmitSuccess=props.onSubmitSuccess,onModalClose=props.onModalClose,taskType=props.taskType,isTaskFormOpen=props.isTaskFormOpen,taskFormProps=props.taskFormProps;return react.createElement(Modal.a,{className:"be-modal task-modal","data-testid":"create-task-modal",focusElementSelector:".task-modal textarea, .task-modal input",isOpen:isTaskFormOpen,onRequestClose:onModalClose,title:react.createElement(components_message.a,getMessageForModalTitle(taskType,editMode))},react.createElement("div",{className:"be"},react.createElement(activity_feed_task_form_TaskForm,TaskModal_extends({editMode:editMode,error:error,onCancel:onModalClose,onSubmitError:onSubmitError,onSubmitSuccess:onSubmitSuccess,taskType:taskType},taskFormProps))))};TaskModal.displayName="TaskModal";var content_sidebar_TaskModal=TaskModal,MoveCopy16=__webpack_require__(1407),TaskMultiFileIcon_ref2=react.createElement(label_pill.a.Pill,{"data-testid":"multifile-badge"},react.createElement(label_pill.a.Icon,{Component:MoveCopy16.a})),task_new_TaskMultiFileIcon=function(_ref){return _ref.isMultiFile&&react.createElement(tooltip.c,{position:"top-center",text:react.createElement(components_message.a,task_new_messages.taskMultipleFilesAffordanceTooltip)},TaskMultiFileIcon_ref2)};__webpack_require__(4329);function Task_typeof(obj){return(Task_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function Task_extends(){return(Task_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function Task_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function Task_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function Task_possibleConstructorReturn(self,call){return!call||"object"!==Task_typeof(call)&&"function"!=typeof call?Task_assertThisInitialized(self):call}function Task_getPrototypeOf(o){return(Task_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function Task_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function Task_setPrototypeOf(o,p){return(Task_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function Task_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var Task_ref2=react.createElement(IconPencil.a,{color:variables.bdlGray80}),Task_ref3=react.createElement(IconTrash.a,{color:variables.bdlGray80}),Task_Task=function(_React$Component){function Task(){var _getPrototypeOf2,_this;Task_classCallCheck(this,Task);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return Task_defineProperty(Task_assertThisInitialized(_this=Task_possibleConstructorReturn(this,(_getPrototypeOf2=Task_getPrototypeOf(Task)).call.apply(_getPrototypeOf2,[this].concat(args)))),"state",{loadCollabError:void 0,assignedToFull:_this.props.assigned_to,modalError:void 0,isEditing:!1,isLoading:!1,isAssigneeListOpen:!1,isConfirmingDelete:!1}),Task_defineProperty(Task_assertThisInitialized(_this),"handleAssigneeListExpand",(function(){_this.getAllTaskCollaborators((function(){_this.setState({isAssigneeListOpen:!0})}))})),Task_defineProperty(Task_assertThisInitialized(_this),"handleAssigneeListCollapse",(function(){_this.setState({isAssigneeListOpen:!1})})),Task_defineProperty(Task_assertThisInitialized(_this),"handleEditClick",(function(){_this.getAllTaskCollaborators((function(){_this.setState({isEditing:!0})}))})),Task_defineProperty(Task_assertThisInitialized(_this),"handleDeleteClick",(function(){_this.setState({isConfirmingDelete:!0})})),Task_defineProperty(Task_assertThisInitialized(_this),"handleDeleteConfirm",(function(){var _this$props=_this.props,id=_this$props.id,onDelete=_this$props.onDelete,permissions=_this$props.permissions;onDelete&&onDelete({id:id,permissions:permissions})})),Task_defineProperty(Task_assertThisInitialized(_this),"handleDeleteCancel",(function(){_this.setState({isConfirmingDelete:!1})})),Task_defineProperty(Task_assertThisInitialized(_this),"handleEditModalClose",(function(){var onModalClose=_this.props.onModalClose;_this.setState({isEditing:!1,modalError:void 0}),onModalClose&&onModalClose()})),Task_defineProperty(Task_assertThisInitialized(_this),"handleEditSubmitError",(function(error){_this.setState({modalError:error})})),Task_defineProperty(Task_assertThisInitialized(_this),"getAllTaskCollaborators",(function(onSuccess){var _this$props2=_this.props,id=_this$props2.id,api=_this$props2.api,task_links=_this$props2.task_links,assigned_to=_this$props2.assigned_to,errorOccured=messages.a.errorOccured,taskCollaboratorLoadErrorMessage=task_new_messages.taskCollaboratorLoadErrorMessage;if(!assigned_to.next_marker)return _this.setState({assignedToFull:assigned_to}),void onSuccess();var fileId=get_default()(task_links,"entries[0].target.id");fileId&&(_this.setState({isLoading:!0}),api.getTaskCollaboratorsAPI(!1).getTaskCollaborators({task:{id:id},file:{id:fileId},errorCallback:function errorCallback(){_this.setState({isLoading:!1,loadCollabError:{message:taskCollaboratorLoadErrorMessage,title:errorOccured}})},successCallback:function successCallback(assignedToFull){_this.setState({assignedToFull:assignedToFull,isLoading:!1}),onSuccess()}}))})),Task_defineProperty(Task_assertThisInitialized(_this),"handleTaskAction",(function(taskId,assignmentId,taskStatus){var onAssignmentUpdate=_this.props.onAssignmentUpdate;_this.setState({isAssigneeListOpen:!1}),onAssignmentUpdate(taskId,assignmentId,taskStatus)})),_this}return function Task_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&Task_setPrototypeOf(subClass,superClass)}(Task,_React$Component),function Task_createClass(Constructor,protoProps,staticProps){return protoProps&&Task_defineProperties(Constructor.prototype,protoProps),staticProps&&Task_defineProperties(Constructor,staticProps),Constructor}(Task,[{key:"render",value:function render(){var shouldShowActions,_this2=this,_this$props3=this.props,approverSelectorContacts=_this$props3.approverSelectorContacts,assigned_to=_this$props3.assigned_to,completion_rule=_this$props3.completion_rule,created_at=_this$props3.created_at,created_by=_this$props3.created_by,currentUser=_this$props3.currentUser,due_at=_this$props3.due_at,error=_this$props3.error,features=_this$props3.features,getApproverWithQuery=_this$props3.getApproverWithQuery,getAvatarUrl=_this$props3.getAvatarUrl,getUserProfileUrl=_this$props3.getUserProfileUrl,id=_this$props3.id,isPending=_this$props3.isPending,description=_this$props3.description,onEdit=_this$props3.onEdit,onView=_this$props3.onView,permissions=_this$props3.permissions,status=_this$props3.status,task_links=_this$props3.task_links,task_type=_this$props3.task_type,translatedTaggedMessage=_this$props3.translatedTaggedMessage,translations=_this$props3.translations,_this$state=this.state,assignedToFull=_this$state.assignedToFull,modalError=_this$state.modalError,isEditing=_this$state.isEditing,isLoading=_this$state.isLoading,loadCollabError=_this$state.loadCollabError,isAssigneeListOpen=_this$state.isAssigneeListOpen,isConfirmingDelete=_this$state.isConfirmingDelete,inlineError=loadCollabError||error,assignments=assigned_to&&assigned_to.entries,currentUserAssignment=assignments&&assignments.find((function(_ref){return _ref.target.id===currentUser.id})),createdByUser=created_by.target||constants.te,createdAtTimestamp=new Date(created_at).getTime(),isCreator=created_by.target.id===currentUser.id,isMultiFile=1<task_links.entries.length;shouldShowActions=(status===constants.kf||status===constants.jf)&&(!(!isMultiFile||!isCreator)||currentUserAssignment&&currentUserAssignment.permissions&&currentUserAssignment.permissions.can_update&&currentUserAssignment.status===constants.kf);var TaskTypeIcon=task_type===constants.mf?two_toned_IconTaskApproval:two_toned_IconTaskGeneral,isMenuVisible=(permissions.can_delete||permissions.can_update)&&!isPending;return react.createElement("div",{className:"bcs-Task","data-resin-feature":"tasks","data-resin-taskid":id,"data-resin-tasktype":task_type,"data-resin-numassignees":assignments&&assignments.length},inlineError?react.createElement(activity_error_ActivityError,inlineError):null,react.createElement(Media.a,{className:classnames_default()("bcs-Task-media",{"bcs-is-pending":isPending||isLoading}),"data-testid":"task-card"},react.createElement(Media.a.Figure,{className:"bcs-Task-avatar"},react.createElement(activity_feed_Avatar,{getAvatarUrl:getAvatarUrl,user:createdByUser}),react.createElement(TaskTypeIcon,{width:20,height:20,className:"bcs-Task-avatarBadge"})),react.createElement(Media.a.Body,null,isMenuVisible&&react.createElement(react_tether_default.a,{attachment:"top right",className:"bcs-Task-deleteConfirmationModal",constraints:[{to:"scrollParent",attachment:"together"}],targetAttachment:"bottom right"},react.createElement(Media.a.Menu,{isDisabled:isConfirmingDelete,"data-testid":"task-actions-menu",menuProps:{"data-resin-component":interactionTargets.a.TASK_OPTIONS}},permissions.can_update&&react.createElement(menu.b,{"data-resin-target":interactionTargets.a.TASK_OPTIONS_EDIT,"data-testid":"edit-task",onClick:this.handleEditClick},Task_ref2,react.createElement(components_message.a,task_new_messages.taskEditMenuItem)),permissions.can_delete&&react.createElement(menu.b,{"data-resin-target":interactionTargets.a.TASK_OPTIONS_DELETE,"data-testid":"delete-task",onClick:this.handleDeleteClick},Task_ref3,react.createElement(components_message.a,task_new_messages.taskDeleteMenuItem))),isConfirmingDelete&&react.createElement(common_delete_confirmation_DeleteConfirmation,{"data-resin-component":interactionTargets.a.TASK_OPTIONS,isOpen:isConfirmingDelete,message:task_new_messages.taskDeletePrompt,onDeleteCancel:this.handleDeleteCancel,onDeleteConfirm:this.handleDeleteConfirm})),react.createElement("div",{className:"bcs-Task-headline"},react.createElement(common_user_link_UserLink,Task_extends({},createdByUser,{"data-resin-target":interactionTargets.a.PROFILE,getUserProfileUrl:getUserProfileUrl}))),react.createElement("div",null,react.createElement(activity_timestamp_ActivityTimestamp,{date:createdAtTimestamp})),react.createElement("div",{className:"bcs-Task-status"},react.createElement(TaskStatus,{status:status}),react.createElement(task_new_TaskMultiFileIcon,{isMultiFile:isMultiFile}),react.createElement(task_new_TaskCompletionRuleIcon,{completionRule:completion_rule})),react.createElement("div",{className:"bcs-Task-dueDate"},!!due_at&&react.createElement(task_new_TaskDueDate,{dueDate:due_at,status:status})),react.createElement("div",null,react.createElement(common_activity_message_ActivityMessage,Task_extends({id:id,tagged_message:description,translatedTaggedMessage:translatedTaggedMessage},translations,{translationFailed:!!error||null,getUserProfileUrl:getUserProfileUrl}))),react.createElement("div",{className:"bcs-Task-assigneeListContainer"},react.createElement(task_new_AssigneeList,{isOpen:isAssigneeListOpen,onCollapse:this.handleAssigneeListCollapse,onExpand:this.handleAssigneeListExpand,getAvatarUrl:getAvatarUrl,initialAssigneeCount:3,users:isAssigneeListOpen?assignedToFull:assigned_to})),shouldShowActions&&react.createElement("div",{className:"bcs-Task-actionsContainer","data-testid":"action-container"},react.createElement(task_new_TaskActions,{isMultiFile:isMultiFile,taskType:task_type,onTaskApproval:isPending?noop_default.a:function(){return _this2.handleTaskAction(id,currentUserAssignment.id,constants.hf)},onTaskReject:isPending?noop_default.a:function(){return _this2.handleTaskAction(id,currentUserAssignment.id,constants.lf)},onTaskComplete:isPending?noop_default.a:function(){return _this2.handleTaskAction(id,currentUserAssignment.id,constants.if)},onTaskView:onView&&function(){return onView(id,isCreator)}})))),react.createElement(content_sidebar_TaskModal,{editMode:constants.ff,error:modalError,feedbackUrl:Object(feature_checking.getFeatureConfig)(features,"activityFeed.tasks").feedbackUrl||"",onSubmitError:this.handleEditSubmitError,onSubmitSuccess:this.handleEditModalClose,onModalClose:this.handleEditModalClose,isTaskFormOpen:isEditing,taskFormProps:{id:id,approvers:assignedToFull.entries,approverSelectorContacts:approverSelectorContacts,completionRule:completion_rule,getApproverWithQuery:getApproverWithQuery,getAvatarUrl:getAvatarUrl,createTask:function createTask(){},editTask:onEdit,dueDate:due_at,message:description},taskType:task_type}))}}]),Task}(react.Component);Task_Task.displayName="Task",Task_defineProperty(Task_Task,"defaultProps",{completion_rule:constants.cf});var activity_feed_task_new_Task=flow_default()([feature_checking.withFeatureConsumer,api_context.b])(Task_Task),IconInfoInverted_IconInfoInverted=function IconInfoInverted(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$color=_ref.color,color=void 0===_ref$color?"#000000":_ref$color,_ref$height=_ref.height,height=void 0===_ref$height?18:_ref$height,title=_ref.title,_ref$width=_ref.width,width=void 0===_ref$width?18:_ref$width;return react.createElement(accessible_svg.a,{className:"icon-info-inverted ".concat(className),height:height,title:title,viewBox:"0 0 18 18",width:width},react.createElement("path",{className:"fill-color",d:"M8.1 13.5h1.8V8.1H8.1v5.4zM9 0C4.05 0 0 4.05 0 9s4.05 9 9 9 9-4.05 9-9-4.05-9-9-9zm0 16.2c-3.96 0-7.2-3.24-7.2-7.2S5.04 1.8 9 1.8s7.2 3.24 7.2 7.2-3.24 7.2-7.2 7.2zm-.9-9.9h1.8V4.5H8.1v1.8z",fill:color,fillRule:"evenodd"}))},general_IconInfoInverted=IconInfoInverted_IconInfoInverted;try{IconInfoInverted_IconInfoInverted.displayName="IconInfoInverted",IconInfoInverted_IconInfoInverted.__docgenInfo={description:"",displayName:"IconInfoInverted",props:{color:{defaultValue:{value:"#000000"},description:"A string describing the color for the icon",name:"color",required:!1,type:{name:"string"}},fillColor:{defaultValue:null,description:"A string describing the fill color for the icon",name:"fillColor",required:!1,type:{name:"string"}},opacity:{defaultValue:null,description:"A number specifying the opacity of the icon",name:"opacity",required:!1,type:{name:"number"}},strokeColor:{defaultValue:null,description:"A string describing the color of the icon's stroke",name:"strokeColor",required:!1,type:{name:"string"}},strokeWidth:{defaultValue:null,description:"A number specifying the width of the icon's stroke",name:"strokeWidth",required:!1,type:{name:"number"}},className:{defaultValue:{value:""},description:"Class name for the icon",name:"className",required:!1,type:{name:"string"}},height:{defaultValue:{value:18},description:"A number specifying the height of the icon",name:"height",required:!1,type:{name:"number"}},title:{defaultValue:null,description:"A string describing the icon if it's not purely decorative for accessibility",name:"title",required:!1,type:{name:"string | ReactElement<string, string | ((props: any) => ReactElement<any, string | ... | (new (props: any) => Component<any, any, any>)>) | (new (props: any) => Component<any, any, any>)>"}},width:{defaultValue:{value:18},description:"A number specifying the width of the icon",name:"width",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/icons/general/IconInfoInverted.tsx#IconInfoInverted"]={docgenInfo:IconInfoInverted_IconInfoInverted.__docgenInfo,name:"IconInfoInverted",path:"src/icons/general/IconInfoInverted.tsx#IconInfoInverted"})}catch(__react_docgen_typescript_loader_error){}var version=__webpack_require__(4272);__webpack_require__(4278);function CollapsedVersion_extends(){return(CollapsedVersion_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function getMessageForAction(action,collaborators,version_start,version_end){if("upload"!==action)return null;var collaboratorIDs=Object.keys(collaborators),numberOfCollaborators=collaboratorIDs.length,versionRange=react.createElement("span",{className:"bcs-Version-range"},version_start," - ",version_end);if(1===numberOfCollaborators){var collaborator=collaborators[collaboratorIDs[0]];return react.createElement(components_message.a,CollapsedVersion_extends({},messages.a.versionUploadCollapsed,{values:{name:react.createElement("strong",null,collaborator.name),versions:versionRange}}))}return react.createElement(components_message.a,CollapsedVersion_extends({},messages.a.versionMultipleUsersUploaded,{values:{numberOfCollaborators:numberOfCollaborators,versions:versionRange}}))}getMessageForAction.displayName="getMessageForAction";var CollapsedVersion_ref=react.createElement(general_IconInfoInverted,{height:16,width:16}),CollapsedVersion=function(props){var action=version.a.getVersionAction(props),collaborators=props.collaborators,intl=props.intl,onInfo=props.onInfo,versions=props.versions,version_start=props.version_start,version_end=props.version_end;return react.createElement("div",{className:"bcs-Version"},react.createElement("span",{className:"bcs-Version-message"},getMessageForAction(action,collaborators,version_start,version_end)),onInfo?react.createElement("span",{className:"bcs-Version-actions"},react.createElement(plain_button.a,{"aria-label":intl.formatMessage(messages.a.getVersionInfo),className:"bcs-Version-info","data-resin-target":interactionTargets.a.VERSION_CARD,onClick:function onClick(){onInfo({versions:versions})},type:"button"},CollapsedVersion_ref)):null)};CollapsedVersion.displayName="CollapsedVersion";var _ACTION_MAP,version_CollapsedVersion=Object(injectIntl.c)(CollapsedVersion);function Version_extends(){return(Version_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function Version_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ACTION_MAP=(Version_defineProperty(_ACTION_MAP={},constants.Af,messages.a.versionDeleted),Version_defineProperty(_ACTION_MAP,constants.Bf,messages.a.versionPromoted),Version_defineProperty(_ACTION_MAP,constants.Cf,messages.a.versionRestored),Version_defineProperty(_ACTION_MAP,constants.Gf,messages.a.versionUploaded),_ACTION_MAP),Version_ref=react.createElement(general_IconInfoInverted,{height:16,width:16}),Version_Version=function(props){var action=version.a.getVersionAction(props),id=props.id,intl=props.intl,onInfo=props.onInfo,version_number=props.version_number,version_promoted=props.version_promoted,user=version.a.getVersionUser(props),name=user.name===constants.od?intl.formatMessage(messages.a.fileRequestDisplayName):user.name;return react.createElement("div",{className:"bcs-Version"},react.createElement("span",{className:"bcs-Version-message"},react.createElement(components_message.a,Version_extends({},ACTION_MAP[action],{values:{name:react.createElement("strong",null,name),version_number:version_number,version_promoted:version_promoted}}))),onInfo?react.createElement("span",{className:"bcs-Version-actions"},react.createElement(plain_button.a,{"aria-label":intl.formatMessage(messages.a.getVersionInfo),className:"bcs-Version-info","data-resin-target":interactionTargets.a.VERSION_CARD,onClick:function onClick(){onInfo({id:id,version_number:version_number})},type:"button"},Version_ref)):null)};Version_Version.displayName="Version";var version_Version=Object(injectIntl.c)(Version_Version),withErrorHandling=__webpack_require__(4274);function ActiveState_extends(){return(ActiveState_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}var ActiveState=function(_ref){var activeFeedEntryId=_ref.activeFeedEntryId,activeFeedEntryType=_ref.activeFeedEntryType,activeFeedItemRef=_ref.activeFeedItemRef,approverSelectorContacts=_ref.approverSelectorContacts,currentFileVersionId=_ref.currentFileVersionId,currentUser=_ref.currentUser,items=_ref.items,mentionSelectorContacts=_ref.mentionSelectorContacts,getMentionWithQuery=_ref.getMentionWithQuery,onAnnotationDelete=_ref.onAnnotationDelete,onAnnotationSelect=_ref.onAnnotationSelect,onAppActivityDelete=_ref.onAppActivityDelete,onCommentDelete=_ref.onCommentDelete,onCommentEdit=_ref.onCommentEdit,onTaskDelete=_ref.onTaskDelete,onTaskEdit=_ref.onTaskEdit,onTaskView=_ref.onTaskView,onTaskAssignmentUpdate=_ref.onTaskAssignmentUpdate,onTaskModalClose=_ref.onTaskModalClose,onVersionInfo=_ref.onVersionInfo,translations=_ref.translations,getApproverWithQuery=_ref.getApproverWithQuery,getAvatarUrl=_ref.getAvatarUrl,getUserProfileUrl=_ref.getUserProfileUrl,activeEntry=items.find((function(_ref2){var id=_ref2.id,type=_ref2.type;return id===activeFeedEntryId&&type===activeFeedEntryType}));return react.createElement("ul",{className:"bcs-activity-feed-active-state"},items.map((function(item){var isFocused=item===activeEntry,refValue=isFocused?activeFeedItemRef:void 0,itemFileVersionId=get_default()(item,"file_version.id");switch(item.type){case"comment":return react.createElement(activity_feed_ActivityItem,{key:item.type+item.id,className:"bcs-activity-feed-comment","data-testid":"comment",isFocused:isFocused,ref:refValue},react.createElement(activity_feed_comment_Comment,ActiveState_extends({},item,{currentUser:currentUser,getAvatarUrl:getAvatarUrl,getMentionWithQuery:getMentionWithQuery,getUserProfileUrl:getUserProfileUrl,mentionSelectorContacts:mentionSelectorContacts,onDelete:onCommentDelete,onEdit:onCommentEdit,permissions:{can_delete:get_default()(item.permissions,"can_delete",!1),can_edit:get_default()(item.permissions,"can_edit",!1)},translations:translations})));case"task":return react.createElement(activity_feed_ActivityItem,{key:item.type+item.id,className:"bcs-activity-feed-task-new","data-testid":"task",isFocused:isFocused,ref:refValue},react.createElement(activity_feed_task_new_Task,ActiveState_extends({},item,{approverSelectorContacts:approverSelectorContacts,currentUser:currentUser,getApproverWithQuery:getApproverWithQuery,getAvatarUrl:getAvatarUrl,getUserProfileUrl:getUserProfileUrl,onAssignmentUpdate:onTaskAssignmentUpdate,onDelete:onTaskDelete,onEdit:onTaskEdit,onView:onTaskView,onModalClose:onTaskModalClose,translations:translations})));case"file_version":return react.createElement(activity_feed_ActivityItem,{key:item.type+item.id,className:"bcs-version-item","data-testid":"version"},item.versions?react.createElement(version_CollapsedVersion,ActiveState_extends({},item,{onInfo:onVersionInfo})):react.createElement(version_Version,ActiveState_extends({},item,{onInfo:onVersionInfo})));case"app_activity":return react.createElement(activity_feed_ActivityItem,{key:item.type+item.id,className:"bcs-activity-feed-app-activity","data-testid":"app-activity"},react.createElement(activity_feed_app_activity_AppActivity,ActiveState_extends({currentUser:currentUser,onDelete:onAppActivityDelete},item)));case"annotation":return react.createElement(activity_feed_ActivityItem,{key:item.type+item.id,className:"bcs-activity-feed-annotation-activity","data-testid":"annotation-activity",isFocused:isFocused,ref:refValue},react.createElement(annotations_AnnotationActivity,{currentUser:currentUser,getAvatarUrl:getAvatarUrl,getUserProfileUrl:getUserProfileUrl,isCurrentVersion:currentFileVersionId===itemFileVersionId,item:item,mentionSelectorContacts:mentionSelectorContacts,onDelete:onAnnotationDelete,onSelect:onAnnotationSelect}));default:return null}})))};ActiveState.displayName="ActiveState";var activity_feed_ActiveState=Object(withErrorHandling.a)(ActiveState),ActivityFeedEmptyStateIllustration_ActivityFeedEmptyStateIllustration=function ActivityFeedEmptyStateIllustration(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$width=_ref.width,width=void 0===_ref$width?140:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?140:_ref$height;return react.createElement(accessible_svg.a,{className:"bcs-ActivityFeedEmptyStateIllustration ".concat(className),height:height,viewBox:"0 0 140 140",width:width},react.createElement("path",{fill:"#FFF",d:"M42 39h63c2.761 0 5 2.239 5 5v68H42c-2.761 0-5-2.239-5-5V44c0-2.761 2.239-5 5-5z"}),react.createElement("path",{fill:"#E5EFFA",d:"M13.871 122c2.138 0 3.87 1.79 3.87 4s-1.732 4-3.87 4S10 128.21 10 126s1.733-4 3.871-4zM95 27c5.523 0 10 4.477 10 10v2H42c-2.689 0-4.882 2.122-4.995 4.783L37 44v63h-2c-5.523 0-10-4.477-10-10V37c0-5.523 4.477-10 10-10h60zm6 65c.552 0 1 .448 1 1s-.448 1-1 1H47c-.552 0-1-.448-1-1s.448-1 1-1zm-4-10c.552 0 1 .448 1 1s-.448 1-1 1H47c-.552 0-1-.448-1-1s.448-1 1-1zm-3-10c.552 0 1 .448 1 1s-.448 1-1 1H47c-.552 0-1-.448-1-1s.448-1 1-1zm-5-10c.552 0 1 .448 1 1s-.448 1-1 1H47c-.552 0-1-.448-1-1s.448-1 1-1zm-4-10c.552 0 1 .448 1 1s-.448 1-1 1H47c-.552 0-1-.448-1-1s.448-1 1-1zm37.258-42c4.276 0 7.742 3.582 7.742 8s-3.466 8-7.742 8-7.742-3.582-7.742-8 3.466-8 7.742-8z"}),react.createElement("path",{fill:"#0061D5",d:"M111 106c.552 0 1 .448 1 1v5h5c.552 0 1 .448 1 1s-.448 1-1 1h-5v5c0 .552-.448 1-1 1s-1-.448-1-1v-5h-5c-.552 0-1-.448-1-1s.448-1 1-1h5v-5c0-.552.448-1 1-1zm-60 6c.552 0 1 .448 1 1s-.448 1-1 1h-5c-.552 0-1-.448-1-1s.448-1 1-1h5zm10 0c.552 0 1 .448 1 1s-.448 1-1 1h-5c-.552 0-1-.448-1-1s.448-1 1-1h5zm10 0c.552 0 1 .448 1 1s-.448 1-1 1h-5c-.552 0-1-.448-1-1s.448-1 1-1h5zm10 0c.552 0 1 .448 1 1s-.448 1-1 1h-5c-.552 0-1-.448-1-1s.448-1 1-1h5zm10 0c.552 0 1 .448 1 1s-.448 1-1 1h-5c-.552 0-1-.448-1-1s.448-1 1-1h5zm-55-6c.552 0 1 .448 1 1 0 2.849 1.913 5 5 5 .552 0 1 .448 1 1s-.448 1-1 1c-4.248 0-7-3.095-7-7 0-.552.448-1 1-1zm83-3c.552 0 1 .448 1 1v3c0 .552-.448 1-1 1h-3c-.552 0-1-.448-1-1v-3c0-.552.448-1 1-1h3zM46 47c.513 0 .936.386.993.883L47 48v47c0 3.785 3.005 6.87 6.76 6.996L54 102h37c.552 0 1 .448 1 1 0 .513-.386.936-.883.993L91 104H54c-4.882 0-8.856-3.887-8.996-8.735L45 95V48c0-.552.448-1 1-1zM36 97c.552 0 1 .448 1 1v5c0 .552-.448 1-1 1s-1-.448-1-1v-5c0-.552.448-1 1-1zm58-30c2.21 0 4 1.79 4 4s-1.79 4-4 4c-.626 0-1.22-.144-1.747-.4l-6.61 6.744C85.871 81.85 86 82.41 86 83c0 2.21-1.79 4-4 4s-4-1.79-4-4c0-.593.13-1.156.36-1.663l-2.627-2.73C75.209 78.858 74.62 79 74 79c-.849 0-1.636-.264-2.284-.716L61.284 88.716c.452.648.716 1.435.716 2.284 0 2.21-1.79 4-4 4s-4-1.79-4-4 1.79-4 4-4c.632 0 1.23.147 1.762.408l10.646-10.646C70.147 76.23 70 75.632 70 75c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .862-.272 1.66-.736 2.312l2.37 2.462C80.297 79.288 81.114 79 82 79c.889 0 1.71.29 2.374.78l6.353-6.48C90.269 72.65 90 71.856 90 71c0-2.21 1.79-4 4-4zm17 20c.552 0 1 .448 1 1v5c0 .552-.448 1-1 1s-1-.448-1-1v-5c0-.552.448-1 1-1zm-75 0c.552 0 1 .448 1 1v5c0 .552-.448 1-1 1s-1-.448-1-1v-5c0-.552.448-1 1-1zm22 2c-1.105 0-2 .895-2 2s.895 2 2 2 2-.895 2-2-.895-2-2-2zm24-8c-1.105 0-2 .895-2 2s.895 2 2 2 2-.895 2-2-.895-2-2-2zm29-4c.552 0 1 .448 1 1v5c0 .552-.448 1-1 1s-1-.448-1-1v-5c0-.552.448-1 1-1zm-75 0c.552 0 1 .448 1 1v5c0 .552-.448 1-1 1s-1-.448-1-1v-5c0-.552.448-1 1-1zm38-4c-1.105 0-2 .895-2 2s.895 2 2 2 2-.895 2-2-.895-2-2-2zm37-6c.552 0 1 .448 1 1v5c0 .552-.448 1-1 1s-1-.448-1-1v-5c0-.552.448-1 1-1zm-75 0c.552 0 1 .448 1 1v5c0 .552-.448 1-1 1s-1-.448-1-1v-5c0-.552.448-1 1-1zm58 2c-1.105 0-2 .895-2 2s.895 2 2 2 2-.895 2-2-.895-2-2-2zm17-12c.552 0 1 .448 1 1v5c0 .552-.448 1-1 1s-1-.448-1-1v-5c0-.552.448-1 1-1zm-75 0c.552 0 1 .448 1 1v5c0 .552-.448 1-1 1s-1-.448-1-1v-5c0-.552.448-1 1-1zm75-10c.552 0 1 .448 1 1v5c0 .552-.448 1-1 1s-1-.448-1-1v-5c0-.552.448-1 1-1zm-75 0c.552 0 1 .448 1 1v5c0 .552-.448 1-1 1s-1-.448-1-1v-5c0-.552.448-1 1-1zm6-10c.552 0 1 .448 1 1s-.448 1-1 1c-3.087 0-5 2.151-5 5 0 .552-.448 1-1 1s-1-.448-1-1c0-3.905 2.752-7 7-7zm63 0c4.248 0 7 3.095 7 7 0 .552-.448 1-1 1s-1-.448-1-1c0-2.849-1.913-5-5-5-.552 0-1-.448-1-1s.448-1 1-1zm-54 0c.552 0 1 .448 1 1s-.448 1-1 1h-5c-.552 0-1-.448-1-1s.448-1 1-1h5zm10 0c.552 0 1 .448 1 1s-.448 1-1 1h-5c-.552 0-1-.448-1-1s.448-1 1-1h5zm10 0c.552 0 1 .448 1 1s-.448 1-1 1h-5c-.552 0-1-.448-1-1s.448-1 1-1h5zm10 0c.552 0 1 .448 1 1s-.448 1-1 1h-5c-.552 0-1-.448-1-1s.448-1 1-1h5zm10 0c.552 0 1 .448 1 1s-.448 1-1 1h-5c-.552 0-1-.448-1-1s.448-1 1-1h5zm10 0c.552 0 1 .448 1 1s-.448 1-1 1h-5c-.552 0-1-.448-1-1s.448-1 1-1h5z"}),react.createElement("path",{fill:"#E5EFFA",d:"M58 89c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2zm24-8c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2zm-8-8c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2zm20-4c1.105 0 2 .895 2 2s-.895 2-2 2-2-.895-2-2 .895-2 2-2z"}))},illustrations_ActivityFeedEmptyStateIllustration=ActivityFeedEmptyStateIllustration_ActivityFeedEmptyStateIllustration;try{ActivityFeedEmptyStateIllustration_ActivityFeedEmptyStateIllustration.displayName="ActivityFeedEmptyStateIllustration",ActivityFeedEmptyStateIllustration_ActivityFeedEmptyStateIllustration.__docgenInfo={description:"",displayName:"ActivityFeedEmptyStateIllustration",props:{className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}},height:{defaultValue:{value:140},description:"",name:"height",required:!1,type:{name:"number"}},width:{defaultValue:{value:140},description:"",name:"width",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/elements/content-sidebar/activity-feed/illustrations/ActivityFeedEmptyStateIllustration.tsx#ActivityFeedEmptyStateIllustration"]={docgenInfo:ActivityFeedEmptyStateIllustration_ActivityFeedEmptyStateIllustration.__docgenInfo,name:"ActivityFeedEmptyStateIllustration",path:"src/elements/content-sidebar/activity-feed/illustrations/ActivityFeedEmptyStateIllustration.tsx#ActivityFeedEmptyStateIllustration"})}catch(__react_docgen_typescript_loader_error){}var EmptyStatePreviewActivity140=__webpack_require__(1408),EmptyState_ref2=(__webpack_require__(4330),react.createElement(illustrations_ActivityFeedEmptyStateIllustration,null)),EmptyState_ref3=react.createElement(EmptyStatePreviewActivity140.a,null),EmptyState_EmptyState=function(_ref){var showAnnotationMessage=_ref.showAnnotationMessage,showCommentMessage=_ref.showCommentMessage,actionMessage=showAnnotationMessage?messages.a.noActivityAnnotationPrompt:messages.a.noActivityCommentPrompt;return react.createElement("div",{className:"bcs-EmptyState"},react.createElement("div",{className:"bcs-EmptyState-illustration"},showAnnotationMessage?EmptyState_ref2:EmptyState_ref3),react.createElement("div",{className:"bcs-EmptyState-cta"},react.createElement(components_message.a,messages.a.noActivity,(function(text){return react.createElement("span",{className:"bcs-EmptyState-cta-detail"},text)})),(showAnnotationMessage||showCommentMessage)&&react.createElement("aside",{className:"bcs-EmptyState-cta-message"},react.createElement(components_message.a,actionMessage))))};EmptyState_EmptyState.displayName="EmptyState";var activity_feed_EmptyState=EmptyState_EmptyState,InlineError=__webpack_require__(1424),LoadingIndicator=__webpack_require__(85),activity_feed_messages=Object(dist.defineMessages)({annotationMissingError:{id:"be.activitySidebar.activityFeed.annotationMissingError",defaultMessage:"This comment no longer exists"},feedInlineErrorTitle:{id:"be.activitySidebar.activityFeed.feedInlineErrorTitle",defaultMessage:"Error"},taskMissingError:{id:"be.activitySidebar.activityFeed.taskMissingError",defaultMessage:"This task no longer exists"},commentMissingError:{id:"be.activitySidebar.activityFeed.commentMissingError",defaultMessage:"This comment no longer exists"}});function activityFeedUtils_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function activityFeedUtils_objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null!=arguments[i]?arguments[i]:{},i%2?activityFeedUtils_ownKeys(Object(source),!0).forEach((function(key){activityFeedUtils_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):activityFeedUtils_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function activityFeedUtils_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ItemTypes_fileVersion="file_version";var dom=__webpack_require__(86);__webpack_require__(4331);function ActivityFeed_typeof(obj){return(ActivityFeed_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function ActivityFeed_extends(){return(ActivityFeed_extends=Object.assign||function(target){for(var source,i=1;i<arguments.length;i++)for(var key in source=arguments[i])Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key]);return target}).apply(this,arguments)}function ActivityFeed_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function ActivityFeed_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function ActivityFeed_possibleConstructorReturn(self,call){return!call||"object"!==ActivityFeed_typeof(call)&&"function"!=typeof call?ActivityFeed_assertThisInitialized(self):call}function ActivityFeed_getPrototypeOf(o){return(ActivityFeed_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function ActivityFeed_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function ActivityFeed_setPrototypeOf(o,p){return(ActivityFeed_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function ActivityFeed_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ActivityFeed_ref5=react.createElement("div",{className:"bcs-activity-feed-loading-state"},react.createElement(LoadingIndicator.b,null)),ActivityFeed_ActivityFeed=function(_React$Component){function ActivityFeed(){var _getPrototypeOf2,_this;ActivityFeed_classCallCheck(this,ActivityFeed);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return ActivityFeed_defineProperty(ActivityFeed_assertThisInitialized(_this=ActivityFeed_possibleConstructorReturn(this,(_getPrototypeOf2=ActivityFeed_getPrototypeOf(ActivityFeed)).call.apply(_getPrototypeOf2,[this].concat(args)))),"state",{isInputOpen:!1}),ActivityFeed_defineProperty(ActivityFeed_assertThisInitialized(_this),"activeFeedItemRef",react.createRef()),ActivityFeed_defineProperty(ActivityFeed_assertThisInitialized(_this),"isEmpty",(function(){var _ref=0<arguments.length&&void 0!==arguments[0]?arguments[0]:_this.props,feedItems=_ref.feedItems;return void 0!==feedItems&&(0===feedItems.length||1===feedItems.length&&feedItems[0].type===ItemTypes_fileVersion)})),ActivityFeed_defineProperty(ActivityFeed_assertThisInitialized(_this),"hasLoaded",(function(prevCurrentUser,prevFeedItems){var _this$props=_this.props,currentUser=_this$props.currentUser,feedItems=_this$props.feedItems;return!(void 0===currentUser||void 0===feedItems||prevCurrentUser&&prevFeedItems)})),ActivityFeed_defineProperty(ActivityFeed_assertThisInitialized(_this),"resetFeedScroll",(function(){_this.feedContainer&&(_this.feedContainer.scrollTop=_this.feedContainer.scrollHeight)})),ActivityFeed_defineProperty(ActivityFeed_assertThisInitialized(_this),"onKeyDown",(function(event){event.nativeEvent.stopImmediatePropagation()})),ActivityFeed_defineProperty(ActivityFeed_assertThisInitialized(_this),"commentFormFocusHandler",(function(){_this.resetFeedScroll(),_this.setState({isInputOpen:!0})})),ActivityFeed_defineProperty(ActivityFeed_assertThisInitialized(_this),"commentFormCancelHandler",(function(){return _this.setState({isInputOpen:!1})})),ActivityFeed_defineProperty(ActivityFeed_assertThisInitialized(_this),"commentFormSubmitHandler",(function(){return _this.setState({isInputOpen:!1})})),ActivityFeed_defineProperty(ActivityFeed_assertThisInitialized(_this),"onCommentCreate",(function(_ref2){var text=_ref2.text,hasMention=_ref2.hasMention,_this$props$onComment=_this.props.onCommentCreate;(void 0===_this$props$onComment?noop_default.a:_this$props$onComment)(text,hasMention),_this.commentFormSubmitHandler()})),ActivityFeed_defineProperty(ActivityFeed_assertThisInitialized(_this),"onTaskCreate",(function(_ref3){var text=_ref3.text,assignees=_ref3.assignees,dueAt=_ref3.dueAt,_this$props$onTaskCre=_this.props.onTaskCreate;(void 0===_this$props$onTaskCre?noop_default.a:_this$props$onTaskCre)(text,assignees,dueAt),_this.commentFormSubmitHandler()})),ActivityFeed_defineProperty(ActivityFeed_assertThisInitialized(_this),"openVersionHistoryPopup",(function(data){(_this.props.onVersionHistoryClick||noop_default.a)(data)})),_this}return function ActivityFeed_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&ActivityFeed_setPrototypeOf(subClass,superClass)}(ActivityFeed,_React$Component),function ActivityFeed_createClass(Constructor,protoProps,staticProps){return protoProps&&ActivityFeed_defineProperties(Constructor.prototype,protoProps),staticProps&&ActivityFeed_defineProperties(Constructor,staticProps),Constructor}(ActivityFeed,[{key:"componentDidMount",value:function componentDidMount(){this.resetFeedScroll()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState){var prevActiveFeedEntryId=prevProps.activeFeedEntryId,prevCurrentUser=prevProps.currentUser,prevFeedItems=prevProps.feedItems,_this$props2=this.props,currFeedItems=_this$props2.feedItems,activeFeedEntryId=_this$props2.activeFeedEntryId,prevIsInputOpen=prevState.isInputOpen,currIsInputOpen=this.state.isInputOpen,hasLoaded=this.hasLoaded(prevCurrentUser,prevFeedItems),hasMoreItems=prevFeedItems&&currFeedItems&&prevFeedItems.length<currFeedItems.length,didLoadFeedItems=void 0===prevFeedItems&&void 0!==currFeedItems;(hasLoaded||hasMoreItems||didLoadFeedItems||currIsInputOpen!==prevIsInputOpen)&&void 0===activeFeedEntryId&&this.resetFeedScroll(),(didLoadFeedItems||activeFeedEntryId!==prevActiveFeedEntryId)&&this.scrollToActiveFeedItemOrErrorMessage()}},{key:"scrollToActiveFeedItemOrErrorMessage",value:function scrollToActiveFeedItemOrErrorMessage(){var activeFeedItemRef=this.activeFeedItemRef.current;this.props.activeFeedEntryId&&(null!==activeFeedItemRef?Object(dom.e)(activeFeedItemRef):this.resetFeedScroll())}},{key:"render",value:function render(){var feedState,_this2=this,_this$props3=this.props,activeFeedEntryId=_this$props3.activeFeedEntryId,activeFeedEntryType=_this$props3.activeFeedEntryType,activityFeedError=_this$props3.activityFeedError,approverSelectorContacts=_this$props3.approverSelectorContacts,currentUser=_this$props3.currentUser,feedItems=_this$props3.feedItems,file=_this$props3.file,getApproverWithQuery=_this$props3.getApproverWithQuery,getAvatarUrl=_this$props3.getAvatarUrl,getMentionWithQuery=_this$props3.getMentionWithQuery,getUserProfileUrl=_this$props3.getUserProfileUrl,isDisabled=_this$props3.isDisabled,mentionSelectorContacts=_this$props3.mentionSelectorContacts,onAnnotationDelete=_this$props3.onAnnotationDelete,onAnnotationSelect=_this$props3.onAnnotationSelect,onAppActivityDelete=_this$props3.onAppActivityDelete,onCommentCreate=_this$props3.onCommentCreate,onCommentDelete=_this$props3.onCommentDelete,onCommentUpdate=_this$props3.onCommentUpdate,onTaskAssignmentUpdate=_this$props3.onTaskAssignmentUpdate,onTaskDelete=_this$props3.onTaskDelete,onTaskModalClose=_this$props3.onTaskModalClose,onTaskUpdate=_this$props3.onTaskUpdate,onTaskView=_this$props3.onTaskView,onVersionHistoryClick=_this$props3.onVersionHistoryClick,translations=_this$props3.translations,isInputOpen=this.state.isInputOpen,hasAnnotationCreatePermission=get_default()(file,["permissions",constants.ke],!1),hasCommentPermission=get_default()(file,"permissions.can_comment",!1),showCommentForm=!!(currentUser&&hasCommentPermission&&onCommentCreate&&feedItems),isEmpty=this.isEmpty(this.props),isLoading=!this.hasLoaded(),activeEntry=Array.isArray(feedItems)&&feedItems.find((function(_ref4){var id=_ref4.id,type=_ref4.type;return id===activeFeedEntryId&&type===activeFeedEntryType})),errorMessageByEntryType={annotation:activity_feed_messages.annotationMissingError,comment:activity_feed_messages.commentMissingError,task:activity_feed_messages.taskMissingError},inlineFeedItemErrorMessage=activeFeedEntryType?errorMessageByEntryType[activeFeedEntryType]:void 0,currentFileVersionId=get_default()(file,"file_version.id");return(react.createElement("div",{className:"bcs-activity-feed","data-testid":"activityfeed",onKeyDown:this.onKeyDown},react.createElement("div",{ref:function ref(_ref6){_this2.feedContainer=_ref6},className:"bcs-activity-feed-items-container"},isLoading&&ActivityFeed_ref5,isEmpty&&!isLoading&&react.createElement(activity_feed_EmptyState,{showAnnotationMessage:hasAnnotationCreatePermission,showCommentMessage:showCommentForm}),!isEmpty&&!isLoading&&react.createElement(activity_feed_ActiveState,ActivityFeed_extends({},activityFeedError,{items:(feedState=feedItems,feedState?feedState.reduce((function(collapsedFeedState,feedItem){var previousFeedItem=collapsedFeedState.pop();if(!previousFeedItem)return collapsedFeedState.concat([feedItem]);if(feedItem.type===ItemTypes_fileVersion&&previousFeedItem.type===ItemTypes_fileVersion&&version.a.getVersionAction(feedItem)===constants.Gf&&version.a.getVersionAction(previousFeedItem)===constants.Gf){var tmpModifiedBy=previousFeedItem.modified_by,_previousFeedItem$ver=previousFeedItem.versions,versions=void 0===_previousFeedItem$ver?[previousFeedItem]:_previousFeedItem$ver,_previousFeedItem$ver2=previousFeedItem.version_start,version_start=void 0===_previousFeedItem$ver2?parseInt(previousFeedItem.version_number,10):_previousFeedItem$ver2,_previousFeedItem$ver3=previousFeedItem.version_end,version_end=void 0===_previousFeedItem$ver3?parseInt(previousFeedItem.version_number,10):_previousFeedItem$ver3,prevModifiedBy=tmpModifiedBy||constants.te,tmpCurModifiedBy=feedItem.modified_by,created_at=feedItem.created_at,trashed_at=feedItem.trashed_at,id=feedItem.id,version_number=feedItem.version_number,parsedVersionNumber=parseInt(version_number,10),collaborators=previousFeedItem.collaborators||activityFeedUtils_defineProperty({},prevModifiedBy.id,activityFeedUtils_objectSpread({},prevModifiedBy)),modifiedBy=tmpCurModifiedBy||constants.te;return collaborators[modifiedBy.id]=activityFeedUtils_objectSpread({},modifiedBy),collapsedFeedState.concat([{collaborators:collaborators,created_at:created_at,modified_by:modifiedBy,trashed_at:trashed_at,id:id,type:ItemTypes_fileVersion,version_number:version_number,versions:versions.concat([feedItem]),version_start:Math.min(version_start,parsedVersionNumber),version_end:Math.max(version_end,parsedVersionNumber)}])}return collapsedFeedState.concat([previousFeedItem,feedItem])}),[]):[]),isDisabled:isDisabled,currentUser:currentUser,currentFileVersionId:currentFileVersionId,onTaskAssignmentUpdate:onTaskAssignmentUpdate,onAnnotationDelete:onAnnotationDelete,onAnnotationSelect:onAnnotationSelect,onAppActivityDelete:onAppActivityDelete,onCommentDelete:hasCommentPermission?onCommentDelete:noop_default.a,onCommentEdit:hasCommentPermission?onCommentUpdate:noop_default.a,onTaskDelete:onTaskDelete,onTaskEdit:onTaskUpdate,onTaskView:onTaskView,onTaskModalClose:onTaskModalClose,onVersionInfo:onVersionHistoryClick?this.openVersionHistoryPopup:null,translations:translations,getAvatarUrl:getAvatarUrl,getUserProfileUrl:getUserProfileUrl,mentionSelectorContacts:mentionSelectorContacts,getMentionWithQuery:getMentionWithQuery,approverSelectorContacts:approverSelectorContacts,getApproverWithQuery:getApproverWithQuery,activeFeedEntryId:activeFeedEntryId,activeFeedEntryType:activeFeedEntryType,activeFeedItemRef:this.activeFeedItemRef})),!isLoading&&activeFeedEntryType&&!activeEntry&&inlineFeedItemErrorMessage&&react.createElement(InlineError.a,{title:react.createElement(components_message.a,activity_feed_messages.feedInlineErrorTitle),className:"bcs-feedItemInlineError"},react.createElement(components_message.a,inlineFeedItemErrorMessage))),showCommentForm?react.createElement(activity_feed_comment_form_CommentForm,{onSubmit:this.resetFeedScroll,isDisabled:isDisabled,mentionSelectorContacts:mentionSelectorContacts,className:classnames_default()("bcs-activity-feed-comment-input",{"bcs-is-disabled":isDisabled}),createComment:hasCommentPermission?this.onCommentCreate:noop_default.a,getMentionWithQuery:getMentionWithQuery,isOpen:isInputOpen,user:currentUser,onCancel:this.commentFormCancelHandler,onFocus:this.commentFormFocusHandler,getAvatarUrl:getAvatarUrl}):null))}}]),ActivityFeed}(react.Component);ActivityFeed_ActivityFeed.displayName="ActivityFeed";var activity_feed_activity_feed_ActivityFeed=ActivityFeed_ActivityFeed,react_router=(__webpack_require__(144),__webpack_require__(223)),dropdown_menu=__webpack_require__(112),MenuToggle=__webpack_require__(604),AddTaskMenu_ref=(__webpack_require__(4332),react.createElement("div",{className:"bcs-AddTaskMenu-icon"},react.createElement(two_toned_IconTaskGeneral,{width:30,height:30}))),AddTaskMenu_ref2=react.createElement("div",{className:"bcs-AddTaskMenu-icon"},react.createElement(two_toned_IconTaskApproval,{width:30,height:30})),AddTaskMenu_AddTaskMenu=function(props){return react.createElement(dropdown_menu.b,{constrainToScrollParent:!0,isRightAligned:!0},react.createElement(components_button.b,{isDisabled:props.isDisabled,type:"button",setRef:props.setAddTaskButtonRef},react.createElement(MenuToggle.a,null,react.createElement(components_message.a,content_sidebar_messages.tasksAddTask))),react.createElement(menu.a,{className:"bcs-AddTaskMenu"},react.createElement(menu.b,{className:"bcs-AddTaskMenu-menuItem",onClick:function onClick(){return props.onMenuItemClick(constants.nf)}},AddTaskMenu_ref,react.createElement("div",null,react.createElement("div",{className:"bcs-AddTaskMenu-title"},react.createElement(components_message.a,content_sidebar_messages.taskAddTaskGeneral)),react.createElement("div",{className:"bcs-AddTaskMenu-description"},react.createElement(components_message.a,content_sidebar_messages.taskAddTaskGeneralDescription)))),react.createElement(menu.b,{className:"bcs-AddTaskMenu-menuItem",onClick:function onClick(){return props.onMenuItemClick(constants.mf)}},AddTaskMenu_ref2,react.createElement("div",null,react.createElement("div",{className:"bcs-AddTaskMenu-title"},react.createElement(components_message.a,content_sidebar_messages.taskAddTaskApproval)),react.createElement("div",{className:"bcs-AddTaskMenu-description"},react.createElement(components_message.a,content_sidebar_messages.taskAddTaskApprovalDescription))))))};AddTaskMenu_AddTaskMenu.displayName="AddTaskMenu";var content_sidebar_AddTaskMenu=AddTaskMenu_AddTaskMenu;function AddTaskButton_typeof(obj){return(AddTaskButton_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function AddTaskButton_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function AddTaskButton_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function AddTaskButton_possibleConstructorReturn(self,call){return!call||"object"!==AddTaskButton_typeof(call)&&"function"!=typeof call?AddTaskButton_assertThisInitialized(self):call}function AddTaskButton_getPrototypeOf(o){return(AddTaskButton_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function AddTaskButton_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function AddTaskButton_setPrototypeOf(o,p){return(AddTaskButton_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function AddTaskButton_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var AddTaskButton_AddTaskButton=function(_React$Component){function AddTaskButton(){var _getPrototypeOf2,_this;AddTaskButton_classCallCheck(this,AddTaskButton);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return AddTaskButton_defineProperty(AddTaskButton_assertThisInitialized(_this=AddTaskButton_possibleConstructorReturn(this,(_getPrototypeOf2=AddTaskButton_getPrototypeOf(AddTaskButton)).call.apply(_getPrototypeOf2,[this].concat(args)))),"buttonRef",react.createRef()),AddTaskButton_defineProperty(AddTaskButton_assertThisInitialized(_this),"state",{error:null,isTaskFormOpen:!1,taskType:constants.mf}),AddTaskButton_defineProperty(AddTaskButton_assertThisInitialized(_this),"handleClickMenuItem",(function(taskType){_this.props.history.replace({state:{open:!0}}),_this.setState({isTaskFormOpen:!0,taskType:taskType})})),AddTaskButton_defineProperty(AddTaskButton_assertThisInitialized(_this),"handleModalClose",(function(){var onTaskModalClose=_this.props.onTaskModalClose;_this.setState({isTaskFormOpen:!1,error:null}),_this.buttonRef.current&&_this.buttonRef.current.focus(),onTaskModalClose()})),AddTaskButton_defineProperty(AddTaskButton_assertThisInitialized(_this),"handleSubmitError",(function(e){return _this.setState({error:e})})),AddTaskButton_defineProperty(AddTaskButton_assertThisInitialized(_this),"setAddTaskButtonRef",(function(element){_this.buttonRef.current=element})),_this}return function AddTaskButton_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&AddTaskButton_setPrototypeOf(subClass,superClass)}(AddTaskButton,_React$Component),function AddTaskButton_createClass(Constructor,protoProps,staticProps){return protoProps&&AddTaskButton_defineProperties(Constructor.prototype,protoProps),staticProps&&AddTaskButton_defineProperties(Constructor,staticProps),Constructor}(AddTaskButton,[{key:"render",value:function render(){var _this$props=this.props,isDisabled=_this$props.isDisabled,taskFormProps=_this$props.taskFormProps,_this$state=this.state,isTaskFormOpen=_this$state.isTaskFormOpen,taskType=_this$state.taskType,error=_this$state.error;return react.createElement(react.Fragment,null,react.createElement(content_sidebar_AddTaskMenu,{isDisabled:isDisabled,onMenuItemClick:this.handleClickMenuItem,setAddTaskButtonRef:this.setAddTaskButtonRef}),react.createElement(content_sidebar_TaskModal,{error:error,onSubmitError:this.handleSubmitError,onSubmitSuccess:this.handleModalClose,onModalClose:this.handleModalClose,isTaskFormOpen:isTaskFormOpen,taskFormProps:taskFormProps,taskType:taskType}))}}]),AddTaskButton}(react.Component);AddTaskButton_AddTaskButton.displayName="AddTaskButton",AddTaskButton_defineProperty(AddTaskButton_AddTaskButton,"defaultProps",{isDisabled:!1});var content_sidebar_AddTaskButton=Object(react_router.i)(AddTaskButton_AddTaskButton),SidebarContent=(__webpack_require__(136),__webpack_require__(1426)),annotator_context=__webpack_require__(748),logger_constants=__webpack_require__(509),utils_error=__webpack_require__(30),performance=__webpack_require__(399),error_boundary=__webpack_require__(801),common_logger=__webpack_require__(802),routing=__webpack_require__(2162);__webpack_require__(4333);function ActivitySidebar_typeof(obj){return(ActivitySidebar_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function ActivitySidebar_defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function ActivitySidebar_getPrototypeOf(o){return(ActivitySidebar_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function ActivitySidebar_assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function ActivitySidebar_setPrototypeOf(o,p){return(ActivitySidebar_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function ActivitySidebar_defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__webpack_require__.d(__webpack_exports__,"activityFeedInlineError",(function(){return activityFeedInlineError})),__webpack_require__.d(__webpack_exports__,"ActivitySidebarComponent",(function(){return ActivitySidebar_ActivitySidebar}));var activityFeedInlineError={inlineError:{title:messages.a.errorOccured,content:messages.a.activityFeedItemApiError}},MARK_NAME_JS_READY="".concat(constants.Zd,"_").concat(logger_constants.a);Object(performance.b)(MARK_NAME_JS_READY);var ActivitySidebar_ActivitySidebar=function(_React$PureComponent){function ActivitySidebar(props){var _this;return function ActivitySidebar_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ActivitySidebar),_this=function ActivitySidebar_possibleConstructorReturn(self,call){return!call||"object"!==ActivitySidebar_typeof(call)&&"function"!=typeof call?ActivitySidebar_assertThisInitialized(self):call}(this,ActivitySidebar_getPrototypeOf(ActivitySidebar).call(this,props)),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"handleAnnotationDelete",(function(_ref){var id=_ref.id,permissions=_ref.permissions,_this$props=_this.props,api=_this$props.api,file=_this$props.file;api.getFeedAPI(!1).deleteAnnotation(file,id,permissions,_this.deleteAnnotationSuccess.bind(ActivitySidebar_assertThisInitialized(_this),id),_this.feedErrorCallback),_this.fetchFeedItems()})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"feedSuccessCallback",(function(){_this.fetchFeedItems()})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"feedErrorCallback",(function(e,code,contextInfo){_this.errorCallback(e,code,contextInfo),_this.fetchFeedItems()})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"createTask",(function(message,assignees,taskType,dueAt,completionRule,onSuccess,onError){var currentUser=_this.state.currentUser,_this$props2=_this.props,file=_this$props2.file,api=_this$props2.api;if(!currentUser)throw Object(utils_error.c)();api.getFeedAPI(!1).createTaskNew(file,currentUser,message,assignees,taskType,dueAt,completionRule,(function(){onSuccess&&onSuccess(),_this.feedSuccessCallback()}),(function(e,code,contextInfo){onError&&onError(e,code,contextInfo),_this.feedErrorCallback(e,code,contextInfo)})),_this.fetchFeedItems()})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"deleteTask",(function(task){var _this$props3=_this.props,file=_this$props3.file,api=_this$props3.api,onTaskDelete=_this$props3.onTaskDelete;api.getFeedAPI(!1).deleteTaskNew(file,task,(function(taskId){_this.feedSuccessCallback(),onTaskDelete(taskId)}),_this.feedErrorCallback),_this.fetchFeedItems()})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"updateTask",(function(task,onSuccess,onError){var _this$props4=_this.props,file=_this$props4.file,api=_this$props4.api,onTaskUpdate=_this$props4.onTaskUpdate;api.getFeedAPI(!1).updateTaskNew(file,task,(function(){_this.feedSuccessCallback(),onSuccess&&onSuccess(),onTaskUpdate()}),(function(e,code){onError&&onError(e,code),_this.feedErrorCallback(e,code)})),_this.fetchFeedItems()})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"updateTaskAssignment",(function(taskId,taskAssignmentId,status){var _this$props5=_this.props,file=_this$props5.file;_this$props5.api.getFeedAPI(!1).updateTaskCollaborator(file,taskId,taskAssignmentId,status,_this.feedSuccessCallback,_this.feedErrorCallback),_this.fetchFeedItems()})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"deleteComment",(function(_ref2){var id=_ref2.id,permissions=_ref2.permissions,_this$props6=_this.props,file=_this$props6.file,api=_this$props6.api,onCommentDelete=_this$props6.onCommentDelete;api.getFeedAPI(!1).deleteComment(file,id,permissions,(function(comment){_this.feedSuccessCallback(),onCommentDelete(comment)}),_this.feedErrorCallback),_this.fetchFeedItems()})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"updateComment",(function(id,text,hasMention,permissions,onSuccess,onError){var _this$props7=_this.props,file=_this$props7.file,api=_this$props7.api,onCommentUpdate=_this$props7.onCommentUpdate;api.getFeedAPI(!1).updateComment(file,id,text,hasMention,permissions,(function(){_this.feedSuccessCallback(),onSuccess&&onSuccess(),onCommentUpdate()}),(function(e,code){onError&&onError(e,code),_this.feedErrorCallback(e,code)})),_this.fetchFeedItems()})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"createComment",(function(text,hasMention){var _this$props8=_this.props,file=_this$props8.file,api=_this$props8.api,onCommentCreate=_this$props8.onCommentCreate,currentUser=_this.state.currentUser;if(!currentUser)throw Object(utils_error.c)();api.getFeedAPI(!1).createComment(file,currentUser,text,hasMention,(function(comment){onCommentCreate(comment),_this.feedSuccessCallback()}),_this.feedErrorCallback),_this.fetchFeedItems()})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"deleteAppActivity",(function(_ref3){var id=_ref3.id,_this$props9=_this.props,file=_this$props9.file;_this$props9.api.getFeedAPI(!1).deleteAppActivity(file,id,_this.feedSuccessCallback,_this.feedErrorCallback),_this.fetchFeedItems()})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"fetchFeedItemsSuccessCallback",(function(feedItems){_this.setState({feedItems:feedItems,activityFeedError:void 0})})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"fetchFeedItemsErrorCallback",(function(feedItems,errors){var onError=_this.props.onError;_this.setState({feedItems:feedItems,activityFeedError:activityFeedInlineError}),Array.isArray(errors)&&errors.length&&onError(new Error("Fetch feed items error"),constants.rb,{showNotification:!0,errors:errors.map((function(_ref4){return _ref4.code}))})})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"errorCallback",(function(error,code){var contextInfo=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};console.error(error),_this.props.onError(error,code,contextInfo)})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"fetchCurrentUserSuccessCallback",(function(currentUser){_this.setState({currentUser:currentUser,currentUserError:void 0})})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"getApproverContactsSuccessCallback",(function(collaborators){var entries=collaborators.entries;_this.setState({approverSelectorContacts:entries})})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"getMentionContactsSuccessCallback",(function(collaborators){var entries=collaborators.entries;_this.setState({mentionSelectorContacts:entries})})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"getApproverWithQuery",debounce_default()((function(searchStr){return _this.getCollaborators(_this.getApproverContactsSuccessCallback,_this.errorCallback,searchStr,{includeGroups:!0})}),constants.F)),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"getMentionWithQuery",debounce_default()((function(searchStr){return _this.getCollaborators(_this.getMentionContactsSuccessCallback,_this.errorCallback,searchStr)}),constants.F)),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"fetchCurrentUserErrorCallback",(function(e,code){_this.setState({currentUser:void 0,currentUserError:{maskError:{errorHeader:messages.a.currentUserErrorHeaderMessage,errorSubHeader:messages.a.defaultErrorMaskSubHeaderMessage}}}),_this.errorCallback(e,code,{error:e})})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"getAvatarUrl",function(){var _ref5=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(userId){var _this$props10,file,api;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _this$props10=_this.props,file=_this$props10.file,api=_this$props10.api,_context.abrupt("return",api.getUsersAPI(!1).getAvatarUrlWithAccessToken(userId,file.id));case 2:case"end":return _context.stop()}}),_callee)})));return function(){return _ref5.apply(this,arguments)}}()),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"handleAnnotationSelect",(function(annotation){var file_version=annotation.file_version,nextActiveAnnotationId=annotation.id,_this$props11=_this.props,emitAnnotatorActiveChangeEvent=_this$props11.emitAnnotatorActiveChangeEvent,file=_this$props11.file,getAnnotationsMatchPath=_this$props11.getAnnotationsMatchPath,getAnnotationsPath=_this$props11.getAnnotationsPath,history=_this$props11.history,location=_this$props11.location,onAnnotationSelect=_this$props11.onAnnotationSelect,annotationFileVersionId=get_default()(file_version,"id"),currentFileVersionId=get_default()(file,"file_version.id"),match=getAnnotationsMatchPath(location),selectedFileVersionId=get_default()(match,"params.fileVersionId",currentFileVersionId);emitAnnotatorActiveChangeEvent(nextActiveAnnotationId),annotationFileVersionId&&annotationFileVersionId!==selectedFileVersionId&&history.push(getAnnotationsPath(annotationFileVersionId,nextActiveAnnotationId)),onAnnotationSelect(annotation)})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"onTaskModalClose",(function(){_this.setState({approverSelectorContacts:[]})})),ActivitySidebar_defineProperty(ActivitySidebar_assertThisInitialized(_this),"renderAddTaskButton",(function(){var isDisabled=_this.props.isDisabled,approverSelectorContacts=_this.state.approverSelectorContacts,_assertThisInitialize=ActivitySidebar_assertThisInitialized(_this),getApproverWithQuery=_assertThisInitialize.getApproverWithQuery,getAvatarUrl=_assertThisInitialize.getAvatarUrl,createTask=_assertThisInitialize.createTask,onTaskModalClose=_assertThisInitialize.onTaskModalClose;return react.createElement(content_sidebar_AddTaskButton,{isDisabled:isDisabled,onTaskModalClose:onTaskModalClose,taskFormProps:{approverSelectorContacts:approverSelectorContacts,completionRule:constants.cf,createTask:createTask,getApproverWithQuery:getApproverWithQuery,getAvatarUrl:getAvatarUrl,id:"",message:"",approvers:[]}})})),_this.props.logger.onReadyMetric({endMarkName:MARK_NAME_JS_READY}),_this.state={},_this}return function ActivitySidebar_inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&ActivitySidebar_setPrototypeOf(subClass,superClass)}(ActivitySidebar,_React$PureComponent),function ActivitySidebar_createClass(Constructor,protoProps,staticProps){return protoProps&&ActivitySidebar_defineProperties(Constructor.prototype,protoProps),staticProps&&ActivitySidebar_defineProperties(Constructor,staticProps),Constructor}(ActivitySidebar,[{key:"componentDidMount",value:function componentDidMount(){var currentUser=this.props.currentUser;this.fetchFeedItems(!0),this.fetchCurrentUser(currentUser)}},{key:"deleteAnnotationSuccess",value:function deleteAnnotationSuccess(id){var emitRemoveEvent=this.props.emitRemoveEvent;this.feedSuccessCallback(),emitRemoveEvent(id)}},{key:"fetchCurrentUser",value:function fetchCurrentUser(user){var shouldDestroy=1<arguments.length&&void 0!==arguments[1]&&arguments[1],_this$props12=this.props,api=_this$props12.api,file=_this$props12.file;if(!file)throw Object(utils_error.a)();void 0===user?api.getUsersAPI(shouldDestroy).getUser(file.id,this.fetchCurrentUserSuccessCallback,this.fetchCurrentUserErrorCallback):this.setState({currentUser:user,currentUserError:void 0})}},{key:"fetchFeedItems",value:function fetchFeedItems(){var shouldRefreshCache=0<arguments.length&&void 0!==arguments[0]&&arguments[0],shouldDestroy=1<arguments.length&&void 0!==arguments[1]&&arguments[1],_this$props13=this.props,file=_this$props13.file,api=_this$props13.api,features=_this$props13.features,shouldShowAppActivity=Object(feature_checking.isFeatureEnabled)(features,"activityFeed.appActivity.enabled"),shouldShowAnnotations=Object(feature_checking.isFeatureEnabled)(features,"activityFeed.annotations.enabled");api.getFeedAPI(shouldDestroy).feedItems(file,shouldRefreshCache,this.fetchFeedItemsSuccessCallback,this.fetchFeedItemsErrorCallback,this.errorCallback,{shouldShowAnnotations:shouldShowAnnotations,shouldShowAppActivity:shouldShowAppActivity})}},{key:"getCollaborators",value:function getCollaborators(successCallback,errorCallback,searchStr){var _ref6=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},_ref6$includeGroups=_ref6.includeGroups,includeGroups=void 0!==_ref6$includeGroups&&_ref6$includeGroups,_this$props14=this.props,file=_this$props14.file,api=_this$props14.api;searchStr&&""!==searchStr.trim()&&api.getFileCollaboratorsAPI(!0).getFileCollaborators(file.id,successCallback,errorCallback,{filter_term:searchStr,include_groups:includeGroups,include_uploader_collabs:!1})}},{key:"refresh",value:function refresh(){var shouldRefreshCache=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.fetchFeedItems(shouldRefreshCache)}},{key:"render",value:function render(){var _this$props15=this.props,elementId=_this$props15.elementId,file=_this$props15.file,_this$props15$isDisab=_this$props15.isDisabled,isDisabled=void 0!==_this$props15$isDisab&&_this$props15$isDisab,onVersionHistoryClick=_this$props15.onVersionHistoryClick,getUserProfileUrl=_this$props15.getUserProfileUrl,activeFeedEntryId=_this$props15.activeFeedEntryId,activeFeedEntryType=_this$props15.activeFeedEntryType,onTaskView=_this$props15.onTaskView,_this$state=this.state,currentUser=_this$state.currentUser,approverSelectorContacts=_this$state.approverSelectorContacts,mentionSelectorContacts=_this$state.mentionSelectorContacts,feedItems=_this$state.feedItems,activityFeedError=_this$state.activityFeedError,currentUserError=_this$state.currentUserError;return react.createElement(SidebarContent.a,{actions:this.renderAddTaskButton(),className:"bcs-activity",elementId:elementId,sidebarView:constants.xe,title:react.createElement(components_message.a,messages.a.sidebarActivityTitle)},react.createElement(activity_feed_activity_feed_ActivityFeed,{activeFeedEntryId:activeFeedEntryId,activeFeedEntryType:activeFeedEntryType,activityFeedError:activityFeedError,approverSelectorContacts:approverSelectorContacts,currentUser:currentUser,currentUserError:currentUserError,feedItems:feedItems,file:file,getApproverWithQuery:this.getApproverWithQuery,getAvatarUrl:this.getAvatarUrl,getMentionWithQuery:this.getMentionWithQuery,getUserProfileUrl:getUserProfileUrl,isDisabled:isDisabled,mentionSelectorContacts:mentionSelectorContacts,onAnnotationDelete:this.handleAnnotationDelete,onAnnotationSelect:this.handleAnnotationSelect,onAppActivityDelete:this.deleteAppActivity,onCommentCreate:this.createComment,onCommentDelete:this.deleteComment,onCommentUpdate:this.updateComment,onTaskAssignmentUpdate:this.updateTaskAssignment,onTaskCreate:this.createTask,onTaskDelete:this.deleteTask,onTaskModalClose:this.onTaskModalClose,onTaskUpdate:this.updateTask,onTaskView:onTaskView,onVersionHistoryClick:onVersionHistoryClick}))}}]),ActivitySidebar}(react.PureComponent);ActivitySidebar_ActivitySidebar.displayName="ActivitySidebar",ActivitySidebar_defineProperty(ActivitySidebar_ActivitySidebar,"defaultProps",{annotatorState:{},emitAnnotatorActiveChangeEvent:noop_default.a,getAnnotationsMatchPath:noop_default.a,getAnnotationsPath:noop_default.a,isDisabled:!1,onAnnotationSelect:noop_default.a,onCommentCreate:noop_default.a,onCommentDelete:noop_default.a,onCommentUpdate:noop_default.a,onTaskAssignmentUpdate:noop_default.a,onTaskCreate:noop_default.a,onTaskDelete:noop_default.a,onTaskUpdate:noop_default.a,onVersionChange:noop_default.a,onVersionHistoryClick:noop_default.a});__webpack_exports__.default=flow_default()([Object(common_logger.a)(constants.Zd),Object(error_boundary.a)(constants.Zd),api_context.b,feature_checking.withFeatureConsumer,annotator_context.b,routing.a])(ActivitySidebar_ActivitySidebar)}}]);
//# sourceMappingURL=activity-sidebar.cb61ce43265a323e53bd.bundle.js.map