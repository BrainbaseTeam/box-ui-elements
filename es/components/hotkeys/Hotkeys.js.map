{"version":3,"sources":["../../../src/components/hotkeys/Hotkeys.js"],"names":["Children","Component","PropTypes","HotkeyPropType","Hotkeys","configs","props","context","hotkeyLayer","Error","_addHotkeys","prevProps","newConfigs","prevConfigs","additions","filter","config","indexOf","removals","_removeHotkeys","hotkeyConfigs","forEach","hotkeyConfig","registerHotkey","deregisterHotkey","children","only","node","arrayOf","isRequired","object"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AAEA,SAASC,cAAT,QAA+B,gBAA/B;;IAEMC,O;;;;;;;;;;;;;;AACF;wCAYoB;AAAA,UACRC,OADQ,GACI,KAAKC,KADT,CACRD,OADQ;;AAGhB,UAAI,CAAC,KAAKE,OAAL,CAAaC,WAAlB,EAA+B;AAC3B,cAAM,IAAIC,KAAJ,CAAU,yDAAV,CAAN;AACH;;AAED,WAAKC,WAAL,CAAiBL,OAAjB;AACH;;;uCAEkBM,S,EAAW;AAAA,UACTC,UADS,GACM,KAAKN,KADX,CAClBD,OADkB;AAAA,UAETQ,WAFS,GAEOF,SAFP,CAElBN,OAFkB;AAI1B,UAAMS,SAAS,GAAGF,UAAU,CAACG,MAAX,CAAkB,UAAAC,MAAM;AAAA,eAAIH,WAAW,CAACI,OAAZ,CAAoBD,MAApB,MAAgC,CAAC,CAArC;AAAA,OAAxB,CAAlB;AACA,UAAME,QAAQ,GAAGL,WAAW,CAACE,MAAZ,CAAmB,UAAAC,MAAM;AAAA,eAAIJ,UAAU,CAACK,OAAX,CAAmBD,MAAnB,MAA+B,CAAC,CAApC;AAAA,OAAzB,CAAjB;;AAEA,WAAKG,cAAL,CAAoBD,QAApB;;AACA,WAAKR,WAAL,CAAiBI,SAAjB;AACH;;;2CAEsB;AAAA,UACXT,OADW,GACC,KAAKC,KADN,CACXD,OADW;;AAGnB,WAAKc,cAAL,CAAoBd,OAApB;AACH;;;gCAEWe,a,EAAe;AAAA;;AACvBA,MAAAA,aAAa,CAACC,OAAd,CAAsB,UAAAC,YAAY;AAAA,eAAI,KAAI,CAACf,OAAL,CAAaC,WAAb,CAAyBe,cAAzB,CAAwCD,YAAxC,CAAJ;AAAA,OAAlC;AACH;;;mCAEcF,a,EAAe;AAAA;;AAC1BA,MAAAA,aAAa,CAACC,OAAd,CAAsB,UAAAC,YAAY;AAAA,eAAI,MAAI,CAACf,OAAL,CAAaC,WAAb,CAAyBgB,gBAAzB,CAA0CF,YAA1C,CAAJ;AAAA,OAAlC;AACH;;;6BAEQ;AACL,UAAI,CAAC,KAAKhB,KAAL,CAAWmB,QAAhB,EAA0B;AACtB,eAAO,IAAP;AACH;;AACD,aAAOzB,QAAQ,CAAC0B,IAAT,CAAc,KAAKpB,KAAL,CAAWmB,QAAzB,CAAP;AACH;;;;EArDiBxB,S;;gBAAhBG,O,eAGiB;AACfqB,EAAAA,QAAQ,EAAEvB,SAAS,CAACyB,IADL;;AAEf;AACAtB,EAAAA,OAAO,EAAEH,SAAS,CAAC0B,OAAV,CAAkBzB,cAAlB,EAAkC0B;AAH5B,C;;gBAHjBzB,O,kBASoB;AAClBI,EAAAA,WAAW,EAAEN,SAAS,CAAC4B;AADL,C;;AA+C1B,eAAe1B,OAAf","sourcesContent":["import { Children, Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { HotkeyPropType } from './HotkeyRecord';\n\nclass Hotkeys extends Component {\n    /* eslint-disable no-underscore-dangle */\n\n    static propTypes = {\n        children: PropTypes.node,\n        /** Array of hotkey configs, either in the specified shape, or instances of HotkeyRecord */\n        configs: PropTypes.arrayOf(HotkeyPropType).isRequired,\n    };\n\n    static contextTypes = {\n        hotkeyLayer: PropTypes.object,\n    };\n\n    componentDidMount() {\n        const { configs } = this.props;\n\n        if (!this.context.hotkeyLayer) {\n            throw new Error('You must instantiate a HotkeyLayer before using Hotkeys');\n        }\n\n        this._addHotkeys(configs);\n    }\n\n    componentDidUpdate(prevProps) {\n        const { configs: newConfigs } = this.props;\n        const { configs: prevConfigs } = prevProps;\n\n        const additions = newConfigs.filter(config => prevConfigs.indexOf(config) === -1);\n        const removals = prevConfigs.filter(config => newConfigs.indexOf(config) === -1);\n\n        this._removeHotkeys(removals);\n        this._addHotkeys(additions);\n    }\n\n    componentWillUnmount() {\n        const { configs } = this.props;\n\n        this._removeHotkeys(configs);\n    }\n\n    _addHotkeys(hotkeyConfigs) {\n        hotkeyConfigs.forEach(hotkeyConfig => this.context.hotkeyLayer.registerHotkey(hotkeyConfig));\n    }\n\n    _removeHotkeys(hotkeyConfigs) {\n        hotkeyConfigs.forEach(hotkeyConfig => this.context.hotkeyLayer.deregisterHotkey(hotkeyConfig));\n    }\n\n    render() {\n        if (!this.props.children) {\n            return null;\n        }\n        return Children.only(this.props.children);\n    }\n}\n\nexport default Hotkeys;\n"],"file":"Hotkeys.js"}