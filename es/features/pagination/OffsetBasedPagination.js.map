{"version":3,"sources":["../../../src/features/pagination/OffsetBasedPagination.js"],"names":["React","noop","PaginationControls","DEFAULT_PAGE_SIZE","OffsetBasedPagination","offset","onOffsetChange","pageSize","totalCount","pageCount","Math","ceil","pageByOffset","floor","pageNumber","min","hasNextPage","hasPreviousPage","updateOffset","newPageNumber","newOffset","handleNextClick","handlePreviousClick"],"mappings":"AAAA;;;;;AAMA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,OAAOC,kBAAP,MAA+B,sBAA/B;AACA,SAASC,iBAAT,QAAkC,iBAAlC;;AASA,IAAMC,qBAAqB,GAAG,SAAxBA,qBAAwB,OAKjB;AAAA,yBAJTC,MAIS;AAAA,MAJTA,MAIS,4BAJA,CAIA;AAAA,iCAHTC,cAGS;AAAA,MAHTA,cAGS,oCAHQL,IAGR;AAAA,2BAFTM,QAES;AAAA,MAFTA,QAES,8BAFEJ,iBAEF;AAAA,6BADTK,UACS;AAAA,MADTA,UACS,gCADI,CACJ;AACT,MAAMC,SAAS,GAAGC,IAAI,CAACC,IAAL,CAAUH,UAAU,GAAGD,QAAvB,CAAlB;AACA,MAAIE,SAAS,IAAI,CAAjB,EAAoB,OAAO,IAAP;AAEpB,MAAMG,YAAY,GAAGF,IAAI,CAACG,KAAL,CAAWR,MAAM,GAAGE,QAApB,IAAgC,CAArD;AACA,MAAMO,UAAU,GAAGF,YAAY,GAAG,CAAf,GAAmBF,IAAI,CAACK,GAAL,CAASN,SAAT,EAAoBG,YAApB,CAAnB,GAAuD,CAA1E;AACA,MAAMI,WAAW,GAAGF,UAAU,GAAGL,SAAjC;AACA,MAAMQ,eAAe,GAAGH,UAAU,GAAG,CAArC;;AAEA,MAAMI,YAAY,GAAG,SAAfA,YAAe,CAACC,aAAD,EAA2B;AAC5C,QAAIC,SAAS,GAAG,CAACD,aAAa,GAAG,CAAjB,IAAsBZ,QAAtC;;AAEA,QAAIa,SAAS,IAAI,CAAjB,EAAoB;AAChBA,MAAAA,SAAS,GAAG,CAAZ;AACH;;AAED,QAAIA,SAAS,IAAIZ,UAAjB,EAA6B;AACzBY,MAAAA,SAAS,GAAGZ,UAAU,GAAGD,QAAzB;AACH;;AAEDD,IAAAA,cAAc,CAACc,SAAD,CAAd;AACH,GAZD;;AAcA,MAAMC,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAC1BH,IAAAA,YAAY,CAACJ,UAAU,GAAG,CAAd,CAAZ;AACH,GAFD;;AAIA,MAAMQ,mBAAmB,GAAG,SAAtBA,mBAAsB,GAAM;AAC9BJ,IAAAA,YAAY,CAACJ,UAAU,GAAG,CAAd,CAAZ;AACH,GAFD;;AAIA,SACI,oBAAC,kBAAD;AACI,IAAA,eAAe,EAAEO,eADrB;AAEI,IAAA,mBAAmB,EAAEC,mBAFzB;AAGI,IAAA,WAAW,EAAEN,WAHjB;AAII,IAAA,eAAe,EAAEC,eAJrB;AAKI,IAAA,uBAAuB,MAL3B;AAMI,IAAA,WAAW,EAAEC,YANjB;AAOI,IAAA,SAAS,EAAET,SAPf;AAQI,IAAA,UAAU,EAAEK;AARhB,IADJ;AAYH,CAhDD;;AAkDA,eAAeV,qBAAf","sourcesContent":["/**\n * @flow\n * @file Offset Based Pagination component\n * @author Box\n */\n\nimport React from 'react';\nimport noop from 'lodash/noop';\nimport PaginationControls from './PaginationControls';\nimport { DEFAULT_PAGE_SIZE } from '../../constants';\n\ntype Props = {\n    offset?: number,\n    onOffsetChange?: Function,\n    pageSize?: number,\n    totalCount?: number,\n};\n\nconst OffsetBasedPagination = ({\n    offset = 0,\n    onOffsetChange = noop,\n    pageSize = DEFAULT_PAGE_SIZE,\n    totalCount = 0,\n}: Props) => {\n    const pageCount = Math.ceil(totalCount / pageSize);\n    if (pageCount <= 1) return null;\n\n    const pageByOffset = Math.floor(offset / pageSize) + 1;\n    const pageNumber = pageByOffset > 0 ? Math.min(pageCount, pageByOffset) : 1;\n    const hasNextPage = pageNumber < pageCount;\n    const hasPreviousPage = pageNumber > 1;\n\n    const updateOffset = (newPageNumber: number) => {\n        let newOffset = (newPageNumber - 1) * pageSize;\n\n        if (newOffset <= 0) {\n            newOffset = 0;\n        }\n\n        if (newOffset >= totalCount) {\n            newOffset = totalCount - pageSize;\n        }\n\n        onOffsetChange(newOffset);\n    };\n\n    const handleNextClick = () => {\n        updateOffset(pageNumber + 1);\n    };\n\n    const handlePreviousClick = () => {\n        updateOffset(pageNumber - 1);\n    };\n\n    return (\n        <PaginationControls\n            handleNextClick={handleNextClick}\n            handlePreviousClick={handlePreviousClick}\n            hasNextPage={hasNextPage}\n            hasPreviousPage={hasPreviousPage}\n            isOffsetBasedPagination\n            onPageClick={updateOffset}\n            pageCount={pageCount}\n            pageNumber={pageNumber}\n        />\n    );\n};\n\nexport default OffsetBasedPagination;\n"],"file":"OffsetBasedPagination.js"}