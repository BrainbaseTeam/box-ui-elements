{"version":3,"sources":["../../../src/features/targeting/useShowOne.js"],"names":["React","makeUseShowOne","targetingApis","shown","useShowOne","useTargetingApi","index","canShow","onShow","onClose","onComplete","useCallback","map","targetingApi"],"mappings":"AACA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;;AAGA,SAASC,cAAT,CAAwBC,aAAxB,EAAuF;AACnF,MAAIC,KAAoB,GAAG,IAA3B;;AAEA,WAASC,UAAT,CAAoBC,eAApB,EAAsDC,KAAtD,EAAmF;AAAA,2BAC9BD,eAAe,EADe;AAAA,QACvEE,OADuE,oBACvEA,OADuE;AAAA,QAC9DC,MAD8D,oBAC9DA,MAD8D;AAAA,QACtDC,OADsD,oBACtDA,OADsD;AAAA,QAC7CC,UAD6C,oBAC7CA,UAD6C;;AAG/E,WAAO;AACHH,MAAAA,OAAO,EAAE,CAACJ,KAAK,KAAK,IAAV,IAAkBA,KAAK,KAAKG,KAA7B,KAAuCC,OAD7C;AAEHC,MAAAA,MAAM,EAAER,KAAK,CAACW,WAAN,CAAkB,YAAM;AAC5B,YAAIR,KAAK,KAAK,IAAV,IAAkBI,OAAtB,EAA+B;AAC3BJ,UAAAA,KAAK,GAAGG,KAAR;AACAE,UAAAA,MAAM;AACT;AACJ,OALO,EAKL,CAACD,OAAD,EAAUD,KAAV,EAAiBE,MAAjB,CALK,CAFL;AAQHC,MAAAA,OAAO,EAAPA,OARG;AASHC,MAAAA,UAAU,EAAVA;AATG,KAAP;AAWH;;AAED,SAAOR,aAAa,CAACU,GAAd,CAAkB,UAACC,YAAD,EAAeP,KAAf,EAAyB;AAC9C,WAAO;AAAA,aAAMF,UAAU,CAACS,YAAD,EAAeP,KAAf,CAAhB;AAAA,KAAP;AACH,GAFM,CAAP;AAGH;;AAED,eAAeL,cAAf","sourcesContent":["// @flow\nimport * as React from 'react';\nimport { type UseTargetingApi, type TargetingApi } from './types';\n\nfunction makeUseShowOne(targetingApis: Array<UseTargetingApi>): Array<UseTargetingApi> {\n    let shown: number | null = null;\n\n    function useShowOne(useTargetingApi: UseTargetingApi, index: number): TargetingApi {\n        const { canShow, onShow, onClose, onComplete } = useTargetingApi();\n\n        return {\n            canShow: (shown === null || shown === index) && canShow,\n            onShow: React.useCallback(() => {\n                if (shown === null && canShow) {\n                    shown = index;\n                    onShow();\n                }\n            }, [canShow, index, onShow]),\n            onClose,\n            onComplete,\n        };\n    }\n\n    return targetingApis.map((targetingApi, index) => {\n        return () => useShowOne(targetingApi, index);\n    });\n}\n\nexport default makeUseShowOne;\n"],"file":"useShowOne.js"}