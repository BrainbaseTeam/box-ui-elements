{"version":3,"sources":["../../../src/features/unified-share-modal/InviteePermissionsMenu.js"],"names":["React","Component","FormattedMessage","classNames","PlainButton","DropdownMenu","MenuToggle","Menu","SelectMenuItem","Tooltip","ITEM_TYPE_WEBLINK","getDefaultPermissionLevel","InviteePermissionsLabel","messages","InviteePermissionsMenu","newInviteePermissionLevel","props","inviteePermissionLevel","changeInviteePermissionLevel","inviteePermissions","itemType","defaultPermissionLevel","selectedPermissionLevel","map","level","value","disabled","onChangeInviteePermissionsLevel","inviteePermissionsButtonProps","disabledTooltip","inviteDisabledWeblinkTooltip","inviteDisabledTooltip","plainButton","plainButtonWrap","renderMenu"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AACA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,gBAAT,QAAiC,YAAjC;AACA,OAAOC,UAAP,MAAuB,YAAvB;AAEA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,YAAP,IAAuBC,UAAvB,QAAyC,gCAAzC;AACA,SAASC,IAAT,EAAeC,cAAf,QAAqC,uBAArC;AACA,OAAOC,OAAP,MAAoB,0BAApB;AACA,SAASC,iBAAT,QAAkC,wBAAlC;AAGA,OAAOC,yBAAP,MAAsC,gCAAtC;AACA,OAAOC,uBAAP,MAAoC,2BAApC;AACA,OAAOC,QAAP,MAAqB,YAArB;;IAaMC,sB;;;;;;;;;;;;;;;;sFAOgC,UAACC,yBAAD,EAAuC;AAAA,wBACJ,MAAKC,KADD;AAAA,UAC7DC,sBAD6D,eAC7DA,sBAD6D;AAAA,UACrCC,4BADqC,eACrCA,4BADqC;;AAGrE,UAAID,sBAAsB,KAAKF,yBAA/B,EAA0D;AACtDG,QAAAA,4BAA4B,CAACH,yBAAD,CAA5B;AACH;AACJ,K;;;;;;;iCAEY;AAAA;;AAAA,yBACwD,KAAKC,KAD7D;AAAA,UACDC,sBADC,gBACDA,sBADC;AAAA,UACuBE,kBADvB,gBACuBA,kBADvB;AAAA,UAC2CC,QAD3C,gBAC2CA,QAD3C;AAGT,UAAMC,sBAAsB,GAAGV,yBAAyB,CAACQ,kBAAD,CAAxD;AACA,UAAMG,uBAAuB,GAAGL,sBAAsB,IAAII,sBAA1D;AAEA,0BACI,oBAAC,IAAD;AAAM,QAAA,SAAS,EAAC;AAAhB,SACKF,kBAAkB,CAACI,GAAnB,CAAuB,UAAAC,KAAK;AAAA,eACzBA,KAAK,CAACC,KAAN,gBACI,oBAAC,cAAD;AACI,UAAA,GAAG,EAAED,KAAK,CAACC,KADf;AAEI,UAAA,UAAU,EAAED,KAAK,CAACE,QAFtB;AAGI,UAAA,UAAU,EAAEF,KAAK,CAACC,KAAN,KAAgBH,uBAHhC;AAII,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAI,CAACK,+BAAL,CAAqCH,KAAK,CAACC,KAA3C,CAAN;AAAA;AAJb,wBAMI,oBAAC,uBAAD;AACI,UAAA,cAAc,MADlB;AAEI,UAAA,sBAAsB,EAAED,KAAK,CAACC,KAFlC;AAGI,UAAA,kBAAkB,MAHtB;AAII,UAAA,QAAQ,EAAEL;AAJd,UANJ,CADJ,GAcI,IAfqB;AAAA,OAA5B,CADL,CADJ;AAqBH;;;6BAEQ;AAAA,yBAOD,KAAKJ,KAPJ;AAAA,UAEDG,kBAFC,gBAEDA,kBAFC;AAAA,UAGDS,6BAHC,gBAGDA,6BAHC;AAAA,UAIDX,sBAJC,gBAIDA,sBAJC;AAAA,UAKDS,QALC,gBAKDA,QALC;AAAA,UAMDN,QANC,gBAMDA,QANC;AAQL,UAAMC,sBAAsB,GAAGV,yBAAyB,CAACQ,kBAAD,CAAxD;AACA,UAAMG,uBAAuB,GAAGL,sBAAsB,IAAII,sBAA1D;AACA,UAAMQ,eAAe,GACjBT,QAAQ,KAAKV,iBAAb,gBACI,oBAAC,gBAAD,EAAsBG,QAAQ,CAACiB,4BAA/B,CADJ,gBAGI,oBAAC,gBAAD,EAAsBjB,QAAQ,CAACkB,qBAA/B,CAJR;AAOA,UAAMC,WAAW,gBACb,oBAAC,WAAD;AACI,QAAA,SAAS,EAAE7B,UAAU,CAAC,KAAD,EAAQ;AACzB,yBAAeuB;AADU,SAAR,CADzB;AAII,QAAA,QAAQ,EAAEA;AAJd,SAKQE,6BALR,gBAOI,oBAAC,UAAD,QACKN,uBAAuB,iBACpB,oBAAC,uBAAD;AACI,QAAA,cAAc,EAAE,KADpB;AAEI,QAAA,sBAAsB,EAAEA,uBAF5B;AAGI,QAAA,QAAQ,EAAEF;AAHd,QAFR,CAPJ,CADJ;AAoBA,UAAMa,eAAe,GAAGP,QAAQ,gBAC5B,oBAAC,OAAD;AAAS,QAAA,QAAQ,EAAC,eAAlB;AAAkC,QAAA,IAAI,EAAEG;AAAxC,sBACI;AAAK,QAAA,SAAS,EAAC;AAAf,SAAiCG,WAAjC,CADJ,CAD4B,GAK5BA,WALJ,CArCK,CA6CL;AACA;;AACA,0BACI;AAAK,QAAA,SAAS,EAAC;AAAf,sBACI,oBAAC,YAAD,QACKC,eADL,EAEK,KAAKC,UAAL,EAFL,CADJ,CADJ;AAQH;;;;EAnGgCjC,S;;gBAA/Ba,sB,kBACoB;AAClBY,EAAAA,QAAQ,EAAE,KADQ;AAElBP,EAAAA,kBAAkB,EAAE,EAFF;AAGlBS,EAAAA,6BAA6B,EAAE;AAHb,C;;AAqG1B,eAAed,sBAAf","sourcesContent":["// @flow\nimport React, { Component } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport classNames from 'classnames';\n\nimport PlainButton from '../../components/plain-button';\nimport DropdownMenu, { MenuToggle } from '../../components/dropdown-menu';\nimport { Menu, SelectMenuItem } from '../../components/menu';\nimport Tooltip from '../../components/tooltip';\nimport { ITEM_TYPE_WEBLINK } from '../../common/constants';\nimport type { ItemType } from '../../common/types/core';\n\nimport getDefaultPermissionLevel from './utils/defaultPermissionLevel';\nimport InviteePermissionsLabel from './InviteePermissionsLabel';\nimport messages from './messages';\n\nimport type { inviteePermissionType } from './flowTypes';\n\ntype Props = {\n    changeInviteePermissionLevel: Function,\n    disabled: boolean,\n    inviteePermissionLevel: string,\n    inviteePermissions: Array<inviteePermissionType>,\n    inviteePermissionsButtonProps?: Object,\n    itemType: ItemType,\n};\n\nclass InviteePermissionsMenu extends Component<Props> {\n    static defaultProps = {\n        disabled: false,\n        inviteePermissions: [],\n        inviteePermissionsButtonProps: {},\n    };\n\n    onChangeInviteePermissionsLevel = (newInviteePermissionLevel: string) => {\n        const { inviteePermissionLevel, changeInviteePermissionLevel } = this.props;\n\n        if (inviteePermissionLevel !== newInviteePermissionLevel) {\n            changeInviteePermissionLevel(newInviteePermissionLevel);\n        }\n    };\n\n    renderMenu() {\n        const { inviteePermissionLevel, inviteePermissions, itemType } = this.props;\n\n        const defaultPermissionLevel = getDefaultPermissionLevel(inviteePermissions);\n        const selectedPermissionLevel = inviteePermissionLevel || defaultPermissionLevel;\n\n        return (\n            <Menu className=\"usm-share-access-menu\">\n                {inviteePermissions.map(level =>\n                    level.value ? (\n                        <SelectMenuItem\n                            key={level.value}\n                            isDisabled={level.disabled}\n                            isSelected={level.value === selectedPermissionLevel}\n                            onClick={() => this.onChangeInviteePermissionsLevel(level.value)}\n                        >\n                            <InviteePermissionsLabel\n                                hasDescription\n                                inviteePermissionLevel={level.value}\n                                inviteePermissions\n                                itemType={itemType}\n                            />\n                        </SelectMenuItem>\n                    ) : null,\n                )}\n            </Menu>\n        );\n    }\n\n    render() {\n        const {\n            inviteePermissions,\n            inviteePermissionsButtonProps,\n            inviteePermissionLevel,\n            disabled,\n            itemType,\n        } = this.props;\n        const defaultPermissionLevel = getDefaultPermissionLevel(inviteePermissions);\n        const selectedPermissionLevel = inviteePermissionLevel || defaultPermissionLevel;\n        const disabledTooltip =\n            itemType === ITEM_TYPE_WEBLINK ? (\n                <FormattedMessage {...messages.inviteDisabledWeblinkTooltip} />\n            ) : (\n                <FormattedMessage {...messages.inviteDisabledTooltip} />\n            );\n\n        const plainButton = (\n            <PlainButton\n                className={classNames('lnk', {\n                    'is-disabled': disabled,\n                })}\n                disabled={disabled}\n                {...inviteePermissionsButtonProps}\n            >\n                <MenuToggle>\n                    {selectedPermissionLevel && (\n                        <InviteePermissionsLabel\n                            hasDescription={false}\n                            inviteePermissionLevel={selectedPermissionLevel}\n                            itemType={itemType}\n                        />\n                    )}\n                </MenuToggle>\n            </PlainButton>\n        );\n\n        const plainButtonWrap = disabled ? (\n            <Tooltip position=\"bottom-center\" text={disabledTooltip}>\n                <div className=\"tooltip-target\">{plainButton}</div>\n            </Tooltip>\n        ) : (\n            plainButton\n        );\n\n        // TODO: `DropdownMenu` doesn't currently handle a scenario where the menu is taller than\n        // the available vertical space. cannot use the constraint props here in short windows.\n        return (\n            <div className=\"invitee-menu-wrap\">\n                <DropdownMenu>\n                    {plainButtonWrap}\n                    {this.renderMenu()}\n                </DropdownMenu>\n            </div>\n        );\n    }\n}\n\nexport default InviteePermissionsMenu;\n"],"file":"InviteePermissionsMenu.js"}