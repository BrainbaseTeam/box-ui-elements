{"version":3,"sources":["../../../src/features/unified-share-modal/SharedLinkPermissionMenu.js"],"names":["React","Component","classNames","FormattedMessage","DropdownMenu","MenuToggle","PlainButton","Menu","SelectMenuItem","CAN_VIEW_DOWNLOAD","CAN_VIEW_ONLY","messages","SharedLinkPermissionMenu","newPermissionLevel","props","changePermissionLevel","permissionLevel","trackingProps","onChangeSharedLinkPermissionLevel","allowedPermissionLevels","submitting","sharedLinkPermissionsMenuButtonProps","permissionLevels","label","sharedLinkPermissionsViewDownload","description","sharedLinkPermissionsViewDownloadDescription","sharedLinkPermissionsViewOnly","sharedLinkPermissionsViewOnlyDescription","map","level","onChangePermissionLevel"],"mappings":"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","sourcesContent":["// @flow\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport { FormattedMessage } from 'react-intl';\n\nimport DropdownMenu, { MenuToggle } from '../../components/dropdown-menu';\nimport PlainButton from '../../components/plain-button';\nimport { Menu, SelectMenuItem } from '../../components/menu';\n\nimport type { permissionLevelType } from './flowTypes';\nimport { CAN_VIEW_DOWNLOAD, CAN_VIEW_ONLY } from './constants';\nimport messages from './messages';\n\ntype Props = {\n    allowedPermissionLevels: Array<permissionLevelType>,\n    canChangePermissionLevel: boolean,\n    changePermissionLevel: (\n        newPermissionLevel: permissionLevelType,\n    ) => Promise<{ permissionLevel: permissionLevelType }>,\n    permissionLevel?: permissionLevelType,\n    submitting: boolean,\n    trackingProps: {\n        onChangeSharedLinkPermissionLevel?: Function,\n        sharedLinkPermissionsMenuButtonProps?: Object,\n    },\n};\n\nclass SharedLinkPermissionMenu extends Component<Props> {\n    static defaultProps = {\n        trackingProps: {},\n    };\n\n    onChangePermissionLevel = (newPermissionLevel: permissionLevelType) => {\n        const { changePermissionLevel, permissionLevel, trackingProps } = this.props;\n        const { onChangeSharedLinkPermissionLevel } = trackingProps;\n\n        if (permissionLevel !== newPermissionLevel) {\n            changePermissionLevel(newPermissionLevel);\n\n            if (onChangeSharedLinkPermissionLevel) {\n                onChangeSharedLinkPermissionLevel(newPermissionLevel);\n            }\n        }\n    };\n\n    render() {\n        const { allowedPermissionLevels, permissionLevel, submitting, trackingProps } = this.props;\n        const { sharedLinkPermissionsMenuButtonProps } = trackingProps;\n\n        if (!permissionLevel) {\n            return null;\n        }\n\n        const permissionLevels = {\n            [CAN_VIEW_DOWNLOAD]: {\n                label: <FormattedMessage {...messages.sharedLinkPermissionsViewDownload} />,\n                description: <FormattedMessage {...messages.sharedLinkPermissionsViewDownloadDescription} />,\n            },\n            [CAN_VIEW_ONLY]: {\n                label: <FormattedMessage {...messages.sharedLinkPermissionsViewOnly} />,\n                description: <FormattedMessage {...messages.sharedLinkPermissionsViewOnlyDescription} />,\n            },\n        };\n\n        return (\n            <DropdownMenu constrainToWindow>\n                <PlainButton\n                    className={classNames('lnk', {\n                        'is-disabled': submitting,\n                    })}\n                    disabled={submitting}\n                    {...sharedLinkPermissionsMenuButtonProps}\n                >\n                    <MenuToggle>{permissionLevels[permissionLevel].label}</MenuToggle>\n                </PlainButton>\n                <Menu className=\"ums-share-permissions-menu\">\n                    {allowedPermissionLevels.map(level => (\n                        <SelectMenuItem\n                            key={level}\n                            isSelected={level === permissionLevel}\n                            onClick={() => this.onChangePermissionLevel(level)}\n                        >\n                            <div>\n                                <strong>{permissionLevels[level].label}</strong>\n                                <small className=\"usm-menu-description\"> {permissionLevels[level].description} </small>\n                            </div>\n                        </SelectMenuItem>\n                    ))}\n                </Menu>\n            </DropdownMenu>\n        );\n    }\n}\n\nexport default SharedLinkPermissionMenu;\n"],"file":"SharedLinkPermissionMenu.js"}