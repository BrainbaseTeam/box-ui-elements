{"version":3,"sources":["../../../src/features/unified-share-modal/SharedLinkPermissionMenu.js"],"names":["React","Component","classNames","FormattedMessage","DropdownMenu","MenuToggle","LabelPill","PlainButton","Menu","SelectMenuItem","CAN_EDIT","CAN_VIEW_DOWNLOAD","CAN_VIEW_ONLY","messages","SharedLinkPermissionMenu","newPermissionLevel","props","changePermissionLevel","permissionLevel","trackingProps","onChangeSharedLinkPermissionLevel","allowedPermissionLevels","sharedLinkEditTagTargetingApi","submitting","sharedLinkPermissionsMenuButtonProps","canShow","permissionLevels","label","sharedLinkPermissionsEdit","sharedLinkPermissionsViewDownload","sharedLinkPermissionsViewOnly","map","level","onChangePermissionLevel","ftuxSharedLinkPermissionsEditTag"],"mappings":"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","sourcesContent":["// @flow\n\nimport React, { Component } from 'react';\nimport classNames from 'classnames';\nimport { FormattedMessage } from 'react-intl';\n\nimport DropdownMenu, { MenuToggle } from '../../components/dropdown-menu';\nimport LabelPill from '../../components/label-pill';\nimport PlainButton from '../../components/plain-button';\nimport { Menu, SelectMenuItem } from '../../components/menu';\nimport type { TargetingApi } from '../targeting/types';\n\nimport type { permissionLevelType } from './flowTypes';\nimport { CAN_EDIT, CAN_VIEW_DOWNLOAD, CAN_VIEW_ONLY } from './constants';\nimport messages from './messages';\n\nimport './SharedLinkPermissionMenu.scss';\n\ntype Props = {\n    allowedPermissionLevels: Array<permissionLevelType>,\n    canChangePermissionLevel: boolean,\n    changePermissionLevel: (\n        newPermissionLevel: permissionLevelType,\n    ) => Promise<{ permissionLevel: permissionLevelType }>,\n    permissionLevel?: permissionLevelType,\n    sharedLinkEditTagTargetingApi?: TargetingApi,\n    submitting: boolean,\n    trackingProps: {\n        onChangeSharedLinkPermissionLevel?: Function,\n        sharedLinkPermissionsMenuButtonProps?: Object,\n    },\n};\n\nclass SharedLinkPermissionMenu extends Component<Props> {\n    static defaultProps = {\n        trackingProps: {},\n    };\n\n    onChangePermissionLevel = (newPermissionLevel: permissionLevelType) => {\n        const { changePermissionLevel, permissionLevel, trackingProps } = this.props;\n        const { onChangeSharedLinkPermissionLevel } = trackingProps;\n\n        if (permissionLevel !== newPermissionLevel) {\n            changePermissionLevel(newPermissionLevel);\n\n            if (onChangeSharedLinkPermissionLevel) {\n                onChangeSharedLinkPermissionLevel(newPermissionLevel);\n            }\n        }\n    };\n\n    render() {\n        const {\n            allowedPermissionLevels,\n            permissionLevel,\n            sharedLinkEditTagTargetingApi,\n            submitting,\n            trackingProps,\n        } = this.props;\n        const { sharedLinkPermissionsMenuButtonProps } = trackingProps;\n        const canShow = sharedLinkEditTagTargetingApi ? sharedLinkEditTagTargetingApi.canShow : false;\n\n        if (!permissionLevel) {\n            return null;\n        }\n\n        const permissionLevels = {\n            [CAN_EDIT]: {\n                label: <FormattedMessage {...messages.sharedLinkPermissionsEdit} />,\n            },\n            [CAN_VIEW_DOWNLOAD]: {\n                label: <FormattedMessage {...messages.sharedLinkPermissionsViewDownload} />,\n            },\n            [CAN_VIEW_ONLY]: {\n                label: <FormattedMessage {...messages.sharedLinkPermissionsViewOnly} />,\n            },\n        };\n\n        return (\n            <DropdownMenu constrainToWindow>\n                <PlainButton\n                    className={classNames('lnk', {\n                        'is-disabled': submitting,\n                        'bdl-is-disabled': submitting,\n                    })}\n                    disabled={submitting}\n                    {...sharedLinkPermissionsMenuButtonProps}\n                >\n                    <MenuToggle>{permissionLevels[permissionLevel].label}</MenuToggle>\n                </PlainButton>\n                <Menu className=\"ums-share-permissions-menu\">\n                    {allowedPermissionLevels.map(level => (\n                        <SelectMenuItem\n                            key={level}\n                            isSelected={level === permissionLevel}\n                            onClick={() => this.onChangePermissionLevel(level)}\n                        >\n                            <div className=\"ums-share-permissions-menu-item\">\n                                <span>{permissionLevels[level].label}</span>\n                                {level === CAN_EDIT && canShow && (\n                                    <LabelPill.Pill className=\"ftux-editable-shared-link\" type=\"ftux\">\n                                        <LabelPill.Text>\n                                            <FormattedMessage {...messages.ftuxSharedLinkPermissionsEditTag} />\n                                        </LabelPill.Text>\n                                    </LabelPill.Pill>\n                                )}\n                            </div>\n                        </SelectMenuItem>\n                    ))}\n                </Menu>\n            </DropdownMenu>\n        );\n    }\n}\n\nexport default SharedLinkPermissionMenu;\n"],"file":"SharedLinkPermissionMenu.js"}