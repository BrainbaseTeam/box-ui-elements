{"version":3,"sources":["../../../src/features/shared-link-settings-modal/SharedLinkSettingsModal.js"],"names":["React","Component","PropTypes","FormattedMessage","Button","PrimaryButton","Modal","ModalActions","InlineNotice","Link","commonMessages","Classification","VanityNameSection","PasswordSection","ExpirationSection","AllowDownloadSection","messages","PEOPLE_WITH_LINK","PEOPLE_IN_COMPANY","PEOPLE_IN_ITEM","getAccessNoticeMessageId","accessLevel","canDownload","message","withLinkViewDownload","withLinkView","inCompanyViewDownload","inCompanyView","inItem","SharedLinkSettingsModal","props","event","preventDefault","state","expirationDate","isDownloadEnabled","isExpirationEnabled","isPasswordEnabled","password","vanityName","onSubmit","expirationTimestamp","getTime","undefined","setState","target","value","vanityNameError","passwordError","checked","date","expirationError","isVanityEnabled","Date","prevProps","canChangeVanityName","hideVanityNameSection","serverURL","vanityNameInputProps","warnOnPublic","onVanityNameChange","onVanityCheckboxChange","canChangePassword","isPasswordAvailable","passwordCheckboxProps","passwordInputProps","onPasswordCheckboxChange","onPasswordChange","canChangeExpiration","expirationCheckboxProps","expirationInputProps","onExpirationCheckboxChange","onExpirationDateChange","sharedLinkSettingWarningLinkText","canChangeDownload","directLink","directLinkInputProps","downloadCheckboxProps","isDirectLinkAvailable","isDirectLinkUnavailableDueToDownloadSettings","isDirectLinkUnavailableDueToAccessPolicy","isDownloadAvailable","item","classification","onAllowDownloadChange","bannerPolicy","modalTitle","body","cancelButtonProps","isOpen","modalProps","onRequestClose","saveButtonProps","submitting","showInaccessibleSettingsNotice","disableSaveBtn","renderModalTitle","inaccessibleSettingsNotice","renderAccessLevelNotice","renderExpirationSection","renderPasswordSection","renderVanityNameSection","renderAllowDownloadSection","cancel","save","bool","func","isRequired","string","number","object"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\n\nimport Button from '../../components/button';\nimport PrimaryButton from '../../components/primary-button';\nimport { Modal, ModalActions } from '../../components/modal';\nimport InlineNotice from '../../components/inline-notice';\nimport Link from '../../components/link/LinkBase';\nimport commonMessages from '../../common/messages';\nimport Classification from '../classification';\n\nimport VanityNameSection from './VanityNameSection';\nimport PasswordSection from './PasswordSection';\nimport ExpirationSection from './ExpirationSection';\nimport AllowDownloadSection from './AllowDownloadSection';\nimport messages from './messages';\n\nimport { PEOPLE_WITH_LINK, PEOPLE_IN_COMPANY, PEOPLE_IN_ITEM } from '../shared-link-modal/constants';\n\nimport './SharedLinkSettingsModal.scss';\n\n/**\n * Return the translation message based on the access level and whether the user can download or not\n * @param {string} accessLevel one of 'peopleWithTheLink', 'peopleInYourCompany', or 'peopleInThisItem'\n * @param {boolean} canDownload prop value for whether the user can currently download\n *\n * @return {object|undefined} message for the proper translation (or undefined if nothing matches)\n */\nfunction getAccessNoticeMessageId(accessLevel, canDownload) {\n    let message;\n\n    switch (accessLevel) {\n        case PEOPLE_WITH_LINK:\n            message = canDownload ? messages.withLinkViewDownload : messages.withLinkView;\n            break;\n        case PEOPLE_IN_COMPANY:\n            message = canDownload ? messages.inCompanyViewDownload : messages.inCompanyView;\n            break;\n        case PEOPLE_IN_ITEM:\n            message = messages.inItem;\n            break;\n        default:\n            break;\n    }\n\n    return message;\n}\n\nclass SharedLinkSettingsModal extends Component {\n    static propTypes = {\n        hideVanityNameSection: PropTypes.bool,\n        isOpen: PropTypes.bool,\n        onRequestClose: PropTypes.func,\n        submitting: PropTypes.bool,\n        warnOnPublic: PropTypes.bool,\n        /** Function called on form submission. Format is:\n         * ({\n         *      expirationTimestamp: number (in milliseconds),\n         *      isDownloadEnabled: true,\n         *      isExpirationEnabled: true,\n         *      isPasswordEnabled: true,\n         *      password: string,\n         *      vanityName: string,\n         * }) => void\n         */\n        onSubmit: PropTypes.func.isRequired,\n\n        // access level props\n        /** the access level used for the item being shared */\n        accessLevel: PropTypes.string,\n\n        // Custom URL props\n        /** Whether or not user has permission to change/set vanity URL for this item */\n        canChangeVanityName: PropTypes.bool.isRequired,\n        /** Current vanity name for the item */\n        vanityName: PropTypes.string.isRequired,\n        /** Server URL prefix for vanity URL preview; should be something like http://company.box.com/v/ */\n        serverURL: PropTypes.string.isRequired,\n        vanityNameError: PropTypes.string,\n\n        // Password props\n        /** Whether or not user has permission to enable/disable/change password */\n        canChangePassword: PropTypes.bool.isRequired,\n        /** Whether or not the password section is visible to user */\n        isPasswordAvailable: PropTypes.bool.isRequired,\n        /** Whether or not password is currently enabled */\n        isPasswordEnabled: PropTypes.bool.isRequired,\n        passwordError: PropTypes.string,\n\n        // Expiration props\n        /** Whether or not user has permission to enable/disable/change expiration */\n        canChangeExpiration: PropTypes.bool.isRequired,\n        /** Current expiration timestamp, in milliseconds */\n        expirationTimestamp: PropTypes.number,\n        expirationError: PropTypes.string,\n\n        // Allow download props\n        /** Whether or not the download section is visible to user */\n        isDownloadAvailable: PropTypes.bool.isRequired,\n        /** Whether or not user has permission to enable/disable download */\n        canChangeDownload: PropTypes.bool.isRequired,\n        /** Whether or not download is currently enabled */\n        isDownloadEnabled: PropTypes.bool.isRequired,\n\n        // Direct link props\n        /** URL for direct link */\n        directLink: PropTypes.string.isRequired,\n        /** Whether or not direct link is available */\n        isDirectLinkAvailable: PropTypes.bool.isRequired,\n        /** Whether or not direct link is unavailable only due to download setting */\n        isDirectLinkUnavailableDueToDownloadSettings: PropTypes.bool.isRequired,\n        /** Whether or not direct link is unavailable only due to access policy setting */\n        isDirectLinkUnavailableDueToAccessPolicy: PropTypes.bool.isRequired,\n\n        // Classification props\n        item: PropTypes.object,\n\n        // Hooks for resin\n        cancelButtonProps: PropTypes.object,\n        directLinkInputProps: PropTypes.object,\n        downloadCheckboxProps: PropTypes.object,\n        expirationCheckboxProps: PropTypes.object,\n        expirationInputProps: PropTypes.object,\n        modalProps: PropTypes.object,\n        passwordCheckboxProps: PropTypes.object,\n        passwordInputProps: PropTypes.object,\n        saveButtonProps: PropTypes.object,\n        vanityNameInputProps: PropTypes.object,\n    };\n\n    static defaultProps = {\n        cancelButtonProps: {},\n        modalProps: {},\n        saveButtonProps: {},\n    };\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            expirationDate: props.expirationTimestamp ? new Date(props.expirationTimestamp) : null,\n            expirationError: props.expirationError,\n            isVanityEnabled: !!props.vanityName,\n            isDownloadEnabled: props.isDownloadEnabled,\n            isExpirationEnabled: !!props.expirationTimestamp,\n            isPasswordEnabled: props.isPasswordEnabled,\n            password: '',\n            passwordError: props.passwordError,\n            vanityName: props.vanityName,\n            vanityNameError: props.vanityNameError,\n        };\n    }\n\n    componentDidUpdate(prevProps) {\n        const { expirationError, passwordError, vanityNameError } = this.props;\n\n        if (\n            prevProps.expirationError !== expirationError ||\n            prevProps.passwordError !== passwordError ||\n            prevProps.vanityNameError !== vanityNameError\n        ) {\n            this.setState({\n                expirationError,\n                passwordError,\n                vanityNameError,\n            });\n        }\n    }\n\n    onSubmit = event => {\n        event.preventDefault();\n\n        const {\n            expirationDate,\n            isDownloadEnabled,\n            isExpirationEnabled,\n            isPasswordEnabled,\n            password,\n            vanityName,\n        } = this.state;\n\n        this.props.onSubmit({\n            expirationTimestamp: expirationDate ? expirationDate.getTime() : undefined,\n            isDownloadEnabled,\n            isExpirationEnabled,\n            isPasswordEnabled,\n            password,\n            vanityName,\n        });\n    };\n\n    onVanityNameChange = event => {\n        this.setState({\n            vanityName: event.target.value,\n            vanityNameError: undefined,\n        });\n    };\n\n    onPasswordChange = event => {\n        this.setState({\n            password: event.target.value,\n            passwordError: undefined,\n        });\n    };\n\n    onPasswordCheckboxChange = event => {\n        this.setState({ isPasswordEnabled: event.target.checked });\n    };\n\n    onExpirationDateChange = date => {\n        this.setState({ expirationDate: date, expirationError: undefined });\n    };\n\n    onExpirationCheckboxChange = event => {\n        this.setState({ isExpirationEnabled: event.target.checked });\n    };\n\n    onAllowDownloadChange = event => {\n        this.setState({ isDownloadEnabled: event.target.checked });\n    };\n\n    onVanityCheckboxChange = event => {\n        this.setState({\n            isVanityEnabled: event.target.checked,\n            vanityName: !event.target.checked ? '' : this.props.vanityName,\n        });\n    };\n\n    renderVanityNameSection() {\n        const {\n            canChangeVanityName,\n            hideVanityNameSection,\n            serverURL,\n            vanityNameInputProps,\n            warnOnPublic = false,\n        } = this.props;\n        const { vanityNameError, isVanityEnabled } = this.state;\n\n        if (hideVanityNameSection) {\n            return null;\n        }\n\n        return (\n            <VanityNameSection\n                canChangeVanityName={canChangeVanityName}\n                isVanityEnabled={isVanityEnabled}\n                error={vanityNameError}\n                onChange={this.onVanityNameChange}\n                onCheckboxChange={this.onVanityCheckboxChange}\n                serverURL={serverURL}\n                vanityName={this.state.vanityName}\n                vanityNameInputProps={vanityNameInputProps}\n                warnOnPublic={warnOnPublic}\n            />\n        );\n    }\n\n    renderPasswordSection() {\n        const { canChangePassword, isPasswordAvailable, passwordCheckboxProps, passwordInputProps } = this.props;\n        const { isPasswordEnabled, password, passwordError } = this.state;\n\n        return (\n            <PasswordSection\n                canChangePassword={canChangePassword}\n                error={passwordError}\n                isPasswordAvailable={isPasswordAvailable}\n                isPasswordEnabled={isPasswordEnabled}\n                isPasswordInitiallyEnabled={this.props.isPasswordEnabled}\n                onCheckboxChange={this.onPasswordCheckboxChange}\n                onPasswordChange={this.onPasswordChange}\n                password={password}\n                passwordCheckboxProps={passwordCheckboxProps}\n                passwordInputProps={passwordInputProps}\n            />\n        );\n    }\n\n    renderExpirationSection() {\n        const { canChangeExpiration, expirationCheckboxProps, expirationInputProps } = this.props;\n        const { expirationDate, isExpirationEnabled, expirationError } = this.state;\n\n        return (\n            <ExpirationSection\n                canChangeExpiration={canChangeExpiration}\n                error={expirationError}\n                expirationCheckboxProps={expirationCheckboxProps}\n                expirationDate={expirationDate}\n                expirationInputProps={expirationInputProps}\n                isExpirationEnabled={isExpirationEnabled}\n                onCheckboxChange={this.onExpirationCheckboxChange}\n                onExpirationDateChange={this.onExpirationDateChange}\n            />\n        );\n    }\n\n    renderAccessLevelNotice() {\n        const { accessLevel } = this.props;\n        const { isDownloadEnabled } = this.state;\n        const message = getAccessNoticeMessageId(accessLevel, isDownloadEnabled);\n\n        return (\n            message && (\n                <p className=\"link-settings-modal-notice\">\n                    <FormattedMessage {...message} />{' '}\n                    <Link\n                        href=\"https://community.box.com/t5/Using-Shared-Links/Shared-Link-Settings/ta-p/50250\"\n                        target=\"_blank\"\n                    >\n                        <FormattedMessage {...messages.sharedLinkSettingWarningLinkText} />\n                    </Link>\n                </p>\n            )\n        );\n    }\n\n    renderAllowDownloadSection() {\n        const {\n            canChangeDownload,\n            directLink,\n            directLinkInputProps,\n            downloadCheckboxProps,\n            isDirectLinkAvailable,\n            isDirectLinkUnavailableDueToDownloadSettings,\n            isDirectLinkUnavailableDueToAccessPolicy,\n            isDownloadAvailable,\n            item,\n        } = this.props;\n\n        const { isDownloadEnabled } = this.state;\n        const { classification } = item;\n\n        return (\n            <AllowDownloadSection\n                canChangeDownload={canChangeDownload}\n                classification={classification}\n                directLink={directLink}\n                directLinkInputProps={directLinkInputProps}\n                downloadCheckboxProps={downloadCheckboxProps}\n                isDirectLinkAvailable={isDirectLinkAvailable}\n                isDirectLinkUnavailableDueToDownloadSettings={isDirectLinkUnavailableDueToDownloadSettings}\n                isDirectLinkUnavailableDueToAccessPolicy={isDirectLinkUnavailableDueToAccessPolicy}\n                isDownloadAvailable={isDownloadAvailable}\n                isDownloadEnabled={isDownloadEnabled}\n                onChange={this.onAllowDownloadChange}\n            />\n        );\n    }\n\n    renderModalTitle() {\n        const { item } = this.props;\n        const { bannerPolicy, classification } = item;\n\n        return (\n            <span className=\"bdl-SharedLinkSettingsModal-title\">\n                <FormattedMessage {...messages.modalTitle} />\n                <Classification\n                    definition={bannerPolicy ? bannerPolicy.body : undefined}\n                    messageStyle=\"tooltip\"\n                    name={classification}\n                    className=\"bdl-SharedLinkSettingsModal-classification\"\n                />\n            </span>\n        );\n    }\n\n    render() {\n        const {\n            canChangeDownload,\n            canChangeExpiration,\n            canChangePassword,\n            canChangeVanityName,\n            cancelButtonProps,\n            isOpen,\n            modalProps,\n            onRequestClose,\n            saveButtonProps,\n            submitting,\n        } = this.props;\n\n        const showInaccessibleSettingsNotice = !(\n            canChangeDownload &&\n            canChangeExpiration &&\n            canChangePassword &&\n            canChangeVanityName\n        );\n\n        const disableSaveBtn = !(canChangeDownload || canChangeExpiration || canChangePassword || canChangeVanityName);\n        return (\n            <Modal\n                className=\"shared-link-settings-modal\"\n                isOpen={isOpen}\n                onRequestClose={submitting ? undefined : onRequestClose}\n                title={this.renderModalTitle()}\n                {...modalProps}\n            >\n                <form onSubmit={this.onSubmit}>\n                    {showInaccessibleSettingsNotice && (\n                        <InlineNotice type=\"warning\">\n                            <FormattedMessage {...messages.inaccessibleSettingsNotice} />\n                        </InlineNotice>\n                    )}\n                    {this.renderAccessLevelNotice()}\n                    {this.renderExpirationSection()}\n                    {this.renderPasswordSection()}\n                    {this.renderVanityNameSection()}\n                    {this.renderAllowDownloadSection()}\n                    <ModalActions>\n                        <Button isDisabled={submitting} onClick={onRequestClose} type=\"button\" {...cancelButtonProps}>\n                            <FormattedMessage {...commonMessages.cancel} />\n                        </Button>\n                        <PrimaryButton\n                            isDisabled={submitting || disableSaveBtn}\n                            isLoading={submitting}\n                            {...saveButtonProps}\n                        >\n                            <FormattedMessage {...commonMessages.save} />\n                        </PrimaryButton>\n                    </ModalActions>\n                </form>\n            </Modal>\n        );\n    }\n}\n\nexport default SharedLinkSettingsModal;\n"],"file":"SharedLinkSettingsModal.js"}