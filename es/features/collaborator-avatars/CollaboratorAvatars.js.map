{"version":3,"sources":["../../../src/features/collaborator-avatars/CollaboratorAvatars.js"],"names":["React","Component","FormattedMessage","classNames","CollaboratorAvatarItem","PlainButton","messages","MAX_ADDITIONAL_COLLABORATOR_NUM_CAP","CollaboratorAvatars","props","collaborators","length","maxDisplayedUserAvatars","maxAdditionalCollaboratorsNum","remainingCollabCount","collaboratorsOverMaxCount","containerAttributes","onClick","isVisible","collaboratorAvatarsLabel","slice","map","collaborator","index","collabID","imageURL","hasCustomAvatar","name","hasAdditionalCollaborators","formatAdditionalCollaboratorCount"],"mappings":"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","sourcesContent":["// @flow\nimport React, { Component } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport classNames from 'classnames';\n\nimport type { collaboratorType } from '../unified-share-modal/flowTypes';\n\nimport CollaboratorAvatarItem from './CollaboratorAvatarItem';\nimport PlainButton from '../../components/plain-button';\nimport messages from './messages';\n\nimport './CollaboratorAvatars.scss';\n\nconst MAX_ADDITIONAL_COLLABORATOR_NUM_CAP = 99;\n\ntype Props = {\n    collaborators: Array<collaboratorType>,\n    containerAttributes: Object,\n    maxAdditionalCollaboratorsNum: number,\n    maxDisplayedUserAvatars: number,\n    onClick: Function,\n};\n\nclass CollaboratorAvatars extends Component<Props> {\n    static defaultProps = {\n        /** Maximum number of avatars to display before showing a +{n} avatar */\n        maxDisplayedUserAvatars: 3,\n        /** Maximum number of collaborators before displaying a {maxAdditionalCollaboratorsNum}+ avatar */\n        maxAdditionalCollaboratorsNum: MAX_ADDITIONAL_COLLABORATOR_NUM_CAP,\n        containerAttributes: {},\n    };\n\n    isVisible() {\n        return this.props.collaborators.length > 0;\n    }\n\n    hasAdditionalCollaborators() {\n        const { collaborators, maxDisplayedUserAvatars } = this.props;\n\n        return collaborators.length > maxDisplayedUserAvatars;\n    }\n\n    collaboratorsOverMaxCount() {\n        const { collaborators, maxDisplayedUserAvatars, maxAdditionalCollaboratorsNum } = this.props;\n\n        const remainingCollabCount = collaborators.length - maxDisplayedUserAvatars;\n\n        return remainingCollabCount > maxAdditionalCollaboratorsNum;\n    }\n\n    formatAdditionalCollaboratorCount() {\n        const { maxAdditionalCollaboratorsNum, maxDisplayedUserAvatars, collaborators } = this.props;\n\n        return this.collaboratorsOverMaxCount()\n            ? `${maxAdditionalCollaboratorsNum}+`\n            : `+${collaborators.length - maxDisplayedUserAvatars}`;\n    }\n\n    render() {\n        const { collaborators, maxDisplayedUserAvatars, containerAttributes, onClick } = this.props;\n\n        return (\n            <PlainButton\n                className={classNames('collaborator-avatar-container', {\n                    'are-avatars-hidden': !this.isVisible(),\n                })}\n                onClick={onClick}\n                {...containerAttributes}\n                aria-hidden={this.isVisible() ? 'false' : 'true'}\n                type=\"button\"\n            >\n                <div className=\"avatars-label\">\n                    <FormattedMessage {...messages.collaboratorAvatarsLabel} />\n                </div>\n                <div className=\"avatars\">\n                    {this.isVisible() &&\n                        collaborators.slice(0, maxDisplayedUserAvatars).map((collaborator, index) => {\n                            const { collabID, imageURL, hasCustomAvatar, name } = collaborator;\n\n                            return (\n                                <CollaboratorAvatarItem\n                                    key={`collab-avatar-${collabID}`}\n                                    avatarUrl={imageURL}\n                                    hasCustomAvatar={hasCustomAvatar}\n                                    id={index}\n                                    name={name}\n                                />\n                            );\n                        })}\n                </div>\n                {this.isVisible() && this.hasAdditionalCollaborators() && (\n                    <div className=\"avatars-count\">{this.formatAdditionalCollaboratorCount()}</div>\n                )}\n            </PlainButton>\n        );\n    }\n}\n\nexport default CollaboratorAvatars;\n"],"file":"CollaboratorAvatars.js"}