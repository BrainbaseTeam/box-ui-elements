{"version":3,"sources":["../../../../src/features/shared-link-modal/stories/SharedLinkModal.stories.js"],"names":["React","IntlProvider","State","Store","boolean","Button","SharedLinkModal","notes","basic","contacts","id","name","email","type","componentStore","isOpen","accessLevel","permissionLevel","selectorOptions","closeModal","set","fakeRequest","submitting","Promise","resolve","setTimeout","isSubstring","value","searchString","toLowerCase","indexOf","getContacts","filteredContacts","filter","state","peopleWithTheLink","peopleInYourCompany","peopleInThisItem","newLevel","then","title","component","parameters"],"mappings":"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","sourcesContent":["// @flow\nimport * as React from 'react';\nimport { IntlProvider } from 'react-intl';\nimport { State, Store } from '@sambego/storybook-state';\nimport { boolean } from '@storybook/addon-knobs';\n\nimport Button from '../../../components/button/Button';\n\nimport SharedLinkModal from '../SharedLinkModal';\nimport notes from './SharedLinkModal.stories.md';\n\nexport const basic = () => {\n    const contacts = [\n        { id: 0, name: 'Jackie', email: 'j@example.com', type: 'user' },\n        { id: 1, name: 'Jeff', email: 'jt@example.com', type: 'user' },\n        { id: 2, name: 'David', email: 'dt@example.com', type: 'user' },\n        { id: 3, name: 'Yang', email: 'yz@example.com', type: 'user' },\n        { id: 4, name: 'Yong', email: 'ysu@example.com', type: 'user' },\n        { id: 5, name: 'Will', email: 'wy@example.com', type: 'user' },\n        { id: 6, name: 'Dave', email: 'd@example.com', type: 'user' },\n        { id: 7, name: 'Ke', email: 'k@example.com', type: 'user' },\n        { id: 8, name: 'Wenbo', email: 'w@example.com', type: 'user' },\n        {\n            id: 11,\n            name: 'Supersupersupersuperreallyreallyreallylongfirstname incrediblyspectacularlylonglastname',\n            email: 'Supersupersupersuperreallyreallyreallyincrediblyspectacularlylongemail@example.com',\n            type: 'user',\n        },\n    ];\n\n    const componentStore = new Store({\n        isOpen: false,\n        accessLevel: 'peopleInYourCompany',\n        permissionLevel: 'canView',\n        selectorOptions: [],\n    });\n\n    const closeModal = () => {\n        componentStore.set({\n            isOpen: false,\n        });\n    };\n\n    const fakeRequest = () => {\n        componentStore.set({ submitting: true });\n        return new Promise(resolve => {\n            setTimeout(() => {\n                componentStore.set({ submitting: false });\n                resolve();\n            }, 500);\n        });\n    };\n\n    const isSubstring = (value, searchString) => {\n        return value && value.toLowerCase().indexOf(searchString.toLowerCase()) !== -1;\n    };\n\n    const getContacts = searchString => {\n        const filteredContacts = contacts.filter(\n            ({ name, email }) => isSubstring(name, searchString) || isSubstring(email, searchString),\n        );\n\n        componentStore.set({ selectorOptions: filteredContacts });\n    };\n\n    return (\n        <State store={componentStore}>\n            {state => (\n                <IntlProvider locale=\"en\">\n                    <div>\n                        {state.isOpen && (\n                            <SharedLinkModal\n                                accessLevel={state.accessLevel}\n                                accessMenuButtonProps={{ 'data-resin-target': 'changepermissions' }}\n                                allowedAccessLevels={{\n                                    peopleWithTheLink: true,\n                                    peopleInYourCompany: true,\n                                    peopleInThisItem: true,\n                                }}\n                                canRemoveLink={boolean('canRemoveLink', true)}\n                                changeAccessLevel={newLevel =>\n                                    fakeRequest().then(() => componentStore.set({ accessLevel: newLevel }))\n                                }\n                                changePermissionLevel={newLevel =>\n                                    fakeRequest().then(() => componentStore.set({ permissionLevel: newLevel }))\n                                }\n                                contacts={state.selectorOptions}\n                                copyButtonProps={{ 'data-resin-target': 'copy' }}\n                                defaultEmailMessage=\"I want to share this file with you.\\n\\n-me\"\n                                emailMessageProps={{ 'data-resin-target': 'message' }}\n                                expiration={1509173940}\n                                getContacts={getContacts}\n                                isOpen={state.isOpen}\n                                itemName=\"somefile.gif\"\n                                itemType=\"file\"\n                                isEditAllowed={state.permissionLevel === 'canEdit'}\n                                isPreviewAllowed={state.permissionLevel === 'canView'}\n                                onRequestClose={closeModal}\n                                onSettingsClick={() => null}\n                                permissionLevel={state.permissionLevel}\n                                removeLink={() => fakeRequest().then(closeModal)}\n                                removeLinkButtonProps={{ 'data-resin-target': 'remove' }}\n                                sendEmail={() =>\n                                    fakeRequest().then(() => {\n                                        closeModal();\n                                    })\n                                }\n                                sharedLink=\"http://box.com/s/abcdefg\"\n                                submitting={state.submitting}\n                            />\n                        )}\n                        <Button\n                            onClick={() =>\n                                componentStore.set({\n                                    isOpen: true,\n                                })\n                            }\n                        >\n                            Shared Link Modal\n                        </Button>\n                    </div>\n                </IntlProvider>\n            )}\n        </State>\n    );\n};\n\nexport default {\n    title: 'Features|SharedLinkModal',\n    component: SharedLinkModal,\n    parameters: {\n        notes,\n    },\n};\n"],"file":"SharedLinkModal.stories.js"}