{"version":3,"sources":["../../../src/features/share/ShareMenu.js"],"names":["React","PropTypes","FormattedMessage","Tooltip","Menu","MenuItem","IconSharedLink","IconInviteCollaborators","IconCollaboratorsRestricted","IconSharedLinkRestricted","messages","OWNER_COOWNER_ONLY","INSUFFICIENT_PERMISSIONS","ShareMenu","canInvite","canShare","className","getSharedLinkProps","inviteCollabsProps","inviteRestrictionCode","isDownloadAllowed","isPreviewAllowed","onGetSharedLinkSelect","onInviteCollabSelect","rest","inviteCollabsOption","inviteCollabs","editAndComment","inviteCollabTooltip","ownerCoownerOnlyTooltip","insufficientPermissionsTooltip","sharedLinkPermissions","viewAndDownload","viewOnly","downloadOnly","shortcutOnly","getSharedLink","propTypes","bool","isRequired","string","object","oneOf","func"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport { FormattedMessage } from 'react-intl';\n\nimport Tooltip from '../../components/tooltip';\nimport { Menu, MenuItem } from '../../components/menu';\nimport IconSharedLink from '../../icons/general/IconSharedLink';\nimport IconInviteCollaborators from '../../icons/general/IconInviteCollaborators';\nimport IconCollaboratorsRestricted from '../../icons/general/IconCollaboratorsRestricted';\nimport IconSharedLinkRestricted from '../../icons/general/IconSharedLinkRestricted';\n\nimport messages from './messages';\n\nimport './ShareMenu.scss';\n\nconst OWNER_COOWNER_ONLY = 'owner_coowner_only';\nconst INSUFFICIENT_PERMISSIONS = 'insufficient_permissions';\n\nconst ShareMenu = ({\n    canInvite,\n    canShare,\n    className = '',\n    getSharedLinkProps = {},\n    inviteCollabsProps = {},\n    inviteRestrictionCode,\n    isDownloadAllowed,\n    isPreviewAllowed,\n    onGetSharedLinkSelect,\n    onInviteCollabSelect,\n    ...rest\n}) => {\n    const inviteCollabsOption = (\n        <MenuItem\n            className=\"invite-collaborators\"\n            isDisabled={!canInvite}\n            onClick={onInviteCollabSelect}\n            {...inviteCollabsProps}\n        >\n            {canInvite ? <IconInviteCollaborators /> : <IconCollaboratorsRestricted />}\n            <div>\n                <div>\n                    <FormattedMessage {...messages.inviteCollabs} />\n                </div>\n                <div className=\"share-option-description\">\n                    <FormattedMessage {...messages.editAndComment} />\n                </div>\n            </div>\n        </MenuItem>\n    );\n\n    const inviteCollabTooltip =\n        inviteRestrictionCode === OWNER_COOWNER_ONLY ? (\n            <FormattedMessage {...messages.ownerCoownerOnlyTooltip} />\n        ) : (\n            <FormattedMessage {...messages.insufficientPermissionsTooltip} />\n        );\n\n    let sharedLinkPermissions;\n\n    if (isDownloadAllowed && isPreviewAllowed) {\n        sharedLinkPermissions = <FormattedMessage {...messages.viewAndDownload} />;\n    } else if (isPreviewAllowed) {\n        sharedLinkPermissions = <FormattedMessage {...messages.viewOnly} />;\n    } else if (isDownloadAllowed) {\n        sharedLinkPermissions = <FormattedMessage {...messages.downloadOnly} />;\n    } else {\n        sharedLinkPermissions = <FormattedMessage {...messages.shortcutOnly} />;\n    }\n\n    return (\n        <Menu className={`share-menu ${className}`} {...rest}>\n            {canInvite ? (\n                inviteCollabsOption\n            ) : (\n                <Tooltip position=\"middle-left\" text={inviteCollabTooltip}>\n                    {inviteCollabsOption}\n                </Tooltip>\n            )}\n            <MenuItem\n                className=\"get-shared-link\"\n                isDisabled={!canShare}\n                onClick={onGetSharedLinkSelect}\n                {...getSharedLinkProps}\n            >\n                {canShare ? <IconSharedLink /> : <IconSharedLinkRestricted />}\n                <div>\n                    <div>\n                        <FormattedMessage {...messages.getSharedLink} />\n                    </div>\n                    <div className=\"share-option-description\">{sharedLinkPermissions}</div>\n                </div>\n            </MenuItem>\n        </Menu>\n    );\n};\n\nShareMenu.propTypes = {\n    canInvite: PropTypes.bool.isRequired,\n    canShare: PropTypes.bool.isRequired,\n    className: PropTypes.string,\n    getSharedLinkProps: PropTypes.object,\n    inviteCollabsProps: PropTypes.object,\n    inviteRestrictionCode: PropTypes.oneOf([INSUFFICIENT_PERMISSIONS, OWNER_COOWNER_ONLY]),\n    isDownloadAllowed: PropTypes.bool.isRequired,\n    isPreviewAllowed: PropTypes.bool.isRequired,\n    onGetSharedLinkSelect: PropTypes.func.isRequired,\n    onInviteCollabSelect: PropTypes.func.isRequired,\n};\n\nexport { OWNER_COOWNER_ONLY, INSUFFICIENT_PERMISSIONS };\nexport default ShareMenu;\n"],"file":"ShareMenu.js"}