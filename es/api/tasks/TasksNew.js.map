{"version":3,"sources":["../../../src/api/tasks/TasksNew.js"],"names":["TasksBase","ERROR_CODE_CREATE_TASK","ERROR_CODE_UPDATE_TASK","ERROR_CODE_DELETE_TASK","ERROR_CODE_FETCH_TASKS","API_PAGE_LIMIT","TasksNew","id","getBaseApiUrl","errorCallback","file","successCallback","task","errorCode","post","url","getUrlForTaskCreate","data","put","getUrlForTask","delete","get","getUrlForFileTasks"],"mappings":"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","sourcesContent":["/**\n * @flow\n * @file Helper for the box Tasks API\n * @author Box\n */\n\nimport TasksBase from './TasksBase';\nimport {\n    ERROR_CODE_CREATE_TASK,\n    ERROR_CODE_UPDATE_TASK,\n    ERROR_CODE_DELETE_TASK,\n    ERROR_CODE_FETCH_TASKS,\n    API_PAGE_LIMIT,\n} from '../../constants';\nimport type { TaskUpdatePayload } from '../../common/types/tasks';\n\nclass TasksNew extends TasksBase {\n    getUrlForFileTasks(id: string): string {\n        return `${this.getBaseApiUrl()}/undoc/files/${id}/linked_tasks?limit=${API_PAGE_LIMIT}`;\n    }\n\n    getUrlForTaskCreate(): string {\n        return `${this.getBaseApiUrl()}/undoc/tasks`;\n    }\n\n    getUrlForTask(id: string): string {\n        return `${this.getBaseApiUrl()}/undoc/tasks/${id}`;\n    }\n\n    createTask({\n        errorCallback,\n        file,\n        successCallback,\n        task,\n    }: {\n        errorCallback: (e: ElementsXhrError, code: string) => void,\n        file: BoxItem,\n        successCallback: Function,\n        task: {}, // Partial task object\n    }): void {\n        this.errorCode = ERROR_CODE_CREATE_TASK;\n\n        this.post({\n            id: file.id,\n            url: this.getUrlForTaskCreate(),\n            data: { data: { ...task } },\n            successCallback,\n            errorCallback,\n        });\n    }\n\n    updateTask({\n        errorCallback,\n        file,\n        successCallback,\n        task,\n    }: {\n        errorCallback: ElementsErrorCallback,\n        file: BoxItem,\n        successCallback: Function,\n        task: TaskUpdatePayload,\n    }): void {\n        this.errorCode = ERROR_CODE_UPDATE_TASK;\n\n        this.put({\n            id: file.id,\n            url: this.getUrlForTask(task.id),\n            data: { data: { ...task } },\n            successCallback,\n            errorCallback,\n        });\n    }\n\n    deleteTask({\n        errorCallback,\n        file,\n        successCallback,\n        task,\n    }: {\n        errorCallback: ElementsErrorCallback,\n        file: BoxItem,\n        successCallback: Function,\n        task: { id: string },\n    }): void {\n        this.errorCode = ERROR_CODE_DELETE_TASK;\n\n        this.delete({\n            id: file.id,\n            url: this.getUrlForTask(task.id),\n            successCallback,\n            errorCallback,\n        });\n    }\n\n    getTasksForFile({\n        errorCallback,\n        file,\n        successCallback,\n    }: {\n        errorCallback: ElementsErrorCallback,\n        file: { id: string },\n        successCallback: Function,\n    }): void {\n        this.errorCode = ERROR_CODE_FETCH_TASKS;\n        this.get({\n            id: file.id,\n            url: this.getUrlForFileTasks(file.id),\n            successCallback,\n            errorCallback,\n        });\n    }\n\n    getTask({\n        errorCallback,\n        file,\n        id,\n        successCallback,\n    }: {\n        errorCallback: ElementsErrorCallback,\n        file: { id: string },\n        id: string,\n        successCallback: Function,\n    }): void {\n        this.errorCode = ERROR_CODE_FETCH_TASKS;\n        this.get({\n            id: file.id,\n            url: this.getUrlForTask(id),\n            successCallback,\n            errorCallback,\n        });\n    }\n}\n\nexport default TasksNew;\n"],"file":"TasksNew.js"}