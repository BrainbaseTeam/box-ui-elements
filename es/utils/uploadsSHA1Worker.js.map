{"version":3,"sources":["../../src/utils/uploadsSHA1Worker.js"],"names":["RushaCore","stdlib","foreign","heap","H","Int32Array","hash","k","x","i","j","y0","z0","y1","z1","y2","z2","y3","z3","y4","z4","t0","t1","RushaString","createWorker","workerBase","fileSha1","Rusha","resetState","expectedOffset","self","onmessage","event","data","part","fileSize","partContents","startTimestamp","Date","now","offset","Error","append","postMessage","type","duration","size","end","sha1","err","message","name","workerCodeBlob","Blob","toString","workerUrl","window","URL","webkitURL","createObjectURL","worker","Worker","oldTerminate","terminate","revokeObjectURL"],"mappings":"AAAA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,SAAT,CAAmBC,MAAnB,EAA2BC,OAA3B,EAAoCC,IAApC,EAA0C;AACtC;;AACA,MAAIC,CAAC,GAAG,IAAIH,MAAM,CAACI,UAAX,CAAsBF,IAAtB,CAAR;;AACA,WAASG,IAAT,CAAcC,CAAd,EAAiBC,CAAjB,EAAoB;AAChB;AACAD,IAAAA,CAAC,GAAGA,CAAC,GAAG,CAAR;AACAC,IAAAA,CAAC,GAAGA,CAAC,GAAG,CAAR;AACA,QAAIC,CAAC,GAAG,CAAR;AAAA,QACIC,CAAC,GAAG,CADR;AAAA,QAEIC,EAAE,GAAG,CAFT;AAAA,QAGIC,EAAE,GAAG,CAHT;AAAA,QAIIC,EAAE,GAAG,CAJT;AAAA,QAKIC,EAAE,GAAG,CALT;AAAA,QAMIC,EAAE,GAAG,CANT;AAAA,QAOIC,EAAE,GAAG,CAPT;AAAA,QAQIC,EAAE,GAAG,CART;AAAA,QASIC,EAAE,GAAG,CATT;AAAA,QAUIC,EAAE,GAAG,CAVT;AAAA,QAWIC,EAAE,GAAG,CAXT;AAAA,QAYIC,EAAE,GAAG,CAZT;AAAA,QAaIC,EAAE,GAAG,CAbT;AAcAX,IAAAA,EAAE,GAAGP,CAAC,CAAEI,CAAC,GAAG,GAAL,IAAa,CAAd,CAAD,GAAoB,CAAzB;AACAK,IAAAA,EAAE,GAAGT,CAAC,CAAEI,CAAC,GAAG,GAAL,IAAa,CAAd,CAAD,GAAoB,CAAzB;AACAO,IAAAA,EAAE,GAAGX,CAAC,CAAEI,CAAC,GAAG,GAAL,IAAa,CAAd,CAAD,GAAoB,CAAzB;AACAS,IAAAA,EAAE,GAAGb,CAAC,CAAEI,CAAC,GAAG,GAAL,IAAa,CAAd,CAAD,GAAoB,CAAzB;AACAW,IAAAA,EAAE,GAAGf,CAAC,CAAEI,CAAC,GAAG,GAAL,IAAa,CAAd,CAAD,GAAoB,CAAzB;;AACA,SAAKC,CAAC,GAAG,CAAT,EAAY,CAACA,CAAC,GAAG,CAAL,KAAWF,CAAC,GAAG,CAAf,CAAZ,EAA+BE,CAAC,GAAIA,CAAC,GAAG,EAAL,GAAW,CAA9C,EAAiD;AAC7CG,MAAAA,EAAE,GAAGD,EAAL;AACAG,MAAAA,EAAE,GAAGD,EAAL;AACAG,MAAAA,EAAE,GAAGD,EAAL;AACAG,MAAAA,EAAE,GAAGD,EAAL;AACAG,MAAAA,EAAE,GAAGD,EAAL;;AACA,WAAKT,CAAC,GAAG,CAAT,EAAY,CAACA,CAAC,GAAG,CAAL,IAAU,EAAtB,EAA0BA,CAAC,GAAIA,CAAC,GAAG,CAAL,GAAU,CAAxC,EAA2C;AACvCY,QAAAA,EAAE,GAAGlB,CAAC,CAAEK,CAAC,GAAGC,CAAL,IAAW,CAAZ,CAAD,GAAkB,CAAvB;AACAW,QAAAA,EAAE,GACG,CAAE,CAAEV,EAAE,IAAI,CAAP,GAAaA,EAAE,KAAK,EAArB,KAA8BE,EAAE,GAAGE,EAAN,GAAa,CAACF,EAAD,GAAMI,EAAhD,CAAD,GAAyD,CAA1D,KACK,CAAEK,EAAE,GAAGH,EAAN,GAAY,CAAb,IAAkB,UAAnB,GAAiC,CADrC,CAAD,GAEA,CAHJ;AAIAA,QAAAA,EAAE,GAAGF,EAAL;AACAA,QAAAA,EAAE,GAAGF,EAAL;AACAA,QAAAA,EAAE,GAAIF,EAAE,IAAI,EAAP,GAAcA,EAAE,KAAK,CAA1B;AACAA,QAAAA,EAAE,GAAGF,EAAL;AACAA,QAAAA,EAAE,GAAGU,EAAL;AACAjB,QAAAA,CAAC,CAAEG,CAAC,GAAGG,CAAL,IAAW,CAAZ,CAAD,GAAkBY,EAAlB;AACH;;AACD,WAAKZ,CAAC,GAAIH,CAAC,GAAG,EAAL,GAAW,CAApB,EAAuB,CAACG,CAAC,GAAG,CAAL,KAAYH,CAAC,GAAG,EAAL,GAAW,CAAtB,CAAvB,EAAiDG,CAAC,GAAIA,CAAC,GAAG,CAAL,GAAU,CAA/D,EAAkE;AAC9DY,QAAAA,EAAE,GACG,CAAClB,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAAD,GAAmBN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAApB,GAAsCN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAAvC,GAAyDN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAA3D,KAA+E,CAAhF,GACC,CAACN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAAD,GAAmBN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAApB,GAAsCN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAAvC,GAAyDN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAA3D,MAAgF,EAFrF;AAGAW,QAAAA,EAAE,GACG,CAAE,CAAEV,EAAE,IAAI,CAAP,GAAaA,EAAE,KAAK,EAArB,KAA8BE,EAAE,GAAGE,EAAN,GAAa,CAACF,EAAD,GAAMI,EAAhD,CAAD,GAAyD,CAA1D,KACK,CAAEK,EAAE,GAAGH,EAAN,GAAY,CAAb,IAAkB,UAAnB,GAAiC,CADrC,CAAD,GAEA,CAHJ;AAIAA,QAAAA,EAAE,GAAGF,EAAL;AACAA,QAAAA,EAAE,GAAGF,EAAL;AACAA,QAAAA,EAAE,GAAIF,EAAE,IAAI,EAAP,GAAcA,EAAE,KAAK,CAA1B;AACAA,QAAAA,EAAE,GAAGF,EAAL;AACAA,QAAAA,EAAE,GAAGU,EAAL;AACAjB,QAAAA,CAAC,CAACM,CAAC,IAAI,CAAN,CAAD,GAAYY,EAAZ;AACH;;AACD,WAAKZ,CAAC,GAAIH,CAAC,GAAG,EAAL,GAAW,CAApB,EAAuB,CAACG,CAAC,GAAG,CAAL,KAAYH,CAAC,GAAG,GAAL,GAAY,CAAvB,CAAvB,EAAkDG,CAAC,GAAIA,CAAC,GAAG,CAAL,GAAU,CAAhE,EAAmE;AAC/DY,QAAAA,EAAE,GACG,CAAClB,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAAD,GAAmBN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAApB,GAAsCN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAAvC,GAAyDN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAA3D,KAA+E,CAAhF,GACC,CAACN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAAD,GAAmBN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAApB,GAAsCN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAAvC,GAAyDN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAA3D,MAAgF,EAFrF;AAGAW,QAAAA,EAAE,GAAI,CAAE,CAAEV,EAAE,IAAI,CAAP,GAAaA,EAAE,KAAK,EAArB,KAA6BE,EAAE,GAAGE,EAAL,GAAUE,EAAvC,CAAD,GAA+C,CAAhD,KAAuD,CAAEK,EAAE,GAAGH,EAAN,GAAY,CAAb,IAAkB,UAAnB,GAAiC,CAAvF,CAAD,GAA8F,CAAnG;AACAA,QAAAA,EAAE,GAAGF,EAAL;AACAA,QAAAA,EAAE,GAAGF,EAAL;AACAA,QAAAA,EAAE,GAAIF,EAAE,IAAI,EAAP,GAAcA,EAAE,KAAK,CAA1B;AACAA,QAAAA,EAAE,GAAGF,EAAL;AACAA,QAAAA,EAAE,GAAGU,EAAL;AACAjB,QAAAA,CAAC,CAACM,CAAC,IAAI,CAAN,CAAD,GAAYY,EAAZ;AACH;;AACD,WAAKZ,CAAC,GAAIH,CAAC,GAAG,GAAL,GAAY,CAArB,EAAwB,CAACG,CAAC,GAAG,CAAL,KAAYH,CAAC,GAAG,GAAL,GAAY,CAAvB,CAAxB,EAAmDG,CAAC,GAAIA,CAAC,GAAG,CAAL,GAAU,CAAjE,EAAoE;AAChEY,QAAAA,EAAE,GACG,CAAClB,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAAD,GAAmBN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAApB,GAAsCN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAAvC,GAAyDN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAA3D,KAA+E,CAAhF,GACC,CAACN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAAD,GAAmBN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAApB,GAAsCN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAAvC,GAAyDN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAA3D,MAAgF,EAFrF;AAGAW,QAAAA,EAAE,GACG,CAAE,CAAEV,EAAE,IAAI,CAAP,GAAaA,EAAE,KAAK,EAArB,KAA8BE,EAAE,GAAGE,EAAN,GAAaF,EAAE,GAAGI,EAAlB,GAAyBF,EAAE,GAAGE,EAA3D,CAAD,GAAoE,CAArE,KACK,CAAEK,EAAE,GAAGH,EAAN,GAAY,CAAb,IAAkB,UAAnB,GAAiC,CADrC,CAAD,GAEA,CAHJ;AAIAA,QAAAA,EAAE,GAAGF,EAAL;AACAA,QAAAA,EAAE,GAAGF,EAAL;AACAA,QAAAA,EAAE,GAAIF,EAAE,IAAI,EAAP,GAAcA,EAAE,KAAK,CAA1B;AACAA,QAAAA,EAAE,GAAGF,EAAL;AACAA,QAAAA,EAAE,GAAGU,EAAL;AACAjB,QAAAA,CAAC,CAACM,CAAC,IAAI,CAAN,CAAD,GAAYY,EAAZ;AACH;;AACD,WAAKZ,CAAC,GAAIH,CAAC,GAAG,GAAL,GAAY,CAArB,EAAwB,CAACG,CAAC,GAAG,CAAL,KAAYH,CAAC,GAAG,GAAL,GAAY,CAAvB,CAAxB,EAAmDG,CAAC,GAAIA,CAAC,GAAG,CAAL,GAAU,CAAjE,EAAoE;AAChEY,QAAAA,EAAE,GACG,CAAClB,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAAD,GAAmBN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAApB,GAAsCN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAAvC,GAAyDN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAA3D,KAA+E,CAAhF,GACC,CAACN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAAD,GAAmBN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAApB,GAAsCN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAAvC,GAAyDN,CAAC,CAAEM,CAAC,GAAG,EAAL,IAAY,CAAb,CAA3D,MAAgF,EAFrF;AAGAW,QAAAA,EAAE,GAAI,CAAE,CAAEV,EAAE,IAAI,CAAP,GAAaA,EAAE,KAAK,EAArB,KAA6BE,EAAE,GAAGE,EAAL,GAAUE,EAAvC,CAAD,GAA+C,CAAhD,KAAuD,CAAEK,EAAE,GAAGH,EAAN,GAAY,CAAb,IAAkB,SAAnB,GAAgC,CAAtF,CAAD,GAA6F,CAAlG;AACAA,QAAAA,EAAE,GAAGF,EAAL;AACAA,QAAAA,EAAE,GAAGF,EAAL;AACAA,QAAAA,EAAE,GAAIF,EAAE,IAAI,EAAP,GAAcA,EAAE,KAAK,CAA1B;AACAA,QAAAA,EAAE,GAAGF,EAAL;AACAA,QAAAA,EAAE,GAAGU,EAAL;AACAjB,QAAAA,CAAC,CAACM,CAAC,IAAI,CAAN,CAAD,GAAYY,EAAZ;AACH;;AACDX,MAAAA,EAAE,GAAIA,EAAE,GAAGC,EAAN,GAAY,CAAjB;AACAC,MAAAA,EAAE,GAAIA,EAAE,GAAGC,EAAN,GAAY,CAAjB;AACAC,MAAAA,EAAE,GAAIA,EAAE,GAAGC,EAAN,GAAY,CAAjB;AACAC,MAAAA,EAAE,GAAIA,EAAE,GAAGC,EAAN,GAAY,CAAjB;AACAC,MAAAA,EAAE,GAAIA,EAAE,GAAGC,EAAN,GAAY,CAAjB;AACH;;AACDhB,IAAAA,CAAC,CAAEI,CAAC,GAAG,GAAL,IAAa,CAAd,CAAD,GAAoBG,EAApB;AACAP,IAAAA,CAAC,CAAEI,CAAC,GAAG,GAAL,IAAa,CAAd,CAAD,GAAoBK,EAApB;AACAT,IAAAA,CAAC,CAAEI,CAAC,GAAG,GAAL,IAAa,CAAd,CAAD,GAAoBO,EAApB;AACAX,IAAAA,CAAC,CAAEI,CAAC,GAAG,GAAL,IAAa,CAAd,CAAD,GAAoBS,EAApB;AACAb,IAAAA,CAAC,CAAEI,CAAC,GAAG,GAAL,IAAa,CAAd,CAAD,GAAoBW,EAApB;AACH;;AACD,SAAO;AAAEb,IAAAA,IAAI,EAAEA;AAAR,GAAP;AACH,C,CACD;;;AACA,IAAMiB,WAAW,kmJAAjB;AAEA;;;;AAGA,IAAMC,YAAY,GAAG,SAAfA,YAAe,GAAM;AACvB;;;;;;AAMA,WAASC,UAAT,GAAsB;AAClB,QAAMC,QAAQ,GAAG,IAAIC,KAAJ,EAAjB;AACAD,IAAAA,QAAQ,CAACE,UAAT;AACA,QAAIC,cAAc,GAAG,CAArB,CAHkB,CAKlB;AACA;;AACAC,IAAAA,IAAI,CAACC,SAAL,GAAiB,UAACC,KAAD,EAAW;AAAA,UAChBC,IADgB,GACPD,KADO,CAChBC,IADgB;AAAA,UAEhBC,IAFgB,GAEiBD,IAFjB,CAEhBC,IAFgB;AAAA,UAEVC,QAFU,GAEiBF,IAFjB,CAEVE,QAFU;AAAA,UAEAC,YAFA,GAEiBH,IAFjB,CAEAG,YAFA;AAIxB,UAAMC,cAAc,GAAGC,IAAI,CAACC,GAAL,EAAvB;;AAEA,UAAI;AACA;AACA,YAAIL,IAAI,CAACM,MAAL,KAAgBX,cAApB,EAAoC;AAChC,gBAAM,IAAIY,KAAJ,CAAU,oCAAV,CAAN;AACH;;AACDf,QAAAA,QAAQ,CAACgB,MAAT,CAAgBN,YAAhB,EALA,CAOA;AACA;AACA;;AACAN,QAAAA,IAAI,CAACa,WAAL,CACI;AACIC,UAAAA,IAAI,EAAE,UADV;AAEIV,UAAAA,IAAI,EAAED,IAAI,CAACC,IAFf;AAGIW,UAAAA,QAAQ,EAAEP,IAAI,CAACC,GAAL,KAAaF,cAH3B;AAIID,UAAAA,YAAY,EAAZA;AAJJ,SADJ,EAOI,CAACA,YAAD,CAPJ;AASAP,QAAAA,cAAc,IAAIK,IAAI,CAACY,IAAvB;;AACA,YAAIZ,IAAI,CAACM,MAAL,GAAcN,IAAI,CAACY,IAAnB,KAA4BX,QAAhC,EAA0C;AACtC,cAAM7B,IAAI,GAAGoB,QAAQ,CAACqB,GAAT,EAAb;AACAjB,UAAAA,IAAI,CAACa,WAAL,CAAiB;AAAEC,YAAAA,IAAI,EAAE,MAAR;AAAgBI,YAAAA,IAAI,EAAE1C;AAAtB,WAAjB;AACH;AACJ,OAxBD,CAwBE,OAAO2C,GAAP,EAAY;AACV,YAAMC,OAAO,GAAG;AACZN,UAAAA,IAAI,EAAE,OADM;AAEZO,UAAAA,IAAI,EAAEF,GAAG,CAACE,IAFE;AAGZD,UAAAA,OAAO,EAAED,GAAG,CAACC,OAHD;AAIZhB,UAAAA,IAAI,EAAJA;AAJY,SAAhB;AAMAJ,QAAAA,IAAI,CAACa,WAAL,CAAiBO,OAAjB;AACH;AACJ,KAvCD;AAwCH;AACD;;;AAEA,MAAME,cAAc,GAAG,IAAIC,IAAJ,CACnB,CACI;AADJ,8BAEyBrD,SAAS,CAACsD,QAAV,EAFzB,GAGI,KAHJ,EAII/B,WAJJ,EAKI,KALJ,EAMI,oBANJ,EAOIE,UAAU,CAAC6B,QAAX,EAPJ,EAQI,KARJ,EASI,gBATJ,CASsB;AAClB;AAVJ,GADmB,EAanB;AAAEV,IAAAA,IAAI,EAAE;AAAR,GAbmB,CAAvB;AAeA,MAAMW,SAAS,GAAG,CAACC,MAAM,CAACC,GAAP,IAAcD,MAAM,CAACE,SAAtB,EAAiCC,eAAjC,CAAiDP,cAAjD,CAAlB;AACA,MAAMQ,MAAM,GAAG,IAAIC,MAAJ,CAAWN,SAAX,CAAf;AACAK,EAAAA,MAAM,CAACE,YAAP,GAAsBF,MAAM,CAACG,SAA7B;;AACAH,EAAAA,MAAM,CAACG,SAAP,GAAmB,YAAM;AACrB,KAACP,MAAM,CAACC,GAAP,IAAcD,MAAM,CAACE,SAAtB,EAAiCM,eAAjC,CAAiDT,SAAjD;AACAK,IAAAA,MAAM,CAACE,YAAP;AACH,GAHD;;AAKA,SAAOF,MAAP;AACH,CAjFD;;AAmFA,eAAepC,YAAf","sourcesContent":["/* eslint-disable */\n/*\n * Rusha, a JavaScript implementation of the Secure Hash Algorithm, SHA-1,\n * as defined in FIPS PUB 180-1, tuned for high performance with large inputs.\n * (http://github.com/srijs/rusha)\n *\n * Inspired by Paul Johnstons implementation (http://pajhome.org.uk/crypt/md5).\n *\n * Copyright (c) 2013 Sam Rijs (http://awesam.de).\n * Released under the terms of the MIT license as follows:\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n\n// The low-level RushCore module provides the heart of Rusha,\n// a high-speed sha1 implementation working on an Int32Array heap.\n// At first glance, the implementation seems complicated, however\n// with the SHA1 spec at hand, it is obvious this almost a textbook\n// implementation that has a few functions hand-inlined and a few loops\n// hand-unrolled.\nfunction RushaCore(stdlib, foreign, heap) {\n    'use asm';\n    var H = new stdlib.Int32Array(heap);\n    function hash(k, x) {\n        // k in bytes\n        k = k | 0;\n        x = x | 0;\n        var i = 0,\n            j = 0,\n            y0 = 0,\n            z0 = 0,\n            y1 = 0,\n            z1 = 0,\n            y2 = 0,\n            z2 = 0,\n            y3 = 0,\n            z3 = 0,\n            y4 = 0,\n            z4 = 0,\n            t0 = 0,\n            t1 = 0;\n        y0 = H[(x + 320) >> 2] | 0;\n        y1 = H[(x + 324) >> 2] | 0;\n        y2 = H[(x + 328) >> 2] | 0;\n        y3 = H[(x + 332) >> 2] | 0;\n        y4 = H[(x + 336) >> 2] | 0;\n        for (i = 0; (i | 0) < (k | 0); i = (i + 64) | 0) {\n            z0 = y0;\n            z1 = y1;\n            z2 = y2;\n            z3 = y3;\n            z4 = y4;\n            for (j = 0; (j | 0) < 64; j = (j + 4) | 0) {\n                t1 = H[(i + j) >> 2] | 0;\n                t0 =\n                    (((((y0 << 5) | (y0 >>> 27)) + ((y1 & y2) | (~y1 & y3))) | 0) +\n                        ((((t1 + y4) | 0) + 1518500249) | 0)) |\n                    0;\n                y4 = y3;\n                y3 = y2;\n                y2 = (y1 << 30) | (y1 >>> 2);\n                y1 = y0;\n                y0 = t0;\n                H[(k + j) >> 2] = t1;\n            }\n            for (j = (k + 64) | 0; (j | 0) < ((k + 80) | 0); j = (j + 4) | 0) {\n                t1 =\n                    ((H[(j - 12) >> 2] ^ H[(j - 32) >> 2] ^ H[(j - 56) >> 2] ^ H[(j - 64) >> 2]) << 1) |\n                    ((H[(j - 12) >> 2] ^ H[(j - 32) >> 2] ^ H[(j - 56) >> 2] ^ H[(j - 64) >> 2]) >>> 31);\n                t0 =\n                    (((((y0 << 5) | (y0 >>> 27)) + ((y1 & y2) | (~y1 & y3))) | 0) +\n                        ((((t1 + y4) | 0) + 1518500249) | 0)) |\n                    0;\n                y4 = y3;\n                y3 = y2;\n                y2 = (y1 << 30) | (y1 >>> 2);\n                y1 = y0;\n                y0 = t0;\n                H[j >> 2] = t1;\n            }\n            for (j = (k + 80) | 0; (j | 0) < ((k + 160) | 0); j = (j + 4) | 0) {\n                t1 =\n                    ((H[(j - 12) >> 2] ^ H[(j - 32) >> 2] ^ H[(j - 56) >> 2] ^ H[(j - 64) >> 2]) << 1) |\n                    ((H[(j - 12) >> 2] ^ H[(j - 32) >> 2] ^ H[(j - 56) >> 2] ^ H[(j - 64) >> 2]) >>> 31);\n                t0 = (((((y0 << 5) | (y0 >>> 27)) + (y1 ^ y2 ^ y3)) | 0) + ((((t1 + y4) | 0) + 1859775393) | 0)) | 0;\n                y4 = y3;\n                y3 = y2;\n                y2 = (y1 << 30) | (y1 >>> 2);\n                y1 = y0;\n                y0 = t0;\n                H[j >> 2] = t1;\n            }\n            for (j = (k + 160) | 0; (j | 0) < ((k + 240) | 0); j = (j + 4) | 0) {\n                t1 =\n                    ((H[(j - 12) >> 2] ^ H[(j - 32) >> 2] ^ H[(j - 56) >> 2] ^ H[(j - 64) >> 2]) << 1) |\n                    ((H[(j - 12) >> 2] ^ H[(j - 32) >> 2] ^ H[(j - 56) >> 2] ^ H[(j - 64) >> 2]) >>> 31);\n                t0 =\n                    (((((y0 << 5) | (y0 >>> 27)) + ((y1 & y2) | (y1 & y3) | (y2 & y3))) | 0) +\n                        ((((t1 + y4) | 0) - 1894007588) | 0)) |\n                    0;\n                y4 = y3;\n                y3 = y2;\n                y2 = (y1 << 30) | (y1 >>> 2);\n                y1 = y0;\n                y0 = t0;\n                H[j >> 2] = t1;\n            }\n            for (j = (k + 240) | 0; (j | 0) < ((k + 320) | 0); j = (j + 4) | 0) {\n                t1 =\n                    ((H[(j - 12) >> 2] ^ H[(j - 32) >> 2] ^ H[(j - 56) >> 2] ^ H[(j - 64) >> 2]) << 1) |\n                    ((H[(j - 12) >> 2] ^ H[(j - 32) >> 2] ^ H[(j - 56) >> 2] ^ H[(j - 64) >> 2]) >>> 31);\n                t0 = (((((y0 << 5) | (y0 >>> 27)) + (y1 ^ y2 ^ y3)) | 0) + ((((t1 + y4) | 0) - 899497514) | 0)) | 0;\n                y4 = y3;\n                y3 = y2;\n                y2 = (y1 << 30) | (y1 >>> 2);\n                y1 = y0;\n                y0 = t0;\n                H[j >> 2] = t1;\n            }\n            y0 = (y0 + z0) | 0;\n            y1 = (y1 + z1) | 0;\n            y2 = (y2 + z2) | 0;\n            y3 = (y3 + z3) | 0;\n            y4 = (y4 + z4) | 0;\n        }\n        H[(x + 320) >> 2] = y0;\n        H[(x + 324) >> 2] = y1;\n        H[(x + 328) >> 2] = y2;\n        H[(x + 332) >> 2] = y3;\n        H[(x + 336) >> 2] = y4;\n    }\n    return { hash: hash };\n}\n// @NOTE: This function shouldn't be processed by UglifyJsPlugin, related to https://github.com/mishoo/UglifyJS2/issues/2011\nconst RushaString = `function Rusha(e){for(var r=function(e){if(\"string\"==typeof e)return\"string\";if(e instanceof Array)return\"array\";if(\"undefined\"!=typeof global&&global.Buffer&&global.Buffer.isBuffer(e))return\"buffer\";if(e instanceof ArrayBuffer)return\"arraybuffer\";if(e.buffer instanceof ArrayBuffer)return\"view\";if(e instanceof Blob)return\"blob\";throw new Error(\"Unsupported data type.\")},n={fill:0},t=function(e){for(e+=9;e%64>0;e+=1);return e},a=function(e,r,n,t,a){var f,s=this,i=a%4,h=(t+i)%4,u=t-h;switch(i){case 0:e[a]=s[n+3];case 1:e[a+1-(i<<1)|0]=s[n+2];case 2:e[a+2-(i<<1)|0]=s[n+1];case 3:e[a+3-(i<<1)|0]=s[n]}if(!(t<h+i)){for(f=4-i;f<u;f=f+4|0)r[a+f>>2|0]=s[n+f]<<24|s[n+f+1]<<16|s[n+f+2]<<8|s[n+f+3];switch(h){case 3:e[a+u+1|0]=s[n+u+2];case 2:e[a+u+2|0]=s[n+u+1];case 1:e[a+u+3|0]=s[n+u]}}},f=function(e){switch(r(e)){case\"string\":return function(e,r,n,t,a){var f,s=this,i=a%4,h=(t+i)%4,u=t-h;switch(i){case 0:e[a]=s.charCodeAt(n+3);case 1:e[a+1-(i<<1)|0]=s.charCodeAt(n+2);case 2:e[a+2-(i<<1)|0]=s.charCodeAt(n+1);case 3:e[a+3-(i<<1)|0]=s.charCodeAt(n)}if(!(t<h+i)){for(f=4-i;f<u;f=f+4|0)r[a+f>>2]=s.charCodeAt(n+f)<<24|s.charCodeAt(n+f+1)<<16|s.charCodeAt(n+f+2)<<8|s.charCodeAt(n+f+3);switch(h){case 3:e[a+u+1|0]=s.charCodeAt(n+u+2);case 2:e[a+u+2|0]=s.charCodeAt(n+u+1);case 1:e[a+u+3|0]=s.charCodeAt(n+u)}}}.bind(e);case\"array\":case\"buffer\":return a.bind(e);case\"arraybuffer\":return a.bind(new Uint8Array(e));case\"view\":return a.bind(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));case\"blob\":return function(e,r,n,t,a){var f,s=a%4,i=(t+s)%4,h=t-i,u=new Uint8Array(reader.readAsArrayBuffer(this.slice(n,n+t)));switch(s){case 0:e[a]=u[3];case 1:e[a+1-(s<<1)|0]=u[2];case 2:e[a+2-(s<<1)|0]=u[1];case 3:e[a+3-(s<<1)|0]=u[0]}if(!(t<i+s)){for(f=4-s;f<h;f=f+4|0)r[a+f>>2|0]=u[f]<<24|u[f+1]<<16|u[f+2]<<8|u[f+3];switch(i){case 3:e[a+h+1|0]=u[h+2];case 2:e[a+h+2|0]=u[h+1];case 1:e[a+h+3|0]=u[h]}}}.bind(e)}},s=new Array(256),i=0;i<256;i++)s[i]=(i<16?\"0\":\"\")+i.toString(16);var h=function(e){for(var r=new Uint8Array(e),n=new Array(e.byteLength),t=0;t<n.length;t++)n[t]=s[r[t]];return n.join(\"\")};!function(e){if(e%64>0)throw new Error(\"Chunk size must be a multiple of 128 bit\");n.offset=0,n.maxChunkLen=e,n.padMaxChunkLen=t(e),n.heap=new ArrayBuffer(function(e){var r;if(e<=65536)return 65536;if(e<16777216)for(r=1;r<e;r<<=1);else for(r=16777216;r<e;r+=16777216);return r}(n.padMaxChunkLen+320+20)),n.h32=new Int32Array(n.heap),n.h8=new Int8Array(n.heap),n.core=new RushaCore({Int32Array:Int32Array,DataView:DataView},{},n.heap),n.buffer=null}(e||65536);var u=function(e,r){n.offset=0;var t=new Int32Array(e,r+320,5);t[0]=1732584193,t[1]=-271733879,t[2]=-1732584194,t[3]=271733878,t[4]=-1009589776},c=function(e,r){var a,f,s,i=t(e),h=new Int32Array(n.heap,0,i>>2);return function(e,r){var n=new Uint8Array(e.buffer),t=r%4,a=r-t;switch(t){case 0:n[a+3]=0;case 1:n[a+2]=0;case 2:n[a+1]=0;case 3:n[a+0]=0}for(var f=1+(r>>2);f<e.length;f++)e[f]=0}(h,e),s=r,(a=h)[(f=e)>>2]|=128<<24-(f%4<<3),a[14+(2+(f>>2)&-16)]=s/(1<<29)|0,a[15+(2+(f>>2)&-16)]=s<<3,i},o=function(e,r,t,a){f(e)(n.h8,n.h32,r,t,a||0)},d=function(e,r,t,a,f){var s=t;o(e,r,t),f&&(s=c(t,a)),n.core.hash(s,n.padMaxChunkLen)},y=function(e,r){var n=new Int32Array(e,r+320,5),t=new Int32Array(5),a=new DataView(t.buffer);return a.setInt32(0,n[0],!1),a.setInt32(4,n[1],!1),a.setInt32(8,n[2],!1),a.setInt32(12,n[3],!1),a.setInt32(16,n[4],!1),t},w=this.rawDigest=function(e){var r=e.byteLength||e.length||e.size||0;u(n.heap,n.padMaxChunkLen);var t=0,a=n.maxChunkLen;for(t=0;r>t+a;t+=a)d(e,t,a,r,!1);return d(e,t,r-t,r,!0),y(n.heap,n.padMaxChunkLen)};this.digest=this.digestFromString=this.digestFromBuffer=this.digestFromArrayBuffer=function(e){return h(w(e).buffer)},this.resetState=function(){return u(n.heap,n.padMaxChunkLen),this},this.append=function(e){var r,t=0,a=e.byteLength||e.length||e.size||0,f=n.offset%n.maxChunkLen;for(n.offset+=a;t<a;)r=Math.min(a-t,n.maxChunkLen-f),o(e,t,r,f),t+=r,(f+=r)===n.maxChunkLen&&(n.core.hash(n.maxChunkLen,n.padMaxChunkLen),f=0);return this},this.getState=function(){var e;if(n.offset%n.maxChunkLen)e=n.heap.slice(0);else{var r=new Int32Array(n.heap,n.padMaxChunkLen+320,5);e=r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}return{offset:n.offset,heap:e}},this.setState=function(e){(n.offset=e.offset,20===e.heap.byteLength)?new Int32Array(n.heap,n.padMaxChunkLen+320,5).set(new Int32Array(e.heap)):n.h32.set(new Int32Array(e.heap));return this};var p=this.rawEnd=function(){var e=n.offset,r=e%n.maxChunkLen,t=c(r,e);n.core.hash(t,n.padMaxChunkLen);var a=y(n.heap,n.padMaxChunkLen);return u(n.heap,n.padMaxChunkLen),a};this.end=function(){return h(p().buffer)}}`;\n\n/**\n * @returns {Worker} Web worker\n */\nconst createWorker = () => {\n    /**\n     * The contents of this function are what execute when the worker is loaded.  It\n     * defines SHA-1 logic, and registers a handler for receiving messages from the window\n     * that created the worker.\n     * @returns {void}\n     */\n    function workerBase() {\n        const fileSha1 = new Rusha();\n        fileSha1.resetState();\n        let expectedOffset = 0;\n\n        // self inside a worker refers to a DedicatedWorkerGlobalScope\n        // https://developer.mozilla.org/en-US/docs/Web/API/DedicatedWorkerGlobalScope\n        self.onmessage = (event) => {\n            const { data } = event;\n            const { part, fileSize, partContents } = data;\n\n            const startTimestamp = Date.now();\n\n            try {\n                // Validate that we are receiving parts in order\n                if (part.offset !== expectedOffset) {\n                    throw new Error('Out of order parts given to worker');\n                }\n                fileSha1.append(partContents);\n\n                // We send the partContents back to the main thread because, at least in Chrome v62, we see\n                // that this ArrayBuffer is not garbage collected as promptly when left in the web worker\n                // context\n                self.postMessage(\n                    {\n                        type: 'partDone',\n                        part: data.part,\n                        duration: Date.now() - startTimestamp,\n                        partContents\n                    },\n                    [partContents]\n                );\n                expectedOffset += part.size;\n                if (part.offset + part.size === fileSize) {\n                    const hash = fileSha1.end();\n                    self.postMessage({ type: 'done', sha1: hash });\n                }\n            } catch (err) {\n                const message = {\n                    type: 'error',\n                    name: err.name,\n                    message: err.message,\n                    part\n                };\n                self.postMessage(message);\n            }\n        };\n    }\n    /* eslint-enable */\n\n    const workerCodeBlob = new Blob(\n        [\n            // RushaCore loses its function name when uglified\n            `const RushaCore = ${RushaCore.toString()}`,\n            ';\\n',\n            RushaString,\n            ';\\n',\n            'var setupWorker = ',\n            workerBase.toString(),\n            ';\\n',\n            'setupWorker();', // This explicit reassigned name is necessary because workerBase\n            // gets renamed during JS minification.\n        ],\n        { type: 'text/javascript' },\n    );\n    const workerUrl = (window.URL || window.webkitURL).createObjectURL(workerCodeBlob);\n    const worker = new Worker(workerUrl);\n    worker.oldTerminate = worker.terminate;\n    worker.terminate = () => {\n        (window.URL || window.webkitURL).revokeObjectURL(workerUrl);\n        worker.oldTerminate();\n    };\n\n    return worker;\n};\n\nexport default createWorker;\n"],"file":"uploadsSHA1Worker.js"}