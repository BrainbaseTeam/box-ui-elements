{"version":3,"sources":["../../src/utils/fields.js"],"names":["has","setProp","FIELD_ID","FIELD_NAME","FIELD_TYPE","FIELD_SIZE","FIELD_PARENT","FIELD_EXTENSION","FIELD_PERMISSIONS","FIELD_ITEM_COLLECTION","FIELD_ITEM_EXPIRATION","FIELD_PATH_COLLECTION","FIELD_CONTENT_CREATED_AT","FIELD_CONTENT_MODIFIED_AT","FIELD_MODIFIED_AT","FIELD_CREATED_AT","FIELD_SHARED_LINK","FIELD_ALLOWED_SHARED_LINK_ACCESS_LEVELS","FIELD_HAS_COLLABORATIONS","FIELD_IS_EXTERNALLY_OWNED","FIELD_CREATED_BY","FIELD_MODIFIED_BY","FIELD_OWNED_BY","FIELD_RESTORED_BY","FIELD_TRASHED_BY","FIELD_DESCRIPTION","FIELD_REPRESENTATIONS","FIELD_SHA1","FIELD_WATERMARK_INFO","FIELD_AUTHENTICATED_DOWNLOAD_URL","FIELD_FILE_VERSION","FIELD_IS_DOWNLOAD_AVAILABLE","FIELD_VERSION_LIMIT","FIELD_VERSION_NUMBER","FIELD_METADATA_SKILLS","FIELD_TASK_ASSIGNMENT_COLLECTION","FIELD_IS_COMPLETED","FIELD_MESSAGE","FIELD_TAGGED_MESSAGE","FIELD_DUE_AT","FIELD_TRASHED_AT","FIELD_ASSIGNED_TO","FIELD_RESTORED_FROM","FIELD_RESTORED_AT","FIELD_STATUS","FIELD_ACTIVITY_TEMPLATE","FIELD_APP","FIELD_OCCURRED_AT","FIELD_RENDERED_TEXT","FIELD_RETENTION","PLACEHOLDER_USER","FOLDER_FIELDS_TO_FETCH","SIDEBAR_FIELDS_TO_FETCH","PREVIEW_FIELDS_TO_FETCH","FILE_VERSION_FIELDS_TO_FETCH","FILE_VERSIONS_FIELDS_TO_FETCH","FILE_SHARED_LINK_FIELDS_TO_FETCH","TASKS_FIELDS_TO_FETCH","TASK_ASSIGNMENTS_FIELDS_TO_FETCH","COMMENTS_FIELDS_TO_FETCH","USER_FIELDS","APP_ACTIVITY_FIELDS_TO_FETCH","findMissingProperties","obj","properties","Object","keys","length","filter","field","fillMissingProperties","Array","isArray","newObj","missingProperties","forEach","fillUserPlaceholder"],"mappings":"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","sourcesContent":["/**\n * @flow\n * @file Utility to combine API fields needed\n * @author Box\n */\n\nimport has from 'lodash/has';\nimport setProp from 'lodash/set';\nimport {\n    FIELD_ID,\n    FIELD_NAME,\n    FIELD_TYPE,\n    FIELD_SIZE,\n    FIELD_PARENT,\n    FIELD_EXTENSION,\n    FIELD_PERMISSIONS,\n    FIELD_ITEM_COLLECTION,\n    FIELD_ITEM_EXPIRATION,\n    FIELD_PATH_COLLECTION,\n    FIELD_CONTENT_CREATED_AT,\n    FIELD_CONTENT_MODIFIED_AT,\n    FIELD_MODIFIED_AT,\n    FIELD_CREATED_AT,\n    FIELD_SHARED_LINK,\n    FIELD_ALLOWED_SHARED_LINK_ACCESS_LEVELS,\n    FIELD_HAS_COLLABORATIONS,\n    FIELD_IS_EXTERNALLY_OWNED,\n    FIELD_CREATED_BY,\n    FIELD_MODIFIED_BY,\n    FIELD_OWNED_BY,\n    FIELD_RESTORED_BY,\n    FIELD_TRASHED_BY,\n    FIELD_DESCRIPTION,\n    FIELD_REPRESENTATIONS,\n    FIELD_SHA1,\n    FIELD_WATERMARK_INFO,\n    FIELD_AUTHENTICATED_DOWNLOAD_URL,\n    FIELD_FILE_VERSION,\n    FIELD_IS_DOWNLOAD_AVAILABLE,\n    FIELD_VERSION_LIMIT,\n    FIELD_VERSION_NUMBER,\n    FIELD_METADATA_SKILLS,\n    FIELD_TASK_ASSIGNMENT_COLLECTION,\n    FIELD_IS_COMPLETED,\n    FIELD_MESSAGE,\n    FIELD_TAGGED_MESSAGE,\n    FIELD_DUE_AT,\n    FIELD_TRASHED_AT,\n    FIELD_ASSIGNED_TO,\n    FIELD_RESTORED_FROM,\n    FIELD_RESTORED_AT,\n    FIELD_STATUS,\n    FIELD_ACTIVITY_TEMPLATE,\n    FIELD_APP,\n    FIELD_OCCURRED_AT,\n    FIELD_RENDERED_TEXT,\n    FIELD_RETENTION,\n    PLACEHOLDER_USER,\n} from '../constants';\n\n// Minimum set of fields needed for Content Explorer / Picker\nconst FOLDER_FIELDS_TO_FETCH = [\n    FIELD_ID,\n    FIELD_NAME,\n    FIELD_TYPE,\n    FIELD_SIZE,\n    FIELD_PARENT,\n    FIELD_EXTENSION,\n    FIELD_PERMISSIONS,\n    FIELD_PATH_COLLECTION,\n    FIELD_MODIFIED_AT,\n    FIELD_CREATED_AT,\n    FIELD_MODIFIED_BY,\n    FIELD_HAS_COLLABORATIONS,\n    FIELD_IS_EXTERNALLY_OWNED,\n    FIELD_ITEM_COLLECTION,\n    FIELD_AUTHENTICATED_DOWNLOAD_URL,\n    FIELD_IS_DOWNLOAD_AVAILABLE,\n    FIELD_REPRESENTATIONS,\n];\n\n// Fields needed for the sidebar\nconst SIDEBAR_FIELDS_TO_FETCH = [\n    FIELD_ID,\n    FIELD_NAME,\n    FIELD_SIZE,\n    FIELD_EXTENSION,\n    FIELD_FILE_VERSION,\n    FIELD_SHARED_LINK,\n    FIELD_PERMISSIONS,\n    FIELD_CONTENT_CREATED_AT,\n    FIELD_CONTENT_MODIFIED_AT,\n    FIELD_CREATED_AT,\n    FIELD_CREATED_BY,\n    FIELD_MODIFIED_AT,\n    FIELD_MODIFIED_BY,\n    FIELD_OWNED_BY,\n    FIELD_DESCRIPTION,\n    FIELD_METADATA_SKILLS,\n    FIELD_ITEM_EXPIRATION,\n    FIELD_VERSION_LIMIT,\n    FIELD_VERSION_NUMBER,\n    FIELD_IS_EXTERNALLY_OWNED,\n    FIELD_RESTORED_FROM,\n    FIELD_AUTHENTICATED_DOWNLOAD_URL,\n    FIELD_IS_DOWNLOAD_AVAILABLE,\n];\n\n// Fields needed for preview\nconst PREVIEW_FIELDS_TO_FETCH = [\n    FIELD_ID,\n    FIELD_PERMISSIONS,\n    FIELD_SHARED_LINK,\n    FIELD_SHA1,\n    FIELD_FILE_VERSION,\n    FIELD_NAME,\n    FIELD_SIZE,\n    FIELD_EXTENSION,\n    FIELD_REPRESENTATIONS,\n    FIELD_WATERMARK_INFO,\n    FIELD_AUTHENTICATED_DOWNLOAD_URL,\n    FIELD_IS_DOWNLOAD_AVAILABLE,\n];\n\n// Fields needed to get information on the current version of a file\nconst FILE_VERSION_FIELDS_TO_FETCH = [\n    FIELD_FILE_VERSION,\n    FIELD_MODIFIED_AT,\n    FIELD_MODIFIED_BY,\n    FIELD_RESTORED_FROM,\n    FIELD_SIZE,\n    FIELD_VERSION_NUMBER,\n];\n\n// Fields needed to get versions for a file\nconst FILE_VERSIONS_FIELDS_TO_FETCH = [\n    FIELD_AUTHENTICATED_DOWNLOAD_URL,\n    FIELD_CREATED_AT,\n    FIELD_EXTENSION,\n    FIELD_IS_DOWNLOAD_AVAILABLE,\n    FIELD_MODIFIED_AT,\n    FIELD_MODIFIED_BY,\n    FIELD_NAME,\n    FIELD_PERMISSIONS,\n    FIELD_RESTORED_AT,\n    FIELD_RESTORED_BY,\n    FIELD_RETENTION,\n    FIELD_SIZE,\n    FIELD_TRASHED_AT,\n    FIELD_TRASHED_BY,\n    FIELD_VERSION_NUMBER,\n];\n\n// Fields needed for Content Picker to show shared link permissions\nconst FILE_SHARED_LINK_FIELDS_TO_FETCH = [FIELD_ALLOWED_SHARED_LINK_ACCESS_LEVELS, FIELD_SHARED_LINK];\n\n// Fields needed to get tasks data\nconst TASKS_FIELDS_TO_FETCH = [\n    FIELD_TASK_ASSIGNMENT_COLLECTION,\n    FIELD_IS_COMPLETED,\n    FIELD_CREATED_AT,\n    FIELD_CREATED_BY,\n    FIELD_DUE_AT,\n    FIELD_MESSAGE,\n];\n\n// Fields needed to get task assignments data\nconst TASK_ASSIGNMENTS_FIELDS_TO_FETCH = [FIELD_ASSIGNED_TO, FIELD_STATUS];\n\n// Fields needed to get tasks data\nconst COMMENTS_FIELDS_TO_FETCH = [\n    FIELD_TAGGED_MESSAGE,\n    FIELD_MESSAGE,\n    FIELD_CREATED_AT,\n    FIELD_CREATED_BY,\n    FIELD_MODIFIED_AT,\n    FIELD_PERMISSIONS,\n];\n\n// Fields that represent users\nconst USER_FIELDS = [FIELD_CREATED_BY, FIELD_MODIFIED_BY, FIELD_OWNED_BY, FIELD_ASSIGNED_TO];\n\n// Fields required to fetch app activity\nconst APP_ACTIVITY_FIELDS_TO_FETCH = [\n    FIELD_ACTIVITY_TEMPLATE,\n    FIELD_APP,\n    FIELD_CREATED_BY,\n    FIELD_OCCURRED_AT,\n    FIELD_RENDERED_TEXT,\n];\n\n/**\n * Finds properties missing in an object\n *\n * @param {Object} obj - some object\n * @param {Array<string>|void} [properties] - object properties to check\n * @return {Array<string>} comma seperated list of properties missing\n */\nfunction findMissingProperties(obj?: Object, properties?: Array<string> = []): Array<string> {\n    // If file doesn't exist or is an empty object, we should fetch all fields\n    if (!obj || typeof obj !== 'object' || Object.keys(obj).length === 0) {\n        return properties;\n    }\n\n    return properties.filter((field: string) => !has(obj, field));\n}\n\n/**\n * Fill properties missing in an object\n *\n * @param {Object} obj - some object\n * @param {Array<string>|void} [properties] - some properties to check\n * @return {Object} new object with missing fields\n */\nfunction fillMissingProperties(obj?: Object = {}, properties?: Array<string>): Object {\n    // If file doesn't exist or is an empty object, we should fetch all fields\n    if (!Array.isArray(properties) || properties.length === 0) {\n        return obj;\n    }\n\n    const newObj = { ...obj };\n    const missingProperties = findMissingProperties(obj, properties);\n    missingProperties.forEach((field: string) => {\n        // @Note: This will overwrite non object fields\n        // @Note: We don't know the type of the field\n        setProp(newObj, field, null);\n    });\n    return newObj;\n}\n\n/**\n * Fill user properties that are null in an object\n *\n * @param {Object} obj - some object\n * @return {Object} new object with user placeholder\n */\nfunction fillUserPlaceholder(obj: Object): Object {\n    const newObj = { ...obj };\n\n    USER_FIELDS.forEach((field: string) => {\n        if (has(newObj, field) && newObj[field] === null) {\n            setProp(newObj, field, PLACEHOLDER_USER);\n        }\n    });\n\n    return newObj;\n}\n\nexport {\n    APP_ACTIVITY_FIELDS_TO_FETCH,\n    COMMENTS_FIELDS_TO_FETCH,\n    FILE_SHARED_LINK_FIELDS_TO_FETCH,\n    FILE_VERSION_FIELDS_TO_FETCH,\n    FILE_VERSIONS_FIELDS_TO_FETCH,\n    fillMissingProperties,\n    fillUserPlaceholder,\n    findMissingProperties,\n    FOLDER_FIELDS_TO_FETCH,\n    PREVIEW_FIELDS_TO_FETCH,\n    SIDEBAR_FIELDS_TO_FETCH,\n    TASK_ASSIGNMENTS_FIELDS_TO_FETCH,\n    TASKS_FIELDS_TO_FETCH,\n    USER_FIELDS,\n};\n"],"file":"fields.js"}