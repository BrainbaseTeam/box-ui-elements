{"version":3,"sources":["../../../src/elements/content-explorer/MoreOptions.js"],"names":["React","FormattedMessage","Button","DropdownMenu","Menu","MenuItem","Browser","IconEllipsis","bdlGray50","messages","PERMISSION_CAN_DOWNLOAD","PERMISSION_CAN_RENAME","PERMISSION_CAN_DELETE","PERMISSION_CAN_SHARE","PERMISSION_CAN_PREVIEW","TYPE_FILE","TYPE_FOLDER","TYPE_WEBLINK","MoreOptions","canPreview","canShare","canDownload","canDelete","canRename","onItemSelect","onItemDelete","onItemDownload","onItemRename","onItemShare","onItemPreview","onItemSetThumbnail","onItemRemoveThumbnail","isSmall","item","onFocus","onDelete","onDownload","onRename","onShare","onPreview","onSetThumbnail","onRemoveThumbnail","permissions","type","allowPreview","allowOpen","allowDelete","allowShare","allowRename","allowDownload","isMobile","allowSetThumbnail","metadata","allowRemoveThumbnail","allowed","setThumbnailMenuItem","id","description","defaultMessage","removeThumbnailMenuItem","preview","open","delete","download","rename","share"],"mappings":"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","sourcesContent":["// @flow\nimport React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport Button from '../../components/button/Button';\nimport DropdownMenu from '../../components/dropdown-menu/DropdownMenu';\nimport Menu from '../../components/menu/Menu';\nimport MenuItem from '../../components/menu/MenuItem';\nimport Browser from '../../utils/Browser';\nimport IconEllipsis from '../../icons/general/IconEllipsis';\nimport { bdlGray50 } from '../../styles/variables';\nimport messages from '../common/messages';\nimport {\n    PERMISSION_CAN_DOWNLOAD,\n    PERMISSION_CAN_RENAME,\n    PERMISSION_CAN_DELETE,\n    PERMISSION_CAN_SHARE,\n    PERMISSION_CAN_PREVIEW,\n    TYPE_FILE,\n    TYPE_FOLDER,\n    TYPE_WEBLINK,\n} from '../../constants';\n\nimport type { CommonGridViewFunctions } from './flowTypes';\nimport './MoreOptionsCell.scss';\n\ntype Props = {\n    canDelete: boolean,\n    canDownload: boolean,\n    canPreview: boolean,\n    canRename: boolean,\n    canShare: boolean,\n    isSmall: boolean,\n    item: BoxItem,\n    ...$Exact<CommonGridViewFunctions>,\n};\n\nconst MoreOptions = ({\n    canPreview,\n    canShare,\n    canDownload,\n    canDelete,\n    canRename,\n    onItemSelect,\n    onItemDelete,\n    onItemDownload,\n    onItemRename,\n    onItemShare,\n    onItemPreview,\n    onItemSetThumbnail,\n    onItemRemoveThumbnail,\n    isSmall,\n    item,\n}: Props) => {\n    const onFocus = () => onItemSelect(item);\n    const onDelete = () => onItemDelete(item);\n    const onDownload = () => onItemDownload(item);\n    const onRename = () => onItemRename(item);\n    const onShare = () => onItemShare(item);\n    const onPreview = () => onItemPreview(item);\n    const onSetThumbnail = () => onItemSetThumbnail(item);\n    const onRemoveThumbnail = () => onItemRemoveThumbnail(item);\n\n    const { permissions, type } = item;\n\n    if (!permissions) {\n        return <span />;\n    }\n\n    const allowPreview = type === TYPE_FILE && canPreview && permissions[PERMISSION_CAN_PREVIEW];\n    const allowOpen = type === TYPE_WEBLINK;\n    const allowDelete = canDelete && permissions[PERMISSION_CAN_DELETE];\n    const allowShare = canShare && permissions[PERMISSION_CAN_SHARE];\n    const allowRename = canRename && permissions[PERMISSION_CAN_RENAME];\n    const allowDownload =\n        canDownload && permissions[PERMISSION_CAN_DOWNLOAD] && type === TYPE_FILE && !Browser.isMobile();\n    const allowSetThumbnail = type === TYPE_FOLDER && permissions[PERMISSION_CAN_RENAME] && !item.metadata;\n    const allowRemoveThumbnail = type === TYPE_FOLDER && permissions[PERMISSION_CAN_RENAME] && item.metadata;\n\n    const allowed = allowDelete || allowRename || allowDownload || allowPreview\n        || allowShare || allowOpen || allowSetThumbnail || allowRemoveThumbnail;\n\n    if (!allowed) {\n        return <span />;\n    }\n\n    const setThumbnailMenuItem = {\n        id: 'be.setThumbnail',\n        description: 'Set custom thumbnail',\n        defaultMessage: 'Set custom thumbnail',\n    };\n\n    const removeThumbnailMenuItem = {\n        id: 'be.removeThumbnail',\n        description: 'Remove custom thumbnail',\n        defaultMessage: 'Remove custom thumbnail',\n    };\n\n    return (\n        <div className=\"bce-more-options\">\n            <DropdownMenu constrainToScrollParent isRightAligned>\n                <Button\n                    className=\"bce-btn-more-options\"\n                    data-testid=\"bce-btn-more-options\"\n                    onFocus={onFocus}\n                    type=\"button\"\n                >\n                    <IconEllipsis color={bdlGray50} height={10} width={16} />\n                </Button>\n                <Menu>\n                    {allowPreview && (\n                        <MenuItem onClick={onPreview}>\n                            <FormattedMessage {...messages.preview} />\n                        </MenuItem>\n                    )}\n                    {allowOpen && (\n                        <MenuItem onClick={onPreview}>\n                            <FormattedMessage {...messages.open} />\n                        </MenuItem>\n                    )}\n                    {allowDelete && (\n                        <MenuItem onClick={onDelete}>\n                            <FormattedMessage {...messages.delete} />\n                        </MenuItem>\n                    )}\n                    {allowDownload && (\n                        <MenuItem onClick={onDownload}>\n                            <FormattedMessage {...messages.download} />\n                        </MenuItem>\n                    )}\n                    {allowRename && (\n                        <MenuItem onClick={onRename}>\n                            <FormattedMessage {...messages.rename} />\n                        </MenuItem>\n                    )}\n                    {allowShare && (\n                        <MenuItem onClick={onShare}>\n                            <FormattedMessage {...messages.share} />\n                        </MenuItem>\n                    )}\n                    {allowSetThumbnail && (\n                        <MenuItem onClick={onSetThumbnail}>\n                            <FormattedMessage {...setThumbnailMenuItem} />\n                        </MenuItem>\n                    )}\n                    {allowRemoveThumbnail && (\n                        <MenuItem onClick={onRemoveThumbnail}>\n                            <FormattedMessage {...removeThumbnailMenuItem} />\n                        </MenuItem>\n                    )}\n                </Menu>\n            </DropdownMenu>\n            {allowShare && !isSmall && (\n                <Button onClick={onShare} onFocus={onFocus} type=\"button\">\n                    <FormattedMessage {...messages.share} />\n                </Button>\n            )}\n        </div>\n    );\n};\n\nexport default MoreOptions;\n"],"file":"MoreOptions.js"}