{"version":3,"sources":["../../../src/elements/content-explorer/MoreOptions.js"],"names":["React","FormattedMessage","Button","DropdownMenu","Menu","MenuItem","Browser","IconEllipsis","bdlGray50","messages","PERMISSION_CAN_DOWNLOAD","PERMISSION_CAN_RENAME","PERMISSION_CAN_DELETE","PERMISSION_CAN_SHARE","PERMISSION_CAN_PREVIEW","TYPE_FILE","TYPE_FOLDER","TYPE_WEBLINK","MoreOptions","canPreview","canShare","canDownload","canDelete","canRename","onItemSelect","onItemDelete","onItemDownload","onItemRename","onItemShare","onItemPreview","onItemCustomShare","onItemMoveTo","onItemSetThumbnail","onItemRemoveThumbnail","isSmall","item","onFocus","onDelete","onDownload","onRename","onShare","onPreview","onCustomShare","onMoveTo","onSetThumbnail","onRemoveThumbnail","permissions","type","allowPreview","allowOpen","allowDelete","allowShare","allowRename","allowDownload","isMobile","allowMoveTo","allowSetThumbnail","metadata","allowRemoveThumbnail","allowed","moveToMenuItem","id","description","defaultMessage","setThumbnailMenuItem","removeThumbnailMenuItem","preview","open","delete","download","rename","share"],"mappings":"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","sourcesContent":["// @flow\nimport React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport Button from '../../components/button/Button';\nimport DropdownMenu from '../../components/dropdown-menu/DropdownMenu';\nimport Menu from '../../components/menu/Menu';\nimport MenuItem from '../../components/menu/MenuItem';\nimport Browser from '../../utils/Browser';\nimport IconEllipsis from '../../icons/general/IconEllipsis';\nimport { bdlGray50 } from '../../styles/variables';\nimport messages from '../common/messages';\nimport {\n    PERMISSION_CAN_DOWNLOAD,\n    PERMISSION_CAN_RENAME,\n    PERMISSION_CAN_DELETE,\n    PERMISSION_CAN_SHARE,\n    PERMISSION_CAN_PREVIEW,\n    TYPE_FILE,\n    TYPE_FOLDER,\n    TYPE_WEBLINK,\n} from '../../constants';\n\nimport type { CommonGridViewFunctions } from './flowTypes';\nimport './MoreOptionsCell.scss';\n\ntype Props = {\n    canDelete: boolean,\n    canDownload: boolean,\n    canPreview: boolean,\n    canRename: boolean,\n    canShare: boolean,\n    isSmall: boolean,\n    item: BoxItem,\n    ...$Exact<CommonGridViewFunctions>,\n};\n\nconst MoreOptions = ({\n    canPreview,\n    canShare,\n    canDownload,\n    canDelete,\n    canRename,\n    onItemSelect,\n    onItemDelete,\n    onItemDownload,\n    onItemRename,\n    onItemShare,\n    onItemPreview,\n    onItemCustomShare,\n    onItemMoveTo,\n    onItemSetThumbnail,\n    onItemRemoveThumbnail,\n    isSmall,\n    item,\n}: Props) => {\n    const onFocus = () => onItemSelect(item);\n    const onDelete = () => onItemDelete(item);\n    const onDownload = () => onItemDownload(item);\n    const onRename = () => onItemRename(item);\n    const onShare = () => onItemShare(item);\n    const onPreview = () => onItemPreview(item);\n    const onCustomShare = () => onItemCustomShare(item);\n    const onMoveTo = () => onItemMoveTo(item);\n    const onSetThumbnail = () => onItemSetThumbnail(item);\n    const onRemoveThumbnail = () => onItemRemoveThumbnail(item);\n\n    const { permissions, type } = item;\n\n    if (!permissions) {\n        return <span />;\n    }\n\n    const allowPreview = type === TYPE_FILE && canPreview && permissions[PERMISSION_CAN_PREVIEW];\n    const allowOpen = type === TYPE_WEBLINK;\n    const allowDelete = canDelete && permissions[PERMISSION_CAN_DELETE];\n    const allowShare = canShare && permissions[PERMISSION_CAN_SHARE];\n    const allowRename = canRename && permissions[PERMISSION_CAN_RENAME];\n    const allowDownload =\n        canDownload && permissions[PERMISSION_CAN_DOWNLOAD] && type === TYPE_FILE && !Browser.isMobile();\n    const allowMoveTo = permissions[PERMISSION_CAN_RENAME];\n    const allowSetThumbnail = type === TYPE_FOLDER && permissions[PERMISSION_CAN_RENAME] && !item.metadata;\n    const allowRemoveThumbnail = type === TYPE_FOLDER && permissions[PERMISSION_CAN_RENAME] && item.metadata;\n\n    const allowed = allowDelete || allowRename || allowDownload || allowPreview\n        || allowShare || allowOpen || allowMoveTo || allowSetThumbnail || allowRemoveThumbnail;\n\n    if (!allowed) {\n        return <span />;\n    }\n\n    const moveToMenuItem = {\n        id: 'be.moveTo',\n        description: 'Move to...',\n        defaultMessage: 'Move to...',\n    };\n\n    const setThumbnailMenuItem = {\n        id: 'be.setThumbnail',\n        description: 'Set custom thumbnail',\n        defaultMessage: 'Set custom thumbnail',\n    };\n\n    const removeThumbnailMenuItem = {\n        id: 'be.removeThumbnail',\n        description: 'Remove custom thumbnail',\n        defaultMessage: 'Remove custom thumbnail',\n    };\n\n    return (\n        <div className=\"bce-more-options\">\n            <DropdownMenu constrainToScrollParent isRightAligned>\n                <Button\n                    className=\"bce-btn-more-options\"\n                    data-testid=\"bce-btn-more-options\"\n                    onFocus={onFocus}\n                    type=\"button\"\n                >\n                    <IconEllipsis color={bdlGray50} height={10} width={16} />\n                </Button>\n                <Menu>\n                    {allowPreview && (\n                        <MenuItem onClick={onPreview}>\n                            <FormattedMessage {...messages.preview} />\n                        </MenuItem>\n                    )}\n                    {allowOpen && (\n                        <MenuItem onClick={onPreview}>\n                            <FormattedMessage {...messages.open} />\n                        </MenuItem>\n                    )}\n                    {allowDelete && (\n                        <MenuItem onClick={onDelete}>\n                            <FormattedMessage {...messages.delete} />\n                        </MenuItem>\n                    )}\n                    {allowDownload && (\n                        <MenuItem onClick={onDownload}>\n                            <FormattedMessage {...messages.download} />\n                        </MenuItem>\n                    )}\n                    {allowRename && (\n                        <MenuItem onClick={onRename}>\n                            <FormattedMessage {...messages.rename} />\n                        </MenuItem>\n                    )}\n                    {allowShare && (\n                        <MenuItem onClick={onCustomShare}>\n                            <FormattedMessage {...messages.share} />\n                        </MenuItem>\n                    )}\n                    {allowMoveTo && (\n                        <MenuItem onClick={onMoveTo}>\n                            <FormattedMessage {...moveToMenuItem} />\n                        </MenuItem>\n                    )}\n                    {allowSetThumbnail && (\n                        <MenuItem onClick={onSetThumbnail}>\n                            <FormattedMessage {...setThumbnailMenuItem} />\n                        </MenuItem>\n                    )}\n                    {allowRemoveThumbnail && (\n                        <MenuItem onClick={onRemoveThumbnail}>\n                            <FormattedMessage {...removeThumbnailMenuItem} />\n                        </MenuItem>\n                    )}\n                </Menu>\n            </DropdownMenu>\n        </div>\n    );\n};\n\nexport default MoreOptions;\n"],"file":"MoreOptions.js"}