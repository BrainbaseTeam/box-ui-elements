{"version":3,"sources":["../../../src/elements/content-explorer/MoreOptions.js"],"names":["React","FormattedMessage","Button","DropdownMenu","Menu","MenuItem","Browser","IconEllipsis","bdlGray50","messages","PERMISSION_CAN_DOWNLOAD","PERMISSION_CAN_RENAME","PERMISSION_CAN_DELETE","PERMISSION_CAN_SHARE","PERMISSION_CAN_PREVIEW","TYPE_FILE","TYPE_FOLDER","TYPE_WEBLINK","PERMISSION_CAN_SET_SHARE_ACCESS","MoreOptions","canPreview","canShare","canDownload","canDelete","canRename","onItemSelect","onItemDelete","onItemDownload","onItemRename","onItemShare","onItemPreview","onItemCustomShare","onItemMoveTo","onItemCopy","onItemSetThumbnail","onItemRemoveThumbnail","isSmall","item","onFocus","onDelete","onDownload","onRename","onShare","onPreview","onCustomShare","onMoveTo","onCopy","onSetThumbnail","onRemoveThumbnail","permissions","type","allowPreview","allowOpen","allowDelete","allowShare","allowRename","allowDownload","isMobile","allowMoveTo","allowCopy","allowSetThumbnail","metadata","allowRemoveThumbnail","allowed","moveToMenuItem","id","description","defaultMessage","copyMenuItem","setThumbnailMenuItem","removeThumbnailMenuItem","preview","open","delete","download","rename","share"],"mappings":"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","sourcesContent":["// @flow\nimport React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport Button from '../../components/button/Button';\nimport DropdownMenu from '../../components/dropdown-menu/DropdownMenu';\nimport Menu from '../../components/menu/Menu';\nimport MenuItem from '../../components/menu/MenuItem';\nimport Browser from '../../utils/Browser';\nimport IconEllipsis from '../../icons/general/IconEllipsis';\nimport { bdlGray50 } from '../../styles/variables';\nimport messages from '../common/messages';\nimport {\n    PERMISSION_CAN_DOWNLOAD,\n    PERMISSION_CAN_RENAME,\n    PERMISSION_CAN_DELETE,\n    PERMISSION_CAN_SHARE,\n    PERMISSION_CAN_PREVIEW,\n    TYPE_FILE,\n    TYPE_FOLDER,\n    TYPE_WEBLINK,\n    PERMISSION_CAN_SET_SHARE_ACCESS,\n} from '../../constants';\n\nimport type { CommonGridViewFunctions } from './flowTypes';\nimport './MoreOptionsCell.scss';\n\ntype Props = {\n    canDelete: boolean,\n    canDownload: boolean,\n    canPreview: boolean,\n    canRename: boolean,\n    canShare: boolean,\n    isSmall: boolean,\n    item: BoxItem,\n    ...$Exact<CommonGridViewFunctions>,\n};\n\nconst MoreOptions = ({\n    canPreview,\n    canShare,\n    canDownload,\n    canDelete,\n    canRename,\n    onItemSelect,\n    onItemDelete,\n    onItemDownload,\n    onItemRename,\n    onItemShare,\n    onItemPreview,\n    onItemCustomShare,\n    onItemMoveTo,\n    onItemCopy,\n    onItemSetThumbnail,\n    onItemRemoveThumbnail,\n    isSmall,\n    item,\n}: Props) => {\n    const onFocus = () => onItemSelect(item);\n    const onDelete = () => onItemDelete(item);\n    const onDownload = () => onItemDownload(item);\n    const onRename = () => onItemRename(item);\n    const onShare = () => onItemShare(item);\n    const onPreview = () => onItemPreview(item);\n    const onCustomShare = () => onItemCustomShare(item);\n    const onMoveTo = () => onItemMoveTo(item);\n    const onCopy = () => onItemCopy(item);\n    const onSetThumbnail = () => onItemSetThumbnail(item);\n    const onRemoveThumbnail = () => onItemRemoveThumbnail(item);\n\n    const { permissions, type } = item;\n\n    if (!permissions) {\n        return <span />;\n    }\n\n    const allowPreview = type === TYPE_FILE && canPreview && permissions[PERMISSION_CAN_PREVIEW];\n    const allowOpen = type === TYPE_WEBLINK;\n    const allowDelete = canDelete && permissions[PERMISSION_CAN_DELETE];\n    const allowShare = canShare && permissions[PERMISSION_CAN_SHARE] && permissions[PERMISSION_CAN_SET_SHARE_ACCESS];\n    const allowRename = canRename && permissions[PERMISSION_CAN_RENAME];\n    const allowDownload =\n        canDownload && permissions[PERMISSION_CAN_DOWNLOAD] && type === TYPE_FILE && !Browser.isMobile();\n    const allowMoveTo = permissions[PERMISSION_CAN_RENAME];\n    const allowCopy = permissions[PERMISSION_CAN_RENAME];\n    const allowSetThumbnail = type === TYPE_FOLDER && permissions[PERMISSION_CAN_RENAME] && !item.metadata;\n    const allowRemoveThumbnail = type === TYPE_FOLDER && permissions[PERMISSION_CAN_RENAME] && item.metadata;\n\n    const allowed = allowDelete || allowRename || allowDownload || allowPreview\n        || allowShare || allowOpen || allowMoveTo || allowCopy || allowSetThumbnail || allowRemoveThumbnail;\n\n    if (!allowed) {\n        return <span />;\n    }\n\n    const moveToMenuItem = {\n        id: 'be.moveTo',\n        description: 'Move to...',\n        defaultMessage: 'Move to...',\n    };\n\n    const copyMenuItem = {\n        id: 'be.copy',\n        description: 'Copy',\n        defaultMessage: 'Copy'\n    }\n\n    const setThumbnailMenuItem = {\n        id: 'be.setThumbnail',\n        description: 'Set custom thumbnail',\n        defaultMessage: 'Set custom thumbnail',\n    };\n\n    const removeThumbnailMenuItem = {\n        id: 'be.removeThumbnail',\n        description: 'Remove custom thumbnail',\n        defaultMessage: 'Remove custom thumbnail',\n    };\n\n    return (\n        <div className=\"bce-more-options\">\n            <DropdownMenu constrainToScrollParent isRightAligned>\n                <Button\n                    className=\"bce-btn-more-options\"\n                    data-testid=\"bce-btn-more-options\"\n                    onFocus={onFocus}\n                    type=\"button\"\n                >\n                    <IconEllipsis color={bdlGray50} height={10} width={16} />\n                </Button>\n                <Menu>\n                    {allowPreview && (\n                        <MenuItem onClick={onPreview}>\n                            <FormattedMessage {...messages.preview} />\n                        </MenuItem>\n                    )}\n                    {allowOpen && (\n                        <MenuItem onClick={onPreview}>\n                            <FormattedMessage {...messages.open} />\n                        </MenuItem>\n                    )}\n                    {allowDelete && (\n                        <MenuItem onClick={onDelete}>\n                            <FormattedMessage {...messages.delete} />\n                        </MenuItem>\n                    )}\n                    {allowDownload && (\n                        <MenuItem onClick={onDownload}>\n                            <FormattedMessage {...messages.download} />\n                        </MenuItem>\n                    )}\n                    {allowRename && (\n                        <MenuItem onClick={onRename}>\n                            <FormattedMessage {...messages.rename} />\n                        </MenuItem>\n                    )}\n                    {allowShare && (\n                        <MenuItem onClick={onCustomShare}>\n                            <FormattedMessage {...messages.share} />\n                        </MenuItem>\n                    )}\n                    {allowMoveTo && (\n                        <MenuItem onClick={onMoveTo}>\n                            <FormattedMessage {...moveToMenuItem} />\n                        </MenuItem>\n                    )}\n                    {allowCopy && (\n                        <MenuItem onClick={onCopy}>\n                            <FormattedMessage {...copyMenuItem} />\n                        </MenuItem>\n                    )}\n                    {allowSetThumbnail && (\n                        <MenuItem className=\"menu-item-set-thumbnail\" onClick={onSetThumbnail}>\n                            <FormattedMessage {...setThumbnailMenuItem} />\n                        </MenuItem>\n                    )}\n                    {allowRemoveThumbnail && (\n                        <MenuItem onClick={onRemoveThumbnail}>\n                            <FormattedMessage {...removeThumbnailMenuItem} />\n                        </MenuItem>\n                    )}\n                </Menu>\n            </DropdownMenu>\n        </div>\n    );\n};\n\nexport default MoreOptions;\n"],"file":"MoreOptions.js"}