{"version":3,"sources":["../../../src/elements/content-explorer/MoreOptions.js"],"names":["React","FormattedMessage","Button","DropdownMenu","Menu","MenuItem","Browser","IconEllipsis","bdlGray50","messages","PERMISSION_CAN_DOWNLOAD","PERMISSION_CAN_RENAME","PERMISSION_CAN_DELETE","PERMISSION_CAN_SHARE","PERMISSION_CAN_PREVIEW","TYPE_FILE","TYPE_WEBLINK","MoreOptions","canPreview","canShare","canDownload","canDelete","canRename","onItemSelect","onItemDelete","onItemDownload","onItemRename","onItemShare","onItemPreview","isSmall","item","onFocus","onDelete","onDownload","onRename","onShare","onPreview","permissions","type","allowPreview","allowOpen","allowDelete","allowShare","allowRename","allowDownload","isMobile","allowed","preview","open","delete","download","rename","share"],"mappings":"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","sourcesContent":["// @flow\nimport React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport Button from '../../components/button/Button';\nimport DropdownMenu from '../../components/dropdown-menu/DropdownMenu';\nimport Menu from '../../components/menu/Menu';\nimport MenuItem from '../../components/menu/MenuItem';\nimport Browser from '../../utils/Browser';\nimport IconEllipsis from '../../icons/general/IconEllipsis';\nimport { bdlGray50 } from '../../styles/variables';\nimport messages from '../common/messages';\nimport {\n    PERMISSION_CAN_DOWNLOAD,\n    PERMISSION_CAN_RENAME,\n    PERMISSION_CAN_DELETE,\n    PERMISSION_CAN_SHARE,\n    PERMISSION_CAN_PREVIEW,\n    TYPE_FILE,\n    TYPE_WEBLINK,\n} from '../../constants';\n\nimport type { CommonGridViewFunctions } from './flowTypes';\nimport './MoreOptionsCell.scss';\n\ntype Props = {\n    canDelete: boolean,\n    canDownload: boolean,\n    canPreview: boolean,\n    canRename: boolean,\n    canShare: boolean,\n    isSmall: boolean,\n    item: BoxItem,\n    ...$Exact<CommonGridViewFunctions>,\n};\n\nconst MoreOptions = ({\n    canPreview,\n    canShare,\n    canDownload,\n    canDelete,\n    canRename,\n    onItemSelect,\n    onItemDelete,\n    onItemDownload,\n    onItemRename,\n    onItemShare,\n    onItemPreview,\n    isSmall,\n    item,\n}: Props) => {\n    const onFocus = () => onItemSelect(item);\n    const onDelete = () => onItemDelete(item);\n    const onDownload = () => onItemDownload(item);\n    const onRename = () => onItemRename(item);\n    const onShare = () => onItemShare(item);\n    const onPreview = () => onItemPreview(item);\n\n    const { permissions, type } = item;\n\n    if (!permissions) {\n        return <span />;\n    }\n\n    const allowPreview = type === TYPE_FILE && canPreview && permissions[PERMISSION_CAN_PREVIEW];\n    const allowOpen = type === TYPE_WEBLINK;\n    const allowDelete = canDelete && permissions[PERMISSION_CAN_DELETE];\n    const allowShare = canShare && permissions[PERMISSION_CAN_SHARE];\n    const allowRename = canRename && permissions[PERMISSION_CAN_RENAME];\n    const allowDownload =\n        canDownload && permissions[PERMISSION_CAN_DOWNLOAD] && type === TYPE_FILE && !Browser.isMobile();\n    const allowed = allowDelete || allowRename || allowDownload || allowPreview || allowShare || allowOpen;\n\n    if (!allowed) {\n        return <span />;\n    }\n    return (\n        <div className=\"bce-more-options\">\n            <DropdownMenu constrainToScrollParent isRightAligned>\n                <Button\n                    className=\"bce-btn-more-options\"\n                    data-testid=\"bce-btn-more-options\"\n                    onFocus={onFocus}\n                    type=\"button\"\n                >\n                    <IconEllipsis color={bdlGray50} height={10} width={16} />\n                </Button>\n                <Menu>\n                    {allowPreview && (\n                        <MenuItem onClick={onPreview}>\n                            <FormattedMessage {...messages.preview} />\n                        </MenuItem>\n                    )}\n                    {allowOpen && (\n                        <MenuItem onClick={onPreview}>\n                            <FormattedMessage {...messages.open} />\n                        </MenuItem>\n                    )}\n                    {allowDelete && (\n                        <MenuItem onClick={onDelete}>\n                            <FormattedMessage {...messages.delete} />\n                        </MenuItem>\n                    )}\n                    {allowDownload && (\n                        <MenuItem onClick={onDownload}>\n                            <FormattedMessage {...messages.download} />\n                        </MenuItem>\n                    )}\n                    {allowRename && (\n                        <MenuItem onClick={onRename}>\n                            <FormattedMessage {...messages.rename} />\n                        </MenuItem>\n                    )}\n                    {allowShare && (\n                        <MenuItem onClick={onShare}>\n                            <FormattedMessage {...messages.share} />\n                        </MenuItem>\n                    )}\n                </Menu>\n            </DropdownMenu>\n            {allowShare && !isSmall && (\n                <Button onClick={onShare} onFocus={onFocus} type=\"button\">\n                    <FormattedMessage {...messages.share} />\n                </Button>\n            )}\n        </div>\n    );\n};\n\nexport default MoreOptions;\n"],"file":"MoreOptions.js"}