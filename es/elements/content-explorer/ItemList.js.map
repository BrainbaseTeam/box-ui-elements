{"version":3,"sources":["../../../src/elements/content-explorer/ItemList.js"],"names":["React","classNames","injectIntl","Table","Column","AutoSizer","KeyBinder","nameCellRenderer","iconCellRenderer","focus","messages","headerCellRenderer","sizeCellRenderer","dateCellRenderer","moreOptionsCellRenderer","FIELD_DATE","FIELD_ID","FIELD_NAME","FIELD_SIZE","VIEW_FOLDER","VIEW_RECENTS","ItemList","view","isSmall","isMedium","isTouch","rootId","rootElement","canShare","canDownload","canDelete","canPreview","canRename","onItemClick","onItemSelect","onItemPick","onItemDelete","onItemDownload","onItemRename","onItemShare","onItemPreview","onItemCustomShare","onItemMoveTo","onItemCopy","onItemSetThumbnail","onItemRemoveThumbnail","onSortChange","currentCollection","tableRef","focusedRow","intl","nameCell","iconCell","dateCell","sizeAccessCell","moreOptionsCell","isRecents","hasSort","id","items","sortBy","sortDirection","rowCount","length","rowClassName","index","selected","sort","by","direction","scrollToRow","onSectionRendered","focusOnRender","width","height","rowData","startIndex","stopIndex","rowStartIndex","rowStopIndex","formatMessage","name","interacted","modified","size"],"mappings":"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","sourcesContent":["/**\n * @flow\n * @file Item list component\n * @author Box\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport { injectIntl } from 'react-intl';\nimport { Table, Column } from 'react-virtualized/dist/es/Table';\nimport AutoSizer from 'react-virtualized/dist/es/AutoSizer';\nimport KeyBinder from '../common/KeyBinder';\nimport nameCellRenderer from '../common/item/nameCellRenderer';\nimport iconCellRenderer from '../common/item/iconCellRenderer';\nimport { focus } from '../../utils/dom';\nimport messages from '../common/messages';\nimport headerCellRenderer from './headerCellRenderer';\nimport sizeCellRenderer from './sizeCellRenderer';\nimport dateCellRenderer from './dateCellRenderer';\nimport moreOptionsCellRenderer from './moreOptionsCellRenderer';\nimport { FIELD_DATE, FIELD_ID, FIELD_NAME, FIELD_SIZE, VIEW_FOLDER, VIEW_RECENTS } from '../../constants';\nimport './ItemList.scss';\n\ntype Props = {\n    canDelete: boolean,\n    canDownload: boolean,\n    canPreview: boolean,\n    canRename: boolean,\n    canShare: boolean,\n    currentCollection: Collection,\n    focusedRow: number,\n    isMedium: boolean,\n    isSmall: boolean,\n    isTouch: boolean,\n    onItemClick: Function,\n    onItemCustomShare: Function,\n    onItemDelete: Function,\n    onItemDownload: Function,\n    onItemMoveTo: Function,\n    onItemCopy: Function,\n    onItemPick: Function,\n    onItemPreview: Function,\n    onItemRename: Function,\n    onItemSelect: Function,\n    onItemShare: Function,\n    onItemSetThumbnail: Function,\n    onItemRemoveThumbnail: Function,\n    onSortChange: Function,\n    rootElement: HTMLElement,\n    rootId: string,\n    tableRef: Function,\n    view: View,\n} & InjectIntlProvidedProps;\n\nconst ItemList = ({\n    view,\n    isSmall,\n    isMedium,\n    isTouch,\n    rootId,\n    rootElement,\n    canShare,\n    canDownload,\n    canDelete,\n    canPreview,\n    canRename,\n    onItemClick,\n    onItemSelect,\n    onItemPick,\n    onItemDelete,\n    onItemDownload,\n    onItemRename,\n    onItemShare,\n    onItemPreview,\n    onItemCustomShare,\n    onItemMoveTo,\n    onItemCopy,\n    onItemSetThumbnail,\n    onItemRemoveThumbnail,\n    onSortChange,\n    currentCollection,\n    tableRef,\n    focusedRow,\n    intl,\n}: Props) => {\n    const nameCell = nameCellRenderer(\n        rootId,\n        view,\n        onItemClick,\n        onItemSelect,\n        canPreview,\n        isSmall, // shows details if false\n        isTouch,\n    );\n    const iconCell = iconCellRenderer();\n    const dateCell = dateCellRenderer();\n    const sizeAccessCell = sizeCellRenderer();\n    const moreOptionsCell = moreOptionsCellRenderer(\n        canPreview,\n        canShare,\n        canDownload,\n        canDelete,\n        canRename,\n        onItemSelect,\n        onItemDelete,\n        onItemDownload,\n        onItemPick,\n        onItemRename,\n        onItemShare,\n        onItemPreview,\n        onItemCustomShare,\n        onItemMoveTo,\n        onItemCopy,\n        onItemSetThumbnail,\n        onItemRemoveThumbnail,\n        isSmall,\n    );\n    const isRecents: boolean = view === VIEW_RECENTS;\n    const hasSort: boolean = view === VIEW_FOLDER;\n    const { id, items = [], sortBy, sortDirection }: Collection = currentCollection;\n    const rowCount: number = items.length;\n    const rowClassName = ({ index }) => {\n        if (index === -1) {\n            return 'bce-item-header-row';\n        }\n\n        const { selected } = items[index];\n        return classNames(`bce-item-row bce-item-row-${index}`, {\n            'bce-item-row-selected': selected,\n        });\n    };\n\n    const sort = ({ sortBy: by, sortDirection: direction }) => {\n        onSortChange(by, direction);\n    };\n\n    return (\n        <KeyBinder\n            id={id}\n            items={items}\n            columnCount={1}\n            rowCount={rowCount}\n            className=\"bce-item-grid\"\n            onRename={onItemRename}\n            onShare={onItemShare}\n            onDownload={onItemDownload}\n            onOpen={onItemClick}\n            onSelect={onItemSelect}\n            onDelete={onItemDelete}\n            scrollToRow={focusedRow}\n            onScrollToChange={({ scrollToRow }) => focus(rootElement, `.bce-item-row-${scrollToRow}`)}\n        >\n            {({ onSectionRendered, scrollToRow, focusOnRender }) => (\n                <AutoSizer>\n                    {({ width, height }) => (\n                        <Table\n                            width={width}\n                            height={height}\n                            headerHeight={isSmall ? 0 : 40}\n                            rowHeight={50}\n                            rowCount={rowCount}\n                            rowGetter={({ index }) => items[index]}\n                            ref={tableRef}\n                            rowClassName={rowClassName}\n                            scrollToIndex={scrollToRow}\n                            sort={sort}\n                            sortBy={sortBy}\n                            sortDirection={sortDirection}\n                            onRowClick={({ rowData }) => onItemSelect(rowData)}\n                            onRowsRendered={({ startIndex, stopIndex }) => {\n                                onSectionRendered({\n                                    rowStartIndex: startIndex,\n                                    rowStopIndex: stopIndex,\n                                });\n                                if (focusOnRender) {\n                                    focus(rootElement, `.bce-item-row-${scrollToRow}`);\n                                }\n                            }}\n                        >\n                            <Column\n                                disableSort\n                                dataKey={FIELD_ID}\n                                cellRenderer={iconCell}\n                                width={isSmall ? 30 : 50}\n                                flexShrink={0}\n                            />\n                            <Column\n                                disableSort={!hasSort}\n                                label={intl.formatMessage(messages.name)}\n                                dataKey={FIELD_NAME}\n                                cellRenderer={nameCell}\n                                headerRenderer={headerCellRenderer}\n                                width={300}\n                                flexGrow={1}\n                            />\n                            {isSmall ? null : (\n                                <Column\n                                    className=\"bce-item-coloumn\"\n                                    disableSort={!hasSort}\n                                    label={\n                                        isRecents\n                                            ? intl.formatMessage(messages.interacted)\n                                            : intl.formatMessage(messages.modified)\n                                    }\n                                    dataKey={FIELD_DATE}\n                                    cellRenderer={dateCell}\n                                    headerRenderer={headerCellRenderer}\n                                    width={isRecents ? 120 : 300}\n                                    flexGrow={1}\n                                />\n                            )}\n                            {isSmall || isMedium ? null : (\n                                <Column\n                                    className=\"bce-item-coloumn\"\n                                    disableSort={!hasSort}\n                                    label={intl.formatMessage(messages.size)}\n                                    dataKey={FIELD_SIZE}\n                                    cellRenderer={sizeAccessCell}\n                                    headerRenderer={headerCellRenderer}\n                                    width={80}\n                                    flexShrink={0}\n                                />\n                            )}\n                            <Column\n                                disableSort\n                                dataKey={FIELD_ID}\n                                cellRenderer={moreOptionsCell}\n                                width={isSmall ? 58 : 140}\n                                flexShrink={0}\n                            />\n                        </Table>\n                    )}\n                </AutoSizer>\n            )}\n        </KeyBinder>\n    );\n};\n\nexport default injectIntl(ItemList);\n"],"file":"ItemList.js"}