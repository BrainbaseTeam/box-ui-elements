{"version":3,"sources":["../../../src/elements/content-explorer/ItemList.js"],"names":["React","classNames","injectIntl","Table","Column","AutoSizer","KeyBinder","nameCellRenderer","iconCellRenderer","focus","messages","headerCellRenderer","sizeCellRenderer","dateCellRenderer","moreOptionsCellRenderer","selectionCellRenderer","FIELD_DATE","FIELD_ID","FIELD_NAME","FIELD_SIZE","VIEW_FOLDER","VIEW_RECENTS","ItemList","view","isSmall","isMedium","isTouch","rootId","rootElement","canShare","canDownload","canDelete","canPreview","canRename","onItemClick","onItemSelect","onItemPick","onItemDelete","onItemDownload","onItemRename","onItemShare","onItemPreview","onSortChange","currentCollection","tableRef","focusedRow","intl","nameCell","selectionCell","iconCell","dateCell","sizeAccessCell","moreOptionsCell","isRecents","hasSort","id","items","sortBy","sortDirection","rowCount","length","rowClassName","index","selected","sort","by","direction","scrollToRow","onSectionRendered","focusOnRender","width","height","rowData","startIndex","stopIndex","rowStartIndex","rowStopIndex","formatMessage","name","interacted","modified","size"],"mappings":"AAAA;;;;;AAMA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,SAASC,UAAT,QAA2B,YAA3B;AACA,SAASC,KAAT,EAAgBC,MAAhB,QAA8B,iCAA9B;AACA,OAAOC,SAAP,MAAsB,qCAAtB;AACA,OAAOC,SAAP,MAAsB,qBAAtB;AACA,OAAOC,gBAAP,MAA6B,iCAA7B;AACA,OAAOC,gBAAP,MAA6B,iCAA7B;AACA,SAASC,KAAT,QAAsB,iBAAtB;AACA,OAAOC,QAAP,MAAqB,oBAArB;AACA,OAAOC,kBAAP,MAA+B,sBAA/B;AACA,OAAOC,gBAAP,MAA6B,oBAA7B;AACA,OAAOC,gBAAP,MAA6B,oBAA7B;AACA,OAAOC,uBAAP,MAAoC,2BAApC;AACA,OAAOC,qBAAP,MAAkC,yBAAlC;AACA,SAASC,UAAT,EAAqBC,QAArB,EAA+BC,UAA/B,EAA2CC,UAA3C,EAAuDC,WAAvD,EAAoEC,YAApE,QAAwF,iBAAxF;AACA,OAAO,iBAAP;;AA4BA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,OAyBJ;AAAA,MAxBTC,IAwBS,QAxBTA,IAwBS;AAAA,MAvBTC,OAuBS,QAvBTA,OAuBS;AAAA,MAtBTC,QAsBS,QAtBTA,QAsBS;AAAA,MArBTC,OAqBS,QArBTA,OAqBS;AAAA,MApBTC,MAoBS,QApBTA,MAoBS;AAAA,MAnBTC,WAmBS,QAnBTA,WAmBS;AAAA,MAlBTC,QAkBS,QAlBTA,QAkBS;AAAA,MAjBTC,WAiBS,QAjBTA,WAiBS;AAAA,MAhBTC,SAgBS,QAhBTA,SAgBS;AAAA,MAfTC,UAeS,QAfTA,UAeS;AAAA,MAdTC,SAcS,QAdTA,SAcS;AAAA,MAbTC,WAaS,QAbTA,WAaS;AAAA,MAZTC,YAYS,QAZTA,YAYS;AAAA,MAXTC,UAWS,QAXTA,UAWS;AAAA,MAVTC,YAUS,QAVTA,YAUS;AAAA,MATTC,cASS,QATTA,cASS;AAAA,MARTC,YAQS,QARTA,YAQS;AAAA,MAPTC,WAOS,QAPTA,WAOS;AAAA,MANTC,aAMS,QANTA,aAMS;AAAA,MALTC,YAKS,QALTA,YAKS;AAAA,MAJTC,iBAIS,QAJTA,iBAIS;AAAA,MAHTC,QAGS,QAHTA,QAGS;AAAA,MAFTC,UAES,QAFTA,UAES;AAAA,MADTC,IACS,QADTA,IACS;AACT,MAAMC,QAAQ,GAAGxC,gBAAgB,CAC7BoB,MAD6B,EAE7BJ,IAF6B,EAG7BW,WAH6B,EAI7BC,YAJ6B,EAK7BH,UAL6B,EAM7BR,OAN6B,EAMpB;AACTE,EAAAA,OAP6B,CAAjC;AASA,MAAMsB,aAAa,GAAGjC,qBAAqB,CACvCqB,UADuC,CAA3C;AAGA,MAAMa,QAAQ,GAAGzC,gBAAgB,EAAjC;AACA,MAAM0C,QAAQ,GAAGrC,gBAAgB,EAAjC;AACA,MAAMsC,cAAc,GAAGvC,gBAAgB,EAAvC;AACA,MAAMwC,eAAe,GAAGtC,uBAAuB,CAC3CkB,UAD2C,EAE3CH,QAF2C,EAG3CC,WAH2C,EAI3CC,SAJ2C,EAK3CE,SAL2C,EAM3CE,YAN2C,EAO3CE,YAP2C,EAQ3CC,cAR2C,EAS3CC,YAT2C,EAU3CC,WAV2C,EAW3CC,aAX2C,EAY3CjB,OAZ2C,CAA/C;AAcA,MAAM6B,SAAkB,GAAG9B,IAAI,KAAKF,YAApC;AACA,MAAMiC,OAAgB,GAAG/B,IAAI,KAAKH,WAAlC;AA/BS,MAgCDmC,EAhCC,GAgCqDZ,iBAhCrD,CAgCDY,EAhCC;AAAA,8BAgCqDZ,iBAhCrD,CAgCGa,KAhCH;AAAA,MAgCGA,KAhCH,sCAgCW,EAhCX;AAAA,MAgCeC,MAhCf,GAgCqDd,iBAhCrD,CAgCec,MAhCf;AAAA,MAgCuBC,aAhCvB,GAgCqDf,iBAhCrD,CAgCuBe,aAhCvB;AAiCT,MAAMC,QAAgB,GAAGH,KAAK,CAACI,MAA/B;;AACA,MAAMC,YAAY,GAAG,SAAfA,YAAe,QAAe;AAAA,QAAZC,KAAY,SAAZA,KAAY;;AAChC,QAAIA,KAAK,KAAK,CAAC,CAAf,EAAkB;AACd,aAAO,qBAAP;AACH;;AAH+B,QAKxBC,QALwB,GAKXP,KAAK,CAACM,KAAD,CALM,CAKxBC,QALwB;AAMhC,WAAO9D,UAAU,qCAA8B6D,KAA9B,GAAuC;AACpD,+BAAyBC;AAD2B,KAAvC,CAAjB;AAGH,GATD;;AAWA,MAAMC,IAAI,GAAG,SAAPA,IAAO,QAA8C;AAAA,QAAnCC,EAAmC,SAA3CR,MAA2C;AAAA,QAAhBS,SAAgB,SAA/BR,aAA+B;AACvDhB,IAAAA,YAAY,CAACuB,EAAD,EAAKC,SAAL,CAAZ;AACH,GAFD;;AAIA,sBACI,oBAAC,SAAD;AACI,IAAA,EAAE,EAAEX,EADR;AAEI,IAAA,KAAK,EAAEC,KAFX;AAGI,IAAA,WAAW,EAAE,CAHjB;AAII,IAAA,QAAQ,EAAEG,QAJd;AAKI,IAAA,SAAS,EAAC,eALd;AAMI,IAAA,QAAQ,EAAEpB,YANd;AAOI,IAAA,OAAO,EAAEC,WAPb;AAQI,IAAA,UAAU,EAAEF,cARhB;AASI,IAAA,MAAM,EAAEJ,WATZ;AAUI,IAAA,QAAQ,EAAEC,YAVd;AAWI,IAAA,QAAQ,EAAEE,YAXd;AAYI,IAAA,WAAW,EAAEQ,UAZjB;AAaI,IAAA,gBAAgB,EAAE;AAAA,UAAGsB,WAAH,SAAGA,WAAH;AAAA,aAAqB1D,KAAK,CAACmB,WAAD,0BAA+BuC,WAA/B,EAA1B;AAAA;AAbtB,KAeK;AAAA,QAAGC,iBAAH,SAAGA,iBAAH;AAAA,QAAsBD,WAAtB,SAAsBA,WAAtB;AAAA,QAAmCE,aAAnC,SAAmCA,aAAnC;AAAA,wBACG,oBAAC,SAAD,QACK;AAAA,UAAGC,KAAH,SAAGA,KAAH;AAAA,UAAUC,MAAV,SAAUA,MAAV;AAAA,0BACG,oBAAC,KAAD;AACI,QAAA,KAAK,EAAED,KADX;AAEI,QAAA,MAAM,EAAEC,MAFZ;AAGI,QAAA,YAAY,EAAE/C,OAAO,GAAG,CAAH,GAAO,EAHhC;AAII,QAAA,SAAS,EAAE,EAJf;AAKI,QAAA,QAAQ,EAAEmC,QALd;AAMI,QAAA,SAAS,EAAE;AAAA,cAAGG,KAAH,SAAGA,KAAH;AAAA,iBAAeN,KAAK,CAACM,KAAD,CAApB;AAAA,SANf;AAOI,QAAA,GAAG,EAAElB,QAPT;AAQI,QAAA,YAAY,EAAEiB,YARlB;AASI,QAAA,aAAa,EAAEM,WATnB;AAUI,QAAA,IAAI,EAAEH,IAVV;AAWI,QAAA,MAAM,EAAEP,MAXZ;AAYI,QAAA,aAAa,EAAEC,aAZnB;AAaI,QAAA,UAAU,EAAE;AAAA,cAAGc,OAAH,SAAGA,OAAH;AAAA,iBAAiBrC,YAAY,CAACqC,OAAD,CAA7B;AAAA,SAbhB;AAcI,QAAA,cAAc,EAAE,+BAA+B;AAAA,cAA5BC,UAA4B,SAA5BA,UAA4B;AAAA,cAAhBC,SAAgB,SAAhBA,SAAgB;AAC3CN,UAAAA,iBAAiB,CAAC;AACdO,YAAAA,aAAa,EAAEF,UADD;AAEdG,YAAAA,YAAY,EAAEF;AAFA,WAAD,CAAjB;;AAIA,cAAIL,aAAJ,EAAmB;AACf5D,YAAAA,KAAK,CAACmB,WAAD,0BAA+BuC,WAA/B,EAAL;AACH;AACJ;AAtBL,sBAwBI,oBAAC,MAAD;AACI,QAAA,WAAW,MADf;AAEI,QAAA,OAAO,EAAElD,QAFb;AAGI,QAAA,YAAY,EAAEgC,QAHlB;AAII,QAAA,KAAK,EAAEzB,OAAO,GAAG,EAAH,GAAQ,EAJ1B;AAKI,QAAA,UAAU,EAAE;AALhB,QAxBJ,eA+BI,oBAAC,MAAD;AACI,QAAA,WAAW,EAAE,CAAC8B,OADlB;AAEI,QAAA,KAAK,EAAER,IAAI,CAAC+B,aAAL,CAAmBnE,QAAQ,CAACoE,IAA5B,CAFX;AAGI,QAAA,OAAO,EAAE5D,UAHb;AAII,QAAA,YAAY,EAAE6B,QAJlB;AAKI,QAAA,cAAc,EAAEpC,kBALpB;AAMI,QAAA,KAAK,EAAE,GANX;AAOI,QAAA,QAAQ,EAAE;AAPd,QA/BJ,EAwCKa,OAAO,GAAG,IAAH,gBACJ,oBAAC,MAAD;AACI,QAAA,SAAS,EAAC,kBADd;AAEI,QAAA,WAAW,EAAE,CAAC8B,OAFlB;AAGI,QAAA,KAAK,EACDD,SAAS,GACHP,IAAI,CAAC+B,aAAL,CAAmBnE,QAAQ,CAACqE,UAA5B,CADG,GAEHjC,IAAI,CAAC+B,aAAL,CAAmBnE,QAAQ,CAACsE,QAA5B,CANd;AAQI,QAAA,OAAO,EAAEhE,UARb;AASI,QAAA,YAAY,EAAEkC,QATlB;AAUI,QAAA,cAAc,EAAEvC,kBAVpB;AAWI,QAAA,KAAK,EAAE0C,SAAS,GAAG,GAAH,GAAS,GAX7B;AAYI,QAAA,QAAQ,EAAE;AAZd,QAzCR,EAwDK7B,OAAO,IAAIC,QAAX,GAAsB,IAAtB,gBACG,oBAAC,MAAD;AACI,QAAA,SAAS,EAAC,kBADd;AAEI,QAAA,WAAW,EAAE,CAAC6B,OAFlB;AAGI,QAAA,KAAK,EAAER,IAAI,CAAC+B,aAAL,CAAmBnE,QAAQ,CAACuE,IAA5B,CAHX;AAII,QAAA,OAAO,EAAE9D,UAJb;AAKI,QAAA,YAAY,EAAEgC,cALlB;AAMI,QAAA,cAAc,EAAExC,kBANpB;AAOI,QAAA,KAAK,EAAE,EAPX;AAQI,QAAA,UAAU,EAAE;AARhB,QAzDR,eAoEI,oBAAC,MAAD;AACI,QAAA,WAAW,MADf;AAEI,QAAA,OAAO,EAAEM,QAFb;AAGI,QAAA,YAAY,EAAEmC,eAHlB;AAII,QAAA,KAAK,EAAE5B,OAAO,IAAI,CAACK,QAAZ,GAAuB,EAAvB,GAA4B,GAJvC;AAKI,QAAA,UAAU,EAAE;AALhB,QApEJ,eA2EI,oBAAC,MAAD;AACI,QAAA,OAAO,EAAEZ,QADb;AAEI,QAAA,YAAY,EAAE+B,aAFlB;AAGI,QAAA,KAAK,EAAExB,OAAO,GAAG,EAAH,GAAQ,EAH1B;AAII,QAAA,UAAU,EAAE;AAJhB,QA3EJ,CADH;AAAA,KADL,CADH;AAAA,GAfL,CADJ;AA0GH,CApLD;;AAsLA,eAAetB,UAAU,CAACoB,QAAD,CAAzB","sourcesContent":["/**\n * @flow\n * @file Item list component\n * @author Box\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport { injectIntl } from 'react-intl';\nimport { Table, Column } from 'react-virtualized/dist/es/Table';\nimport AutoSizer from 'react-virtualized/dist/es/AutoSizer';\nimport KeyBinder from '../common/KeyBinder';\nimport nameCellRenderer from '../common/item/nameCellRenderer';\nimport iconCellRenderer from '../common/item/iconCellRenderer';\nimport { focus } from '../../utils/dom';\nimport messages from '../common/messages';\nimport headerCellRenderer from './headerCellRenderer';\nimport sizeCellRenderer from './sizeCellRenderer';\nimport dateCellRenderer from './dateCellRenderer';\nimport moreOptionsCellRenderer from './moreOptionsCellRenderer';\nimport selectionCellRenderer from './selectionCellRenderer';\nimport { FIELD_DATE, FIELD_ID, FIELD_NAME, FIELD_SIZE, VIEW_FOLDER, VIEW_RECENTS } from '../../constants';\nimport './ItemList.scss';\n\ntype Props = {\n    canDelete: boolean,\n    canDownload: boolean,\n    canPreview: boolean,\n    canRename: boolean,\n    canShare: boolean,\n    currentCollection: Collection,\n    focusedRow: number,\n    isMedium: boolean,\n    isSmall: boolean,\n    isTouch: boolean,\n    onItemClick: Function,\n    onItemDelete: Function,\n    onItemDownload: Function,\n    onItemPick: Function,\n    onItemPreview: Function,\n    onItemRename: Function,\n    onItemSelect: Function,\n    onItemShare: Function,\n    onSortChange: Function,\n    rootElement: HTMLElement,\n    rootId: string,\n    tableRef: Function,\n    view: View,\n} & InjectIntlProvidedProps;\n\nconst ItemList = ({\n    view,\n    isSmall,\n    isMedium,\n    isTouch,\n    rootId,\n    rootElement,\n    canShare,\n    canDownload,\n    canDelete,\n    canPreview,\n    canRename,\n    onItemClick,\n    onItemSelect,\n    onItemPick,\n    onItemDelete,\n    onItemDownload,\n    onItemRename,\n    onItemShare,\n    onItemPreview,\n    onSortChange,\n    currentCollection,\n    tableRef,\n    focusedRow,\n    intl,\n}: Props) => {\n    const nameCell = nameCellRenderer(\n        rootId,\n        view,\n        onItemClick,\n        onItemSelect,\n        canPreview,\n        isSmall, // shows details if false\n        isTouch,\n    );\n    const selectionCell = selectionCellRenderer(\n        onItemPick,\n    );\n    const iconCell = iconCellRenderer();\n    const dateCell = dateCellRenderer();\n    const sizeAccessCell = sizeCellRenderer();\n    const moreOptionsCell = moreOptionsCellRenderer(\n        canPreview,\n        canShare,\n        canDownload,\n        canDelete,\n        canRename,\n        onItemSelect,\n        onItemDelete,\n        onItemDownload,\n        onItemRename,\n        onItemShare,\n        onItemPreview,\n        isSmall,\n    );\n    const isRecents: boolean = view === VIEW_RECENTS;\n    const hasSort: boolean = view === VIEW_FOLDER;\n    const { id, items = [], sortBy, sortDirection }: Collection = currentCollection;\n    const rowCount: number = items.length;\n    const rowClassName = ({ index }) => {\n        if (index === -1) {\n            return 'bce-item-header-row';\n        }\n\n        const { selected } = items[index];\n        return classNames(`bce-item-row bce-item-row-${index}`, {\n            'bce-item-row-selected': selected,\n        });\n    };\n\n    const sort = ({ sortBy: by, sortDirection: direction }) => {\n        onSortChange(by, direction);\n    };\n\n    return (\n        <KeyBinder\n            id={id}\n            items={items}\n            columnCount={1}\n            rowCount={rowCount}\n            className=\"bce-item-grid\"\n            onRename={onItemRename}\n            onShare={onItemShare}\n            onDownload={onItemDownload}\n            onOpen={onItemClick}\n            onSelect={onItemSelect}\n            onDelete={onItemDelete}\n            scrollToRow={focusedRow}\n            onScrollToChange={({ scrollToRow }) => focus(rootElement, `.bce-item-row-${scrollToRow}`)}\n        >\n            {({ onSectionRendered, scrollToRow, focusOnRender }) => (\n                <AutoSizer>\n                    {({ width, height }) => (\n                        <Table\n                            width={width}\n                            height={height}\n                            headerHeight={isSmall ? 0 : 40}\n                            rowHeight={50}\n                            rowCount={rowCount}\n                            rowGetter={({ index }) => items[index]}\n                            ref={tableRef}\n                            rowClassName={rowClassName}\n                            scrollToIndex={scrollToRow}\n                            sort={sort}\n                            sortBy={sortBy}\n                            sortDirection={sortDirection}\n                            onRowClick={({ rowData }) => onItemSelect(rowData)}\n                            onRowsRendered={({ startIndex, stopIndex }) => {\n                                onSectionRendered({\n                                    rowStartIndex: startIndex,\n                                    rowStopIndex: stopIndex,\n                                });\n                                if (focusOnRender) {\n                                    focus(rootElement, `.bce-item-row-${scrollToRow}`);\n                                }\n                            }}\n                        >\n                            <Column\n                                disableSort\n                                dataKey={FIELD_ID}\n                                cellRenderer={iconCell}\n                                width={isSmall ? 30 : 50}\n                                flexShrink={0}\n                            />\n                            <Column\n                                disableSort={!hasSort}\n                                label={intl.formatMessage(messages.name)}\n                                dataKey={FIELD_NAME}\n                                cellRenderer={nameCell}\n                                headerRenderer={headerCellRenderer}\n                                width={300}\n                                flexGrow={1}\n                            />\n                            {isSmall ? null : (\n                                <Column\n                                    className=\"bce-item-coloumn\"\n                                    disableSort={!hasSort}\n                                    label={\n                                        isRecents\n                                            ? intl.formatMessage(messages.interacted)\n                                            : intl.formatMessage(messages.modified)\n                                    }\n                                    dataKey={FIELD_DATE}\n                                    cellRenderer={dateCell}\n                                    headerRenderer={headerCellRenderer}\n                                    width={isRecents ? 120 : 300}\n                                    flexGrow={1}\n                                />\n                            )}\n                            {isSmall || isMedium ? null : (\n                                <Column\n                                    className=\"bce-item-coloumn\"\n                                    disableSort={!hasSort}\n                                    label={intl.formatMessage(messages.size)}\n                                    dataKey={FIELD_SIZE}\n                                    cellRenderer={sizeAccessCell}\n                                    headerRenderer={headerCellRenderer}\n                                    width={80}\n                                    flexShrink={0}\n                                />\n                            )}\n                            <Column\n                                disableSort\n                                dataKey={FIELD_ID}\n                                cellRenderer={moreOptionsCell}\n                                width={isSmall || !canShare ? 58 : 140}\n                                flexShrink={0}\n                            />\n                            <Column\n                                dataKey={FIELD_ID}\n                                cellRenderer={selectionCell}\n                                width={isSmall ? 20 : 30}\n                                flexShrink={0}\n                            />\n                        </Table>\n                    )}\n                </AutoSizer>\n            )}\n        </KeyBinder>\n    );\n};\n\nexport default injectIntl(ItemList);\n"],"file":"ItemList.js"}