{"version":3,"sources":["../../../../src/elements/content-preview/preview-header/PreviewHeader.js"],"names":["React","injectIntl","classNames","getProp","AsyncLoad","FileInfo","IconClose","IconDownload","IconDrawAnnotationMode","IconPointAnnotation","IconPrint","Logo","messages","PlainButton","bdlGray50","LoadableContentOpenWith","loader","PreviewHeader","canAnnotate","canDownload","canPrint","contentOpenWithProps","file","intl","logoUrl","onClose","onDownload","onPrint","selectedVersion","token","fileId","id","shouldRenderOpenWith","show","currentVersionId","selectedVersionId","isPreviewingCurrentVersion","closeMsg","formatMessage","close","back","printMsg","print","downloadMsg","download","drawMsg","drawAnnotation","pointMsg","pointAnnotation"],"mappings":";;AAAA;;;;;AAMA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,UAAT,QAA2B,YAA3B;AAEA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,OAAP,MAAoB,YAApB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,SAAP,MAAsB,kCAAtB;AACA,OAAOC,YAAP,MAAyB,0CAAzB;AACA,OAAOC,sBAAP,MAAmC,+CAAnC;AACA,OAAOC,mBAAP,MAAgC,gDAAhC;AACA,OAAOC,SAAP,MAAsB,kCAAtB;AACA,OAAOC,IAAP,MAAiB,0BAAjB;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,WAAP,MAAwB,8CAAxB;AACA,SAASC,SAAT,QAA0B,2BAA1B;AAGA,OAAO,sBAAP;AAgBA,IAAMC,uBAAuB,GAAGX,SAAS,CAAC;AACtCY,EAAAA,MAAM,EAAE;AAAA,WAAM;AAAO;AAAiE,6BAAxE,CAAN;AAAA;AAD8B,CAAD,CAAzC;;AAIA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,OAaT;AAAA,MAZTC,WAYS,QAZTA,WAYS;AAAA,MAXTC,WAWS,QAXTA,WAWS;AAAA,MAVTC,QAUS,QAVTA,QAUS;AAAA,mCATTC,oBASS;AAAA,MATTA,oBASS,sCATc,EASd;AAAA,MARTC,IAQS,QARTA,IAQS;AAAA,MAPTC,IAOS,QAPTA,IAOS;AAAA,MANTC,OAMS,QANTA,OAMS;AAAA,MALTC,OAKS,QALTA,OAKS;AAAA,MAJTC,UAIS,QAJTA,UAIS;AAAA,MAHTC,OAGS,QAHTA,OAGS;AAAA,MAFTC,eAES,QAFTA,eAES;AAAA,MADTC,KACS,QADTA,KACS;AACT,MAAMC,MAAM,GAAGR,IAAI,IAAIA,IAAI,CAACS,EAA5B;AACA,MAAMC,oBAAoB,GAAGF,MAAM,IAAIT,oBAAoB,CAACY,IAA5D;AACA,MAAMC,gBAAgB,GAAG/B,OAAO,CAACmB,IAAD,EAAO,iBAAP,CAAhC;AACA,MAAMa,iBAAiB,GAAGhC,OAAO,CAACyB,eAAD,EAAkB,IAAlB,EAAwBM,gBAAxB,CAAjC;AACA,MAAME,0BAA0B,GAAGF,gBAAgB,KAAKC,iBAAxD,CALS,CAOT;;AACA,MAAME,QAAQ,GAAGD,0BAA0B,GACrCb,IAAI,CAACe,aAAL,CAAmB1B,QAAQ,CAAC2B,KAA5B,CADqC,GAErChB,IAAI,CAACe,aAAL,CAAmB1B,QAAQ,CAAC4B,IAA5B,CAFN;AAGA,MAAMC,QAAQ,GAAGlB,IAAI,CAACe,aAAL,CAAmB1B,QAAQ,CAAC8B,KAA5B,CAAjB;AACA,MAAMC,WAAW,GAAGpB,IAAI,CAACe,aAAL,CAAmB1B,QAAQ,CAACgC,QAA5B,CAApB;AACA,MAAMC,OAAO,GAAGtB,IAAI,CAACe,aAAL,CAAmB1B,QAAQ,CAACkC,cAA5B,CAAhB;AACA,MAAMC,QAAQ,GAAGxB,IAAI,CAACe,aAAL,CAAmB1B,QAAQ,CAACoC,eAA5B,CAAjB;AAEA,SACI;AACI,IAAA,SAAS,EAAE9C,UAAU,CAAC,oBAAD,EAAuB;AACxC,mCAA6B,CAACkC;AADU,KAAvB;AADzB,KASI;AAAK,IAAA,SAAS,EAAC;AAAf,KACKZ,OAAO,GAAG,oBAAC,IAAD;AAAM,IAAA,GAAG,EAAEA;AAAX,IAAH,GAA4B,oBAAC,QAAD;AAAU,IAAA,IAAI,EAAEF,IAAhB;AAAsB,IAAA,OAAO,EAAEM;AAA/B,IADxC,EAGI;AAAK,IAAA,SAAS,EAAC;AAAf,KACKQ,0BAA0B,IACvB,0CACKJ,oBAAoB,IACjB,oBAAC,uBAAD;AACI,IAAA,SAAS,EAAC,eADd;AAEI,IAAA,MAAM,EAAEF,MAFZ;AAGI,IAAA,KAAK,EAAED;AAHX,KAIQR,oBAJR,EAFR,EASKH,WAAW,IACR,0CACI,oBAAC,WAAD;AACI,kBAAY2B,OADhB;AAEI,IAAA,SAAS,EAAC,6DAFd;AAGI,IAAA,KAAK,EAAEA,OAHX;AAII,IAAA,IAAI,EAAC;AAJT,KAMI,oBAAC,sBAAD;AAAwB,IAAA,KAAK,EAAE/B,SAA/B;AAA0C,IAAA,MAAM,EAAE,EAAlD;AAAsD,IAAA,KAAK,EAAE;AAA7D,IANJ,CADJ,EASI,oBAAC,WAAD;AACI,kBAAYiC,QADhB;AAEI,IAAA,SAAS,EAAC,8DAFd;AAGI,IAAA,KAAK,EAAEA,QAHX;AAII,IAAA,IAAI,EAAC;AAJT,KAMI,oBAAC,mBAAD;AAAqB,IAAA,KAAK,EAAEjC,SAA5B;AAAuC,IAAA,MAAM,EAAE,EAA/C;AAAmD,IAAA,KAAK,EAAE;AAA1D,IANJ,CATJ,CAVR,EA6BKM,QAAQ,IACL,oBAAC,WAAD;AACI,kBAAYqB,QADhB;AAEI,IAAA,SAAS,EAAC,2BAFd;AAGI,IAAA,OAAO,EAAEd,OAHb;AAII,IAAA,KAAK,EAAEc,QAJX;AAKI,IAAA,IAAI,EAAC;AALT,KAOI,oBAAC,SAAD;AAAW,IAAA,KAAK,EAAE3B,SAAlB;AAA6B,IAAA,MAAM,EAAE,EAArC;AAAyC,IAAA,KAAK,EAAE;AAAhD,IAPJ,CA9BR,EAwCKK,WAAW,IACR,oBAAC,WAAD;AACI,kBAAYwB,WADhB;AAEI,IAAA,SAAS,EAAC,2BAFd;AAGI,IAAA,OAAO,EAAEjB,UAHb;AAII,IAAA,KAAK,EAAEiB,WAJX;AAKI,IAAA,IAAI,EAAC;AALT,KAOI,oBAAC,YAAD;AAAc,IAAA,KAAK,EAAE7B,SAArB;AAAgC,IAAA,MAAM,EAAE,EAAxC;AAA4C,IAAA,KAAK,EAAE;AAAnD,IAPJ,CAzCR,CAFR,EAwDKW,OAAO,IACJ,oBAAC,WAAD;AACI,kBAAYW,0BAA0B,IAAIC,QAD9C;AAEI,IAAA,SAAS,EAAC,2DAFd;AAGI,IAAA,OAAO,EAAEZ,OAHb;AAII,IAAA,IAAI,EAAC;AAJT,KAMKW,0BAA0B,GACvB,oBAAC,SAAD;AAAW,IAAA,KAAK,EAAEtB,SAAlB;AAA6B,IAAA,MAAM,EAAE,EAArC;AAAyC,IAAA,KAAK,EAAE;AAAhD,IADuB,GAGvBuB,QATR,CAzDR,CAHJ,CATJ,CADJ;AAuFH,CApHD;;AAsHA,eAAepC,UAAU,CAACgB,aAAD,CAAzB","sourcesContent":["/**\n * @flow\n * @file Preview header component\n * @author Box\n */\n\nimport React from 'react';\nimport { injectIntl } from 'react-intl';\nimport type { InjectIntlProvidedProps } from 'react-intl';\nimport classNames from 'classnames';\nimport getProp from 'lodash/get';\nimport AsyncLoad from '../../common/async-load';\nimport FileInfo from './FileInfo';\nimport IconClose from '../../../icons/general/IconClose';\nimport IconDownload from '../../../icons/general/IconDownloadSolid';\nimport IconDrawAnnotationMode from '../../../icons/annotations/IconDrawAnnotation';\nimport IconPointAnnotation from '../../../icons/annotations/IconPointAnnotation';\nimport IconPrint from '../../../icons/general/IconPrint';\nimport Logo from '../../common/header/Logo';\nimport messages from '../../common/messages';\nimport PlainButton from '../../../components/plain-button/PlainButton';\nimport { bdlGray50 } from '../../../styles/variables';\nimport type { BoxItem, BoxItemVersion } from '../../../common/types/core';\n\nimport './PreviewHeader.scss';\n\ntype Props = {\n    canAnnotate: boolean,\n    canDownload: boolean,\n    canPrint?: boolean,\n    contentOpenWithProps?: ContentOpenWithProps,\n    file?: BoxItem,\n    logoUrl?: string,\n    onClose?: Function,\n    onDownload: Function,\n    onPrint: Function,\n    selectedVersion: ?BoxItemVersion,\n    token: ?string,\n} & InjectIntlProvidedProps;\n\nconst LoadableContentOpenWith = AsyncLoad({\n    loader: () => import(/* webpackMode: \"lazy\", webpackChunkName: \"content-open-with\" */ '../../content-open-with'),\n});\n\nconst PreviewHeader = ({\n    canAnnotate,\n    canDownload,\n    canPrint,\n    contentOpenWithProps = {},\n    file,\n    intl,\n    logoUrl,\n    onClose,\n    onDownload,\n    onPrint,\n    selectedVersion,\n    token,\n}: Props) => {\n    const fileId = file && file.id;\n    const shouldRenderOpenWith = fileId && contentOpenWithProps.show;\n    const currentVersionId = getProp(file, 'file_version.id');\n    const selectedVersionId = getProp(selectedVersion, 'id', currentVersionId);\n    const isPreviewingCurrentVersion = currentVersionId === selectedVersionId;\n\n    // When previewing an older version the close button returns the user to the current version\n    const closeMsg = isPreviewingCurrentVersion\n        ? intl.formatMessage(messages.close)\n        : intl.formatMessage(messages.back);\n    const printMsg = intl.formatMessage(messages.print);\n    const downloadMsg = intl.formatMessage(messages.download);\n    const drawMsg = intl.formatMessage(messages.drawAnnotation);\n    const pointMsg = intl.formatMessage(messages.pointAnnotation);\n\n    return (\n        <header\n            className={classNames('bcpr-PreviewHeader', {\n                'bcpr-PreviewHeader--basic': !isPreviewingCurrentVersion,\n            })}\n        >\n            {/*\n                bp-header and bp-base-header are used by box-annotations,\n                and must be put one level under bcpr-PreviewHeader\n            */}\n            <div className=\"bcpr-PreviewHeader-content bp-header bp-base-header\">\n                {logoUrl ? <Logo url={logoUrl} /> : <FileInfo file={file} version={selectedVersion} />}\n\n                <div className=\"bcpr-PreviewHeader-controls\">\n                    {isPreviewingCurrentVersion && (\n                        <>\n                            {shouldRenderOpenWith && (\n                                <LoadableContentOpenWith\n                                    className=\"bcpr-bcow-btn\"\n                                    fileId={fileId}\n                                    token={token}\n                                    {...contentOpenWithProps}\n                                />\n                            )}\n                            {canAnnotate && (\n                                <>\n                                    <PlainButton\n                                        aria-label={drawMsg}\n                                        className=\"bcpr-PreviewHeader-button bp-btn-annotate-draw bp-is-hidden\"\n                                        title={drawMsg}\n                                        type=\"button\"\n                                    >\n                                        <IconDrawAnnotationMode color={bdlGray50} height={18} width={18} />\n                                    </PlainButton>\n                                    <PlainButton\n                                        aria-label={pointMsg}\n                                        className=\"bcpr-PreviewHeader-button bp-btn-annotate-point bp-is-hidden\"\n                                        title={pointMsg}\n                                        type=\"button\"\n                                    >\n                                        <IconPointAnnotation color={bdlGray50} height={18} width={18} />\n                                    </PlainButton>\n                                </>\n                            )}\n                            {canPrint && (\n                                <PlainButton\n                                    aria-label={printMsg}\n                                    className=\"bcpr-PreviewHeader-button\"\n                                    onClick={onPrint}\n                                    title={printMsg}\n                                    type=\"button\"\n                                >\n                                    <IconPrint color={bdlGray50} height={22} width={22} />\n                                </PlainButton>\n                            )}\n                            {canDownload && (\n                                <PlainButton\n                                    aria-label={downloadMsg}\n                                    className=\"bcpr-PreviewHeader-button\"\n                                    onClick={onDownload}\n                                    title={downloadMsg}\n                                    type=\"button\"\n                                >\n                                    <IconDownload color={bdlGray50} height={18} width={18} />\n                                </PlainButton>\n                            )}\n                        </>\n                    )}\n\n                    {onClose && (\n                        <PlainButton\n                            aria-label={isPreviewingCurrentVersion && closeMsg}\n                            className=\"bcpr-PreviewHeader-button bcpr-PreviewHeader-button-close\"\n                            onClick={onClose}\n                            type=\"button\"\n                        >\n                            {isPreviewingCurrentVersion ? (\n                                <IconClose color={bdlGray50} height={24} width={24} />\n                            ) : (\n                                closeMsg\n                            )}\n                        </PlainButton>\n                    )}\n                </div>\n            </div>\n        </header>\n    );\n};\n\nexport default injectIntl(PreviewHeader);\n"],"file":"PreviewHeader.js"}