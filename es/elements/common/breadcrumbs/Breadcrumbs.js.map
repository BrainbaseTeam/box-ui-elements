{"version":3,"sources":["../../../../src/elements/common/breadcrumbs/Breadcrumbs.js"],"names":["React","injectIntl","Breadcrumb","BreadcrumbDropdown","BreadcrumbDelimiter","DELIMITER_CARET","DEFAULT_ROOT","DELIMITER_SLASH","messages","filterCrumbs","rootId","crumbs","rootIndex","findIndex","crumb","id","slice","getBreadcrumb","isLast","onCrumbClick","delimiter","Array","isArray","condensed","name","Breadcrumbs","isSmall","intl","length","filteredCrumbs","defaultRootCrumb","find","formatMessage","rootBreadcrumb","onClick","undefined","lastBreadcrumb","secondLastBreadcrumb","moreBreadcrumbs","firstBreadcrumb","BreadcrumbsBase"],"mappings":"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","sourcesContent":["/**\n * @flow\n * @file Component that creates breadcumbs for both the header and name details\n * @author Box\n */\n\nimport React from 'react';\nimport { injectIntl } from 'react-intl';\nimport type { InjectIntlProvidedProps } from 'react-intl';\nimport Breadcrumb from './Breadcrumb';\nimport BreadcrumbDropdown from './BreadcrumbDropdown';\nimport BreadcrumbDelimiter from './BreadcrumbDelimiter';\nimport { DELIMITER_CARET, DEFAULT_ROOT, DELIMITER_SLASH } from '../../../constants';\nimport messages from '../messages';\nimport type { Delimiter, Crumb } from '../../../common/types/core';\nimport './Breadcrumbs.scss';\n\ntype Props = {\n    crumbs: Crumb[],\n    delimiter: Delimiter,\n    isSmall?: boolean,\n    onCrumbClick: Function,\n    rootId: string,\n} & InjectIntlProvidedProps;\n\n/**\n * Filters out ancestors to root from the crumbs.\n * This is useful when the root is not All Files.\n *\n * @private\n * @param {string} rootId the root folder id\n * @param {Array} crumbs list of crumbs\n * @return {Array} crumbs\n */\nfunction filterCrumbs(rootId: string, crumbs: Crumb[]): Crumb[] {\n    const rootIndex = crumbs.findIndex((crumb: Crumb) => crumb.id === rootId);\n    return rootIndex === -1 ? crumbs : crumbs.slice(rootIndex);\n}\n\n/**\n * Creates an individual breadcrumb\n *\n * @private\n * @param {Object} crumb single crumb data\n * @param {boolean} isLast is this the last crumb\n * @return {Element}\n */\nfunction getBreadcrumb(crumbs: Crumb | Crumb[], isLast: boolean, onCrumbClick: Function, delimiter: Delimiter) {\n    if (Array.isArray(crumbs)) {\n        const condensed = delimiter !== DELIMITER_CARET;\n        return (\n            <span className=\"be-breadcrumb-more\">\n                <BreadcrumbDropdown\n                    className={condensed ? 'be-breadcrumbs-condensed' : ''}\n                    crumbs={crumbs}\n                    onCrumbClick={onCrumbClick}\n                />\n                <BreadcrumbDelimiter delimiter={condensed ? DELIMITER_SLASH : DELIMITER_CARET} />\n            </span>\n        );\n    }\n\n    const { id, name } = crumbs;\n    return <Breadcrumb delimiter={delimiter} isLast={isLast} name={name} onClick={() => onCrumbClick(id)} />;\n}\n\nconst Breadcrumbs = ({ rootId, crumbs, onCrumbClick, delimiter, isSmall = false, intl }: Props) => {\n    if (!rootId || crumbs.length === 0) {\n        return <span />;\n    }\n\n    // The crumbs given may have ancestors higher than the root. We need to filter them out.\n    const filteredCrumbs = filterCrumbs(rootId, crumbs);\n\n    // Make sure \"All Files\" crumb is localized\n    const defaultRootCrumb = filteredCrumbs.find(({ id }) => id === DEFAULT_ROOT);\n    if (defaultRootCrumb) {\n        defaultRootCrumb.name = intl.formatMessage(messages.rootBreadcrumb);\n    }\n\n    const { length } = filteredCrumbs;\n\n    // Always show the last/leaf breadcrumb.\n    const crumb = filteredCrumbs[length - 1];\n    const onClick = crumb.id ? () => onCrumbClick(crumb.id) : undefined;\n    const lastBreadcrumb = <Breadcrumb isLast name={crumb.name} onClick={onClick} />;\n\n    // Always show the second last/parent breadcrumb when there are at least 2 crumbs.\n    const secondLastBreadcrumb =\n        length > 1 ? getBreadcrumb(filteredCrumbs[length - 2], false, onCrumbClick, delimiter) : null;\n\n    // Only show the more dropdown when there were at least 4 crumbs.\n    const moreBreadcrumbs =\n        length > 3 ? getBreadcrumb(filteredCrumbs.slice(1, length - 2), false, onCrumbClick, delimiter) : null;\n\n    // Only show the root breadcrumb when there are at least 3 crumbs.\n    const firstBreadcrumb = length > 2 ? getBreadcrumb(filteredCrumbs[0], false, onCrumbClick, delimiter) : null;\n\n    return (\n        <div className=\"be-breadcrumbs\">\n            {isSmall ? null : firstBreadcrumb}\n            {isSmall ? null : moreBreadcrumbs}\n            {secondLastBreadcrumb}\n            {lastBreadcrumb}\n        </div>\n    );\n};\n\nexport { Breadcrumbs as BreadcrumbsBase };\nexport default injectIntl(Breadcrumbs);\n"],"file":"Breadcrumbs.js"}