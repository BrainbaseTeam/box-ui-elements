{"version":3,"sources":["../../../../../src/elements/content-sidebar/skills/timeline/Timeline.js"],"names":["React","FormattedMessage","PlainButton","IconTrackNext","IconTrackPrevious","messages","SKILLS_TARGETS","Timeslice","isValidStartTime","Timeline","text","duration","timeslices","getViewer","interactionTarget","timeSliceIndex","playSegment","index","incr","newIndex","Math","min","length","max","viewer","timeslice","validTime","play","start","map","end","TIMELINE","PREVIOUS","previousSegment","NEXT","nextSegment"],"mappings":"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","sourcesContent":["/**\n * @flow\n * @file Timeline component\n * @author Box\n */\n\nimport React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport PlainButton from '../../../../components/plain-button/PlainButton';\nimport IconTrackNext from '../../../../icons/general/IconTrackNext';\nimport IconTrackPrevious from '../../../../icons/general/IconTrackPrevious';\nimport messages from '../../../common/messages';\nimport { SKILLS_TARGETS } from '../../../common/interactionTargets';\nimport Timeslice from './Timeslice';\nimport { isValidStartTime } from '../transcript/timeSliceUtils';\nimport type { SkillCardEntryTimeSlice, SkillCardEntryType } from '../../../../common/types/skills';\n\nimport './Timeline.scss';\n\ntype Props = {\n    duration?: number,\n    getViewer?: Function,\n    interactionTarget: string,\n    text?: string,\n    timeslices?: SkillCardEntryTimeSlice[],\n    type?: SkillCardEntryType,\n    url?: string,\n};\n\nconst Timeline = ({ text = '', duration = 0, timeslices = [], getViewer, interactionTarget }: Props) => {\n    let timeSliceIndex = -1;\n\n    const playSegment = (index: number, incr: number = 0) => {\n        const newIndex = incr > 0 ? Math.min(timeslices.length - 1, index + incr) : Math.max(0, index + incr);\n        const viewer = getViewer ? getViewer() : null;\n        const timeslice = timeslices[newIndex];\n        const validTime = isValidStartTime(timeslice);\n\n        if (validTime && viewer && typeof viewer.play === 'function') {\n            viewer.play(timeslice.start);\n            timeSliceIndex = newIndex;\n        }\n    };\n\n    return (\n        <div className=\"be-timeline\">\n            {text && <div className=\"be-timeline-label\">{text}</div>}\n            <div className=\"be-timeline-line-wrapper\">\n                <div className=\"be-timeline-line\" />\n                {timeslices.map(\n                    ({ start, end }: SkillCardEntryTimeSlice, index) => (\n                        /* eslint-disable react/no-array-index-key */\n                        <Timeslice\n                            key={index}\n                            duration={duration}\n                            end={end}\n                            index={index}\n                            interactionTarget={interactionTarget}\n                            onClick={playSegment}\n                            start={start}\n                        />\n                    ),\n                    /* eslint-enable react/no-array-index-key */\n                )}\n            </div>\n            <div className=\"be-timeline-btns\">\n                <PlainButton\n                    data-resin-target={SKILLS_TARGETS.TIMELINE.PREVIOUS}\n                    onClick={() => playSegment(timeSliceIndex, -1)}\n                    type=\"button\"\n                >\n                    <IconTrackPrevious title={<FormattedMessage {...messages.previousSegment} />} />\n                </PlainButton>\n                <PlainButton\n                    data-resin-target={SKILLS_TARGETS.TIMELINE.NEXT}\n                    onClick={() => playSegment(timeSliceIndex, 1)}\n                    type=\"button\"\n                >\n                    <IconTrackNext title={<FormattedMessage {...messages.nextSegment} />} />\n                </PlainButton>\n            </div>\n        </div>\n    );\n};\n\nexport default Timeline;\n"],"file":"Timeline.js"}