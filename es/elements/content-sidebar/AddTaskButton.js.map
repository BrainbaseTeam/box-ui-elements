{"version":3,"sources":["../../../src/elements/content-sidebar/AddTaskButton.js"],"names":["React","withRouter","AddTaskMenu","TaskModal","TASK_TYPE_APPROVAL","AddTaskButton","error","isTaskFormOpen","taskType","props","history","replace","state","open","setState","onTaskModalClose","e","isDisabled","taskFormProps","handleClickMenuItem","handleSubmitError","handleModalClose","Component","AddTaskButtonComponent"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AACA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,UAAT,QAA+C,kBAA/C;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,SAASC,kBAAT,QAAmC,iBAAnC;;IAiBMC,a;;;;;;;;;;;;;;;;4DACM;AACJC,MAAAA,KAAK,EAAE,IADH;AAEJC,MAAAA,cAAc,EAAE,KAFZ;AAGJC,MAAAA,QAAQ,EAAEJ;AAHN,K;;0EAcc,UAACI,QAAD,EAAwB;AAC1C,YAAKC,KAAL,CAAWC,OAAX,CAAmBC,OAAnB,CAA2B;AAAEC,QAAAA,KAAK,EAAE;AAAEC,UAAAA,IAAI,EAAE;AAAR;AAAT,OAA3B;;AACA,YAAKC,QAAL,CAAc;AAAEP,QAAAA,cAAc,EAAE,IAAlB;AAAwBC,QAAAA,QAAQ,EAARA;AAAxB,OAAd;AACH,K;;uEAEkB,YAAM;AAAA,UACbO,gBADa,GACQ,MAAKN,KADb,CACbM,gBADa;;AAErB,YAAKD,QAAL,CAAc;AAAEP,QAAAA,cAAc,EAAE,KAAlB;AAAyBD,QAAAA,KAAK,EAAE;AAAhC,OAAd;;AACAS,MAAAA,gBAAgB;AACnB,K;;wEAEmB,UAACC,CAAD;AAAA,aAAyB,MAAKF,QAAL,CAAc;AAAER,QAAAA,KAAK,EAAEU;AAAT,OAAd,CAAzB;AAAA,K;;;;;;;6BAEX;AAAA,wBACiC,KAAKP,KADtC;AAAA,UACGQ,UADH,eACGA,UADH;AAAA,UACeC,aADf,eACeA,aADf;AAAA,wBAEuC,KAAKN,KAF5C;AAAA,UAEGL,cAFH,eAEGA,cAFH;AAAA,UAEmBC,QAFnB,eAEmBA,QAFnB;AAAA,UAE6BF,KAF7B,eAE6BA,KAF7B;AAIL,0BACI,uDACI,oBAAC,WAAD;AAAa,QAAA,UAAU,EAAEW,UAAzB;AAAqC,QAAA,eAAe,EAAE,KAAKE;AAA3D,QADJ,eAEI,oBAAC,SAAD;AACI,QAAA,KAAK,EAAEb,KADX;AAEI,QAAA,aAAa,EAAE,KAAKc,iBAFxB;AAGI,QAAA,eAAe,EAAE,KAAKC,gBAH1B;AAII,QAAA,YAAY,EAAE,KAAKA,gBAJvB;AAKI,QAAA,cAAc,EAAEd,cALpB;AAMI,QAAA,aAAa,EAAEW,aANnB;AAOI,QAAA,QAAQ,EAAEV;AAPd,QAFJ,CADJ;AAcH;;;;EA9CuBR,KAAK,CAACsB,S;;gBAA5BjB,a,kBAOoB;AAClBY,EAAAA,UAAU,EAAE;AADM,C;;AA0C1B,SAASZ,aAAa,IAAIkB,sBAA1B;AACA,eAAetB,UAAU,CAACI,aAAD,CAAzB","sourcesContent":["// @flow\nimport * as React from 'react';\nimport { withRouter, type RouterHistory } from 'react-router-dom';\nimport AddTaskMenu from './AddTaskMenu';\nimport TaskModal from './TaskModal';\nimport { TASK_TYPE_APPROVAL } from '../../constants';\nimport type { TaskFormProps } from './activity-feed/task-form/TaskForm';\nimport type { TaskType } from '../../common/types/tasks';\n\ntype Props = {|\n    history: RouterHistory,\n    isDisabled: boolean,\n    onTaskModalClose: () => void,\n    taskFormProps: TaskFormProps,\n|};\n\ntype State = {\n    error: ?ElementsXhrError,\n    isTaskFormOpen: boolean,\n    taskType: TaskType,\n};\n\nclass AddTaskButton extends React.Component<Props, State> {\n    state = {\n        error: null,\n        isTaskFormOpen: false,\n        taskType: TASK_TYPE_APPROVAL,\n    };\n\n    static defaultProps = {\n        isDisabled: false,\n    };\n\n    /*\n    1. Pushing the open state into history keeps the sidebar open upon resize and refresh\n    2. Preventing the sidebar from closing keeps the task modal open upon edit and resize\n    */\n    handleClickMenuItem = (taskType: TaskType) => {\n        this.props.history.replace({ state: { open: true } });\n        this.setState({ isTaskFormOpen: true, taskType });\n    };\n\n    handleModalClose = () => {\n        const { onTaskModalClose } = this.props;\n        this.setState({ isTaskFormOpen: false, error: null });\n        onTaskModalClose();\n    };\n\n    handleSubmitError = (e: ElementsXhrError) => this.setState({ error: e });\n\n    render() {\n        const { isDisabled, taskFormProps } = this.props;\n        const { isTaskFormOpen, taskType, error } = this.state;\n\n        return (\n            <>\n                <AddTaskMenu isDisabled={isDisabled} onMenuItemClick={this.handleClickMenuItem} />\n                <TaskModal\n                    error={error}\n                    onSubmitError={this.handleSubmitError}\n                    onSubmitSuccess={this.handleModalClose}\n                    onModalClose={this.handleModalClose}\n                    isTaskFormOpen={isTaskFormOpen}\n                    taskFormProps={taskFormProps}\n                    taskType={taskType}\n                />\n            </>\n        );\n    }\n}\n\nexport { AddTaskButton as AddTaskButtonComponent };\nexport default withRouter(AddTaskButton);\n"],"file":"AddTaskButton.js"}