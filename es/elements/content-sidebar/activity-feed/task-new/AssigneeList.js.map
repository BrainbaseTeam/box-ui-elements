{"version":3,"sources":["../../../../../src/elements/content-sidebar/activity-feed/task-new/AssigneeList.js"],"names":["React","FormattedMessage","PlainButton","messages","AvatarGroupAvatar","AssigneeDetails","DEFAULT_ASSIGNEES_SHOWN","TASKS_PAGE_SIZE","AssigneeList","props","initialAssigneeCount","users","getAvatarUrl","isOpen","onCollapse","onExpand","entries","next_marker","entryCount","length","numVisibleAssignees","visibleUsers","slice","map","id","target","status","completedAt","completed_at","hiddenAssigneeCount","Math","max","maxAdditionalAssignees","hasMoreAssigneesThanPageSize","additionalAssigneeMessage","taskShowMoreAssigneesOverflow","taskShowMoreAssignees","additionalAssigneeCount","taskShowLessAssignees"],"mappings":"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","sourcesContent":["// @flow strict\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport PlainButton from '../../../../components/plain-button';\nimport messages from './messages';\nimport AvatarGroupAvatar from './AvatarGroupAvatar';\nimport AssigneeDetails from './AssigneeDetails';\nimport type { TaskAssigneeCollection } from '../../../../common/types/tasks';\nimport type { GetAvatarUrlCallback } from '../../../common/flowTypes';\n\nimport './AssigneeList.scss';\n\nconst DEFAULT_ASSIGNEES_SHOWN = 3;\nconst TASKS_PAGE_SIZE = 20; // service does not return the page size to the client at the moment\n\ntype Props = {|\n    getAvatarUrl: GetAvatarUrlCallback,\n    initialAssigneeCount: number,\n    isOpen: boolean,\n    onCollapse: () => void | Promise<void>,\n    onExpand: () => void | Promise<void>,\n    users: TaskAssigneeCollection,\n|};\n\nfunction AssigneeList(props: Props) {\n    const {\n        initialAssigneeCount = DEFAULT_ASSIGNEES_SHOWN,\n        users = {},\n        getAvatarUrl,\n        isOpen,\n        onCollapse,\n        onExpand,\n    } = props;\n    const { entries = [], next_marker } = users;\n    const entryCount = entries.length;\n    const numVisibleAssignees = isOpen ? entryCount : initialAssigneeCount;\n    const visibleUsers = entries\n        .slice(0, numVisibleAssignees)\n        .map(({ id, target, status, completed_at: completedAt }) => {\n            return (\n                <li key={id} className=\"bcs-AssigneeList-listItem\" data-testid=\"assignee-list-item\">\n                    <AvatarGroupAvatar\n                        status={status}\n                        className=\"bcs-AssigneeList-listItemAvatar\"\n                        user={target}\n                        getAvatarUrl={getAvatarUrl}\n                    />\n                    <AssigneeDetails user={target} status={status} completedAt={completedAt} />\n                </li>\n            );\n        });\n\n    const hiddenAssigneeCount = Math.max(0, entryCount - initialAssigneeCount);\n    const maxAdditionalAssignees = TASKS_PAGE_SIZE - initialAssigneeCount;\n    const hasMoreAssigneesThanPageSize = hiddenAssigneeCount > maxAdditionalAssignees || next_marker;\n    const additionalAssigneeMessage = hasMoreAssigneesThanPageSize\n        ? messages.taskShowMoreAssigneesOverflow\n        : messages.taskShowMoreAssignees;\n\n    return (\n        <div className=\"bcs-AssigneeList\">\n            <ul className=\"bcs-AssigneeList-list\" data-testid=\"task-assignee-list\">\n                {visibleUsers}\n            </ul>\n            {!isOpen && hiddenAssigneeCount > 0 && (\n                <div className=\"bcs-AssigneeList-toggleBtn\">\n                    <PlainButton\n                        data-resin-target=\"showmorebtn\"\n                        data-testid=\"show-more-assignees\"\n                        onClick={onExpand}\n                        className=\"lnk\"\n                    >\n                        <FormattedMessage\n                            {...additionalAssigneeMessage}\n                            values={{\n                                additionalAssigneeCount: hasMoreAssigneesThanPageSize\n                                    ? maxAdditionalAssignees\n                                    : hiddenAssigneeCount,\n                            }}\n                        />\n                    </PlainButton>\n                </div>\n            )}\n            {isOpen && (\n                <div className=\"bcs-AssigneeList-toggleBtn\">\n                    <PlainButton\n                        data-resin-target=\"showlessbtn\"\n                        data-testid=\"show-less-assignees\"\n                        onClick={onCollapse}\n                        className=\"lnk\"\n                    >\n                        <FormattedMessage {...messages.taskShowLessAssignees} />\n                    </PlainButton>\n                </div>\n            )}\n        </div>\n    );\n}\n\nexport default AssigneeList;\n"],"file":"AssigneeList.js"}