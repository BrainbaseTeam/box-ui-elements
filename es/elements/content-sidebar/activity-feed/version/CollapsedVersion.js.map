{"version":3,"sources":["../../../../../src/elements/content-sidebar/activity-feed/version/CollapsedVersion.js"],"names":["React","FormattedMessage","injectIntl","ActivityCard","IconInfo","PlainButton","messages","selectors","ACTIVITY_TARGETS","getMessageForAction","action","collaborators","version_start","version_end","collaboratorIDs","Object","keys","numberOfCollaborators","length","versionRange","collaborator","versionUploadCollapsed","name","versions","versionMultipleUsersUploaded","CollapsedVersion","props","getVersionAction","intl","onInfo","formatMessage","getVersionInfo","VERSION_CARD","CollapsedVersionBase"],"mappings":";;AAAA;;;;AAKA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,gBAAT,EAA2BC,UAA3B,QAA6C,YAA7C;AAEA,OAAOC,YAAP,MAAyB,iBAAzB;AACA,OAAOC,QAAP,MAAqB,oCAArB;AACA,OAAOC,WAAP,MAAwB,qCAAxB;AACA,OAAOC,QAAP,MAAqB,0BAArB;AACA,OAAOC,SAAP,MAAsB,mCAAtB;AACA,SAASC,gBAAT,QAAiC,oCAAjC;AAEA,OAAO,gBAAP;;AAEA,SAASC,mBAAT,CACIC,MADJ,EAEIC,aAFJ,EAGIC,aAHJ,EAIIC,WAJJ,EAKc;AACV;AACA,MAAIH,MAAM,KAAK,QAAf,EAAyB;AACrB,WAAO,IAAP;AACH;;AAED,MAAMI,eAAe,GAAGC,MAAM,CAACC,IAAP,CAAYL,aAAZ,CAAxB;AACA,MAAMM,qBAAqB,GAAGH,eAAe,CAACI,MAA9C;AAEA,MAAMC,YAAwB,GAC1B;AAAM,IAAA,SAAS,EAAC;AAAhB,KACKP,aADL,SACuBC,WADvB,CADJ;;AAMA,MAAII,qBAAqB,KAAK,CAA9B,EAAiC;AAC7B,QAAMG,YAAY,GAAGT,aAAa,CAACG,eAAe,CAAC,CAAD,CAAhB,CAAlC;AACA,WACI,oBAAC,gBAAD,eACQR,QAAQ,CAACe,sBADjB;AAEI,MAAA,MAAM,EAAE;AACJC,QAAAA,IAAI,EAAE,oCAASF,YAAY,CAACE,IAAtB,CADF;AAEJC,QAAAA,QAAQ,EAAEJ;AAFN;AAFZ,OADJ;AASH;;AAED,SACI,oBAAC,gBAAD,eACQb,QAAQ,CAACkB,4BADjB;AAEI,IAAA,MAAM,EAAE;AACJP,MAAAA,qBAAqB,EAArBA,qBADI;AAEJM,MAAAA,QAAQ,EAAEJ;AAFN;AAFZ,KADJ;AASH;;AAUD,IAAMM,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,KAAD,EAA8B;AACnD;AACA,MAAMhB,MAAM,GAAGH,SAAS,CAACoB,gBAAV,CAA2BD,KAA3B,CAAf;AAFmD,MAG3Cf,aAH2C,GAG2Be,KAH3B,CAG3Cf,aAH2C;AAAA,MAG5BiB,IAH4B,GAG2BF,KAH3B,CAG5BE,IAH4B;AAAA,MAGtBC,MAHsB,GAG2BH,KAH3B,CAGtBG,MAHsB;AAAA,MAGdN,QAHc,GAG2BG,KAH3B,CAGdH,QAHc;AAAA,MAGJX,aAHI,GAG2Bc,KAH3B,CAGJd,aAHI;AAAA,MAGWC,WAHX,GAG2Ba,KAH3B,CAGWb,WAHX;AAKnD,SACI,oBAAC,YAAD;AAAc,IAAA,SAAS,EAAC;AAAxB,KACI;AAAM,IAAA,SAAS,EAAC;AAAhB,KACKJ,mBAAmB,CAACC,MAAD,EAASC,aAAT,EAAwBC,aAAxB,EAAuCC,WAAvC,CADxB,CADJ,EAIKgB,MAAM,GACH;AAAM,IAAA,SAAS,EAAC;AAAhB,KACI,oBAAC,WAAD;AACI,kBAAYD,IAAI,CAACE,aAAL,CAAmBxB,QAAQ,CAACyB,cAA5B,CADhB;AAEI,IAAA,SAAS,EAAC,kBAFd;AAGI,yBAAmBvB,gBAAgB,CAACwB,YAHxC;AAII,IAAA,OAAO,EAAE,mBAAM;AACXH,MAAAA,MAAM,CAAC;AAAEN,QAAAA,QAAQ,EAARA;AAAF,OAAD,CAAN;AACH,KANL;AAOI,IAAA,IAAI,EAAC;AAPT,KASI,oBAAC,QAAD;AAAU,IAAA,MAAM,EAAE,EAAlB;AAAsB,IAAA,KAAK,EAAE;AAA7B,IATJ,CADJ,CADG,GAcH,IAlBR,CADJ;AAsBH,CA3BD;;AA6BA,SAASE,gBAAgB,IAAIQ,oBAA7B;AACA,eAAe/B,UAAU,CAACuB,gBAAD,CAAzB","sourcesContent":["/**\n * @flow\n * @file Collapsed Version component\n */\n\nimport * as React from 'react';\nimport { FormattedMessage, injectIntl } from 'react-intl';\nimport type { InjectIntlProvidedProps } from 'react-intl';\nimport ActivityCard from '../ActivityCard';\nimport IconInfo from '../../../../icons/general/IconInfo';\nimport PlainButton from '../../../../components/plain-button';\nimport messages from '../../../common/messages';\nimport selectors from '../../../common/selectors/version';\nimport { ACTIVITY_TARGETS } from '../../../common/interactionTargets';\nimport type { User, FileVersions } from '../../../../common/types/core';\nimport './Version.scss';\n\nfunction getMessageForAction(\n    action: string,\n    collaborators: { [collaborator_id: string]: User },\n    version_start: number,\n    version_end: number,\n): React.Node {\n    // We only support collapsing for multiple upload versions\n    if (action !== 'upload') {\n        return null;\n    }\n\n    const collaboratorIDs = Object.keys(collaborators);\n    const numberOfCollaborators = collaboratorIDs.length;\n\n    const versionRange: React.Node = (\n        <span className=\"bcs-Version-range\">\n            {version_start} - {version_end}\n        </span>\n    );\n\n    if (numberOfCollaborators === 1) {\n        const collaborator = collaborators[collaboratorIDs[0]];\n        return (\n            <FormattedMessage\n                {...messages.versionUploadCollapsed}\n                values={{\n                    name: <strong>{collaborator.name}</strong>,\n                    versions: versionRange,\n                }}\n            />\n        );\n    }\n\n    return (\n        <FormattedMessage\n            {...messages.versionMultipleUsersUploaded}\n            values={{\n                numberOfCollaborators,\n                versions: versionRange,\n            }}\n        />\n    );\n}\n\ntype Props = {\n    collaborators: { [collaborator_id: string]: User },\n    onInfo?: Function,\n    version_end: number,\n    version_start: number,\n    versions: FileVersions,\n} & InjectIntlProvidedProps;\n\nconst CollapsedVersion = (props: Props): React.Node => {\n    // $FlowFixMe\n    const action = selectors.getVersionAction(props);\n    const { collaborators, intl, onInfo, versions, version_start, version_end } = props;\n\n    return (\n        <ActivityCard className=\"bcs-Version\">\n            <span className=\"bcs-Version-message\">\n                {getMessageForAction(action, collaborators, version_start, version_end)}\n            </span>\n            {onInfo ? (\n                <span className=\"bcs-Version-actions\">\n                    <PlainButton\n                        aria-label={intl.formatMessage(messages.getVersionInfo)}\n                        className=\"bcs-Version-info\"\n                        data-resin-target={ACTIVITY_TARGETS.VERSION_CARD}\n                        onClick={() => {\n                            onInfo({ versions });\n                        }}\n                        type=\"button\"\n                    >\n                        <IconInfo height={16} width={16} />\n                    </PlainButton>\n                </span>\n            ) : null}\n        </ActivityCard>\n    );\n};\n\nexport { CollapsedVersion as CollapsedVersionBase };\nexport default injectIntl(CollapsedVersion);\n"],"file":"CollapsedVersion.js"}