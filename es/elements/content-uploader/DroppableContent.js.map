{"version":3,"sources":["../../../src/elements/content-uploader/DroppableContent.js"],"names":["React","makeDroppable","ItemList","UploadState","dropDefinition","dropValidator","allowedTypes","types","Array","from","some","type","indexOf","allowedList","filter","allowed","contains","length","onDrop","event","addDataTransferItemsToUploadQueue","dataTransfer","DroppableContent","canDrop","isOver","isTouch","view","items","addFiles","onClick","isFolderUploadEnabled","handleSelectFiles","files","target","hasItems"],"mappings":"AAAA;;;;AAKA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,aAAP,MAA0B,qBAA1B;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,WAAP,MAAwB,eAAxB;AAIA,OAAO,yBAAP;;AAcA;;;AAGA,IAAMC,cAAc,GAAG;AACnB;;;AAGAC,EAAAA,aAAa,EAAE,oCAGV;AAAA,QAFCC,YAED,QAFCA,YAED;AAAA,QADCC,KACD,SADCA,KACD;;AACD,QAAIA,KAAK,YAAYC,KAArB,EAA4B;AACxB,aAAOA,KAAK,CAACC,IAAN,CAAWF,KAAX,EAAkBG,IAAlB,CAAuB,UAAAC,IAAI;AAAA,eAAIL,YAAY,CAACM,OAAb,CAAqBD,IAArB,IAA6B,CAAC,CAAlC;AAAA,OAA3B,CAAP;AACH;;AAED,QAAME,WAAW,GAAGP,YAAY,CAACQ,MAAb,CAAoB,UAAAC,OAAO;AAAA,aAAIR,KAAK,CAACS,QAAN,CAAeD,OAAf,CAAJ;AAAA,KAA3B,CAApB;AACA,WAAOF,WAAW,CAACI,MAAZ,GAAqB,CAA5B;AACH,GAdkB;;AAgBnB;;;AAGAC,EAAAA,MAAM,EAAE,gBAACC,KAAD,SAAyD;AAAA,QAA/CC,iCAA+C,SAA/CA,iCAA+C;AAAA,QACrDC,YADqD,GACpCF,KADoC,CACrDE,YADqD;AAE7DD,IAAAA,iCAAiC,CAACC,YAAD,CAAjC;AACH;AAtBkB,CAAvB;AAyBA,IAAMC,gBAAgB,GAAGrB,aAAa,CAACG,cAAD,CAAb,CACrB,iBAAgG;AAAA,MAA7FmB,OAA6F,SAA7FA,OAA6F;AAAA,MAApFC,MAAoF,SAApFA,MAAoF;AAAA,MAA5EC,OAA4E,SAA5EA,OAA4E;AAAA,MAAnEC,IAAmE,SAAnEA,IAAmE;AAAA,MAA7DC,KAA6D,SAA7DA,KAA6D;AAAA,MAAtDC,QAAsD,SAAtDA,QAAsD;AAAA,MAA5CC,OAA4C,SAA5CA,OAA4C;AAAA,MAAnCC,qBAAmC,SAAnCA,qBAAmC;;AAC5F,MAAMC,iBAAiB,GAAG,SAApBA,iBAAoB;AAAA,QAAaC,KAAb,SAAGC,MAAH,CAAaD,KAAb;AAAA,WAAgCJ,QAAQ,CAACI,KAAD,CAAxC;AAAA,GAA1B;;AACA,MAAME,QAAQ,GAAGP,KAAK,CAACV,MAAN,GAAe,CAAhC;AAEA,SACI;AAAK,IAAA,SAAS,EAAC;AAAf,KACI,oBAAC,QAAD;AAAU,IAAA,KAAK,EAAEU,KAAjB;AAAwB,IAAA,OAAO,EAAEE,OAAjC;AAA0C,IAAA,IAAI,EAAEH;AAAhD,IADJ,EAEI,oBAAC,WAAD;AACI,IAAA,OAAO,EAAEH,OADb;AAEI,IAAA,QAAQ,EAAEW,QAFd;AAGI,IAAA,qBAAqB,EAAEJ,qBAH3B;AAII,IAAA,MAAM,EAAEN,MAJZ;AAKI,IAAA,OAAO,EAAEC,OALb;AAMI,IAAA,QAAQ,EAAEM,iBANd;AAOI,IAAA,IAAI,EAAEL;AAPV,IAFJ,CADJ;AAcH,CAnBoB,CAAzB;AAsBA,eAAeJ,gBAAf","sourcesContent":["/**\n * @flow\n * @file Droppable area containing upload item list\n */\n\nimport React from 'react';\nimport makeDroppable from '../common/droppable';\nimport ItemList from './ItemList';\nimport UploadState from './UploadState';\nimport type { UploadItem } from '../../common/types/upload';\nimport type { View, DOMStringList } from '../../common/types/core';\n\nimport './DroppableContent.scss';\n\ntype Props = {\n    addDataTransferItemsToUploadQueue: Function,\n    addFiles: Function,\n    canDrop: boolean,\n    isFolderUploadEnabled: boolean,\n    isOver: boolean,\n    isTouch: boolean,\n    items: UploadItem[],\n    onClick: Function,\n    view: View,\n};\n\n/**\n * Definition for drag and drop behavior.\n */\nconst dropDefinition = {\n    /**\n     * Validates whether a file can be dropped or not.\n     */\n    dropValidator: (\n        { allowedTypes }: { allowedTypes: Array<string> },\n        { types }: { types: Array<string> | DOMStringList },\n    ) => {\n        if (types instanceof Array) {\n            return Array.from(types).some(type => allowedTypes.indexOf(type) > -1);\n        }\n\n        const allowedList = allowedTypes.filter(allowed => types.contains(allowed));\n        return allowedList.length > 0;\n    },\n\n    /**\n     * Determines what happens after a file is dropped\n     */\n    onDrop: (event, { addDataTransferItemsToUploadQueue }: Props) => {\n        const { dataTransfer } = event;\n        addDataTransferItemsToUploadQueue(dataTransfer);\n    },\n};\n\nconst DroppableContent = makeDroppable(dropDefinition)(\n    ({ canDrop, isOver, isTouch, view, items, addFiles, onClick, isFolderUploadEnabled }: Props) => {\n        const handleSelectFiles = ({ target: { files } }: any) => addFiles(files);\n        const hasItems = items.length > 0;\n\n        return (\n            <div className=\"bcu-droppable-content\">\n                <ItemList items={items} onClick={onClick} view={view} />\n                <UploadState\n                    canDrop={canDrop}\n                    hasItems={hasItems}\n                    isFolderUploadEnabled={isFolderUploadEnabled}\n                    isOver={isOver}\n                    isTouch={isTouch}\n                    onSelect={handleSelectFiles}\n                    view={view}\n                />\n            </div>\n        );\n    },\n);\n\nexport default DroppableContent;\n"],"file":"DroppableContent.js"}