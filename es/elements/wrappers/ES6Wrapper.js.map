{"version":3,"sources":["../../../src/elements/wrappers/ES6Wrapper.js"],"names":["EventEmitter","ReactDOM","i18n","DEFAULT_CONTAINER","ES6Wrapper","language","messages","component","data","emit","id","token","options","version","__VERSION__","bind","container","HTMLElement","document","querySelector","render","removeAllListeners","unmountComponentAtNode","innerHTML","Error","getComponent","clearCache","eventName","e"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;AAMA,OAAOA,YAAP,MAAyB,QAAzB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAOC,IAAP,MAAiB,gBAAjB;AACA,SAASC,iBAAT,QAAkC,iBAAlC;;IAKMC,U;;;;;;;;;;;;;;;;;;+DA6BiBF,IAAI,CAACG,Q;;+DAKFH,IAAI,CAACI,Q;;mEA6DZ,UAACC,SAAD,EAAoB;AAC/B,YAAKA,SAAL,GAAiBA,SAAjB;AACH,K;;oEA8Be,UAACC,IAAD,EAAqB;AACjC,YAAKC,IAAL,CAAU,aAAV,EAAyBD,IAAzB;AACH,K;;;;;;;;AAxFD;;;;;;;;;yBASKE,E,EAAYC,K,EAA0D;AAAA,UAA5CC,OAA4C,uEAAV,EAAU;AACvE,WAAKF,EAAL,GAAUA,EAAV;AACA,WAAKC,KAAL,GAAaA,KAAb;AACA,WAAKC,OAAL,GAAeA,OAAf;AACA,WAAKA,OAAL,CAAaC,OAAb,GAAuBC,WAAvB;AACA,WAAKL,IAAL,GAAY,KAAKA,IAAL,CAAUM,IAAV,CAAe,IAAf,CAAZ;AACA,UAAMC,SAAS,GAAGJ,OAAO,CAACI,SAAR,IAAqBb,iBAAvC;AACA,WAAKa,SAAL,GACIA,SAAS,YAAYC,WAArB,GAAmCD,SAAnC,GAAiDE,QAAQ,CAACC,aAAT,CAAuBH,SAAvB,CADrD;AAEA,WAAKI,MAAL;AACH;AAED;;;;;;;;;;;2BAQa;AACT,WAAKC,kBAAL;AACApB,MAAAA,QAAQ,CAACqB,sBAAT,CAAgC,KAAKN,SAArC;;AACA,UAAI,KAAKA,SAAT,EAAoB;AAChB,aAAKA,SAAL,CAAeO,SAAf,GAA2B,EAA3B;AACH;AACJ;AAED;;;;;;;;;;6BAOS;AACL,YAAM,IAAIC,KAAJ,CAAU,gBAAV,CAAN;AACH;AAED;;;;;;;;;;AAUA;;;;;;mCAMoB;AAChB,aAAO,KAAKjB,SAAZ;AACH;AAED;;;;;;;;;iCAMmB;AACf,UAAMA,SAAS,GAAG,KAAKkB,YAAL,EAAlB;;AACA,UAAIlB,SAAS,IAAI,OAAOA,SAAS,CAACmB,UAAjB,KAAgC,UAAjD,EAA6D;AACzDnB,QAAAA,SAAS,CAACmB,UAAV;AACH;AACJ;AAED;;;;;;;;;AASA;;;;;;;;;yBASKC,S,EAAmBnB,I,EAAoB;AACxC,UAAI;AACA,oFAAkBmB,SAAlB,EAA6BnB,IAA7B;AACH,OAFD,CAEE,OAAOoB,CAAP,EAAU,CACR;AACH;;AAED,aAAO,KAAP;AACH;;;;EApJoB5B,Y;;AAuJzB,eAAeI,UAAf","sourcesContent":["/**\n * @flow\n * @file Base class for the Box UI Elements ES6 wrapper\n * @author Box\n */\n\nimport EventEmitter from 'events';\nimport ReactDOM from 'react-dom';\nimport i18n from '../common/i18n';\nimport { DEFAULT_CONTAINER } from '../../constants';\nimport type { Token, StringMap } from '../../common/types/core';\n\ndeclare var __VERSION__: string;\n\nclass ES6Wrapper extends EventEmitter {\n    /**\n     * @property {Function}\n     */\n    emit: Function;\n\n    /**\n     * @property {HTMLElement}\n     */\n    container: HTMLElement;\n\n    /**\n     * @property {string}\n     */\n    id: string;\n\n    /**\n     * @property {string}\n     */\n    token: Token;\n\n    /**\n     * @property {string}\n     */\n    options: { [key: string]: any };\n\n    /**\n     * @property {string}\n     */\n    language: string = i18n.language;\n\n    /**\n     * @property {Object}\n     */\n    messages: StringMap = i18n.messages;\n\n    /**\n     * @property {Element}\n     */\n    component: any;\n\n    /**\n     * Shows the content picker.\n     *\n     * @public\n     * @param {string} id - The folder or file id.\n     * @param {string} token - The API access token.\n     * @param {Object|void} [options] Optional options.\n     * @return {void}\n     */\n    show(id: string, token: Token, options: { [key: string]: any } = {}): void {\n        this.id = id;\n        this.token = token;\n        this.options = options;\n        this.options.version = __VERSION__;\n        this.emit = this.emit.bind(this);\n        const container = options.container || DEFAULT_CONTAINER;\n        this.container =\n            container instanceof HTMLElement ? container : ((document.querySelector(container): any): HTMLElement);\n        this.render();\n    }\n\n    /**\n     * Hides the content picker.\n     * Removes all event listeners.\n     * Clears out the DOM inside container.\n     *\n     * @public\n     * @return {void}\n     */\n    hide(): void {\n        this.removeAllListeners();\n        ReactDOM.unmountComponentAtNode(this.container);\n        if (this.container) {\n            this.container.innerHTML = '';\n        }\n    }\n\n    /**\n     * Renders the component.\n     * Should be overriden.\n     *\n     * @protected\n     * @return {void}\n     */\n    render() {\n        throw new Error('Unimplemented!');\n    }\n\n    /**\n     * Sets reference to the inner component\n     *\n     * @protected\n     * @return {void}\n     */\n    setComponent = (component: any) => {\n        this.component = component;\n    };\n\n    /**\n     * Gets reference to the inner component\n     *\n     * @public\n     * @return {Element}\n     */\n    getComponent(): any {\n        return this.component;\n    }\n\n    /**\n     * Clears out the cache used by the component\n     *\n     * @public\n     * @return {Element}\n     */\n    clearCache(): void {\n        const component = this.getComponent();\n        if (component && typeof component.clearCache === 'function') {\n            component.clearCache();\n        }\n    }\n\n    /**\n     * Callback for interaction events\n     *\n     * @return {void}\n     */\n    onInteraction = (data: any): void => {\n        this.emit('interaction', data);\n    };\n\n    /**\n     * Wrapper for emit to prevent JS exceptions\n     * in the listeners own code.\n     *\n     * @public\n     * @param {string} eventName - name of the event\n     * @param {Object} data - event data\n     * @return {boolean} true if the event had listeners, false otherwise.\n     */\n    emit(eventName: string, data: any): boolean {\n        try {\n            return super.emit(eventName, data);\n        } catch (e) {\n            // do nothing\n        }\n\n        return false;\n    }\n}\n\nexport default ES6Wrapper;\n"],"file":"ES6Wrapper.js"}